<div class="container cst-article">

	<div>
		<h2>Sharepoint 2007 : 'Enable Validation' error</h2>
		<p>
			Attention quand vous créez un element via C# tel qu'un "DropDownList" (soit un <code>&lt;select&gt;</code>), il y a un 'binding' entre son état initial (au chargement de la page) et son état à l'envoie du formulaire. Par conséquent, si vous effectuez des modifications via du JavaScript sur le contenu du "select", vous risquez bien de rencontrer une telle erreur.
		</p>
		<p>
			Si vous avez des elements html que vous risquez de modifier via JavaScript utiliser plutôt l'objet HtmlGenericControl pour le créer.
		</p>
		<p>
			Par exemple, j'avais un  <code>&lt;select&gt;</code> que j'allais remplir à la suite d'un appel ajax, donc côté C# :
			
			<pre>
// globals
private HtmlGenericControl custDropDownList;
private HtmlGenericControl custIdHidden;

// chargement de la page.
protected override void CreateChildControls()
{
	//[...]

	// dans la partie du code qui va créer les controls.
	this.custDropDownList = new HtmlGenericControl("select") { 
		ID = "custDropDownList" 
	};
	this.custDropDownList.Attributes.Add("class", "col-xs-12 textbox-input");
	this.custDropDownList.Attributes.Add("disabled", "disabled");
	contentPanel.Controls.Add(this.custDropDownList);

	// ajout d'un input hidden qui va nous servir à récupérer notre valeur.
	this.custIdHidden = new HtmlGenericControl("input");
	this.custIdHidden.Attributes.Add("type", "hidden");
	this.custIdHidden.Attributes.Add("id", "custIdHidden");
	this.custIdHidden.Attributes.Add("name", "custIdHidden");
	contentPanel.Controls.Add(this.custIdHidden);

	//[...]

	// on créait notre button pour l'envoie de notre formulaire.
	Button saveButton = new Button() { 
		Text = "Envoyer" 
	};
	saveButton.Click += new EventHandler(OnSaveButtonClick);
	contentPanel.Controls.Add(saveButton);

	//[...]
}

// à la soumission de la page.
void OnSaveButtonClick(object sender, EventArgs e)
{
	//[...]

	// on récupère notre valeur de notre hidden via son id.
	string hiddenValue = Context.Request.Form["custIdHidden"];

    if (!String.IsNullOrEmpty(agenceValue))
    {
		// notre traitement
	}

	//[...]
}
			</pre>
		</p>
	</div>

</div>
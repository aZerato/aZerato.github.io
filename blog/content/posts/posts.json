[{"id":32,"publication_date":1519862400000,"img":"/blog/files/img/log-all.png","img_alt":"http://in-security.org/2015/11/20/log-all-the-things-episode-039/","fr":{"title":"Log4Net : Aucun fichier de log g&#xE9;n&#xE9;r&#xE9; &amp;&amp; Cr&#xE9;ation d&apos;un fichier de configuration","summary":"\r\n        <p>\r\n            J&apos;ai une solution relativement simple d&#xE9;coup&#xE9;e en trois &quot;dossiers de projets&quot; (inspiration DDD) :\r\n        </p>\r\n        <ul>\r\n            <li>1 - Presentation</li>\r\n            <li>2 - Domain</li>\r\n            <li>3 - CrossCutting (https://msdn.microsoft.com/en-us/library/ee658105.aspx)</li>\r\n        </ul>\r\n        <p>\r\n            Le probl&#xE8;me vient du fait que j&apos;ai voulu g&#xE9;rer deux fichiers de configurations.\r\n        </p>\r\n        <h3>\r\n            Pourquoi ? \r\n        </h3>\r\n        <p>\r\n            J&apos;ai deux projets dans la couche &quot;Presentation&quot;, un projet &quot;Legacy&quot; qui appelle un autre projet de la couche &quot;Presentation&quot;, et c&apos;est autre projet qui a un lien avec tous les autres couches.\r\n        </p>\r\n        <p>\r\n            Le projet &quot;Legacy&quot; de la couche &quot;Presentation&quot; est &quot;ind&#xE9;pendant&quot;, il n&apos;a que l&apos;invocation d&apos;une class &quot;COM&quot; de l&apos;autre projet. Je souhaitais vraiment d&#xE9;faire le maximum de liens possibles entre le projet &quot;Legacy&quot; et le reste.\r\n        </p>\r\n    ","content":"\r\n            <p>\r\n                J&apos;ai une solution relativement simple d&#xE9;coup&#xE9;e en trois &quot;dossiers de projets&quot; (inspiration DDD) :\r\n            </p>\r\n            <ul>\r\n                <li>1 - Presentation</li>\r\n                <li>2 - Domain</li>\r\n                <li>3 - CrossCutting (https://msdn.microsoft.com/en-us/library/ee658105.aspx)</li>\r\n            </ul>\r\n            <p>\r\n                Le probl&#xE8;me vient du fait que j&apos;ai voulu g&#xE9;rer deux fichiers de configurations.\r\n            </p>\r\n            <h3>\r\n                Pourquoi ? \r\n            </h3>\r\n            <p>\r\n                J&apos;ai deux projets dans la couche &quot;Presentation&quot;, un projet &quot;Legacy&quot; qui appel un autre projet de la couche &quot;Presentation&quot;, et c&apos;est autre projet qui a un lien avec tous les autres couches.\r\n            </p>\r\n            <p>\r\n                Le projet &quot;Legacy&quot; de la couche &quot;Presentation&quot; est &quot;ind&#xE9;pendant&quot;, il n&apos;a que l&apos;invocation d&apos;une class &quot;COM&quot; de l&apos;autre projet. Je souhaitais vraiment d&#xE9;faire un maximum de liens possibles entre le projet &quot;Legacy&quot; et le reste.\r\n            </p>\r\n            <p>\r\n                Comme je n&apos;ai pas de &quot;vrai&quot; application, j&apos;ai donc cr&#xE9;&#xE9; un fichier de configuration directement dans le projet se situant dans la couche &quot;CrossCutting&quot;.\r\n            </p>\r\n            <h3>\r\n                Cr&#xE9;ation d&apos;un fichier de configuration pour une DLL ou un projet\r\n            </h3>\r\n            <p>\r\n                Si votre projet s&apos;appelle &quot;Groot.CrossCutting&quot; avec l&apos;exemple C# que je vais donner, il faut que votre fichier de configuration soit nomm&#xE9; &quot;Groot.CrossCutting.dll.config&quot;.\r\n            </p>\r\n            <p>\r\n                Vous cr&#xE9;ez ensuite une class type &quot;ConfigurationHelper&quot; :\r\n            </p>\r\n            <prism-component class=\"language-csharp line-numbers\">\r\nprivate ConfigurationHelper()\r\n{\r\n    this.ApplicationConfiguration = ConfigurationManager.OpenExeConfiguration(this.GetType().Assembly.Location);\r\n    this.FilePath = this.ApplicationConfiguration.FilePath;\r\n    this.AppSettings = this.ApplicationConfiguration.AppSettings;\r\n}\r\n\r\npublic string AppSettingsValue(string key)\r\n{\r\n    string value = null;\r\n    var keyvalue = this.AppSettings.Settings[key];\r\n\r\n    if (keyvalue != null)\r\n    {\r\n        value = keyvalue.Value;\r\n    }\r\n\r\n    return value;\r\n}\r\n            </prism-component>\r\n            <h3>\r\n                Log4Net\r\n            </h3>\r\n            <p>\r\n                C&apos;est ensuite au niveau de l&apos;&quot;AssemblyInfo&quot; du projet &quot;Groot.CrossCutting&quot; que l&apos;on va placer la propri&#xE9;t&#xE9; Log4Net &quot;[assembly: log4net.Config.XmlConfigurator(Watch=true)]&quot;.\r\n            </p>\r\n            <p>\r\n                Vous pouvez ensuite remplir le fichier de configuration normalement en y ajoutant la partie Log4Net !\r\n            </p>\r\n    "},"en":{"title":"Log4Net : No log file generated &amp;&amp; Configuration file creation","summary":"\r\n        <p>\r\n            Be patient !\r\n        </p>\r\n    ","content":"\r\n        <p>\r\n            Be patient !\r\n        </p>\r\n    "}},{"id":31,"publication_date":1498694400000,"img":"/blog/files/img/the-binding-of-isaac-afterbirth.jpg","img_alt":"http://gamingway.fr/wp-content/uploads/2017/01/the_binding_of_isaac_afterbirth010.jpg","fr":{"title":"Team Foundation Server : Probl&#xE8;me de binding","summary":"\r\n        <p>\r\n            J&apos;ai rencontr&#xE9; un probl&#xE8;me il y a peu sur une solution &quot;versionn&#xE9;e&quot; sous TFS. J&apos;&#xE9;tais sur Visual Studio 2010.\r\n        </p>\r\n        <p>\r\n            Mes modifications n&apos;&#xE9;taient pas prises en compte, donc impossible de pusher mes corrections sur le serveur. Refaire le mapping avec un workspace ne m&apos;aider pas.\r\n        </p>\r\n    ","content":"\r\n        <p>\r\n            J&apos;ai rencontr&#xE9; un probl&#xE8;me il y a peu sur une solution versionn&#xE9;e sous TFS. J&apos;&#xE9;tais sur Visual Studio 2010.\r\n        </p>\r\n        <p>\r\n            Mes modifications n&apos;&#xE9;taient pas prises en compte, donc impossible de pusher mes corrections sur le serveur. Refaire le mapping avec un workspace ne m&apos;aider pas.\r\n        </p>\r\n        <p>\r\n            Il faut donc r&#xE9;initialiser le binding des projets de votre solution.\r\n        </p>\r\n        <p>\r\n            Pour ce faire rendez-vous dans le menu &quot;File &gt; Source Control &gt; Change Source Control&quot;. Vous verrez une fen&#xEA;tre avec l&apos;ensemble de votre solution et sans aucun doute la colonne &quot;Server Name&quot; incorrecte.\r\n        </p>\r\n        <p>\r\n            Vous s&#xE9;l&#xE9;ctionnez les projets posant probl&#xE8;me et vous cliquez sur &quot;bind&quot;.\r\n        </p>\r\n    "},"en":{"title":"Team Foundation Server : Binding issue","summary":"\r\n        <p>\r\n            I&apos;ve gotten a problem with a solution on Visual Studio 2010.\r\n        </p>\r\n        <p>\r\n            <blockquote>\r\n                TFS was unable to detect any modification.\r\n            </blockquote>\r\n        </p>\r\n    ","content":"\r\n        <p>\r\n            I&apos;ve gotten a problem with a solution on Visual Studio 2010.\r\n        </p>\r\n        <p>\r\n            <blockquote>\r\n                TFS was unable to detect any modification.\r\n            </blockquote>\r\n        </p>\r\n        <p>\r\n            We need to reactivate binding.\r\n        </p>\r\n        <p>\r\n            Go to &quot;File &gt; Source Control &gt; Change Source Control&quot;. Now, you can see a new window showing all your solution mapping. Some values can be incorrect in &quot;Server Name&quot; column.\r\n        </p>\r\n        <p>\r\n            Select all your incorrect projects and click on &quot;bind&quot; button.\r\n        </p>\r\n    "}},{"id":30,"publication_date":1498003200000,"img":"/blog/files/img/joker-tfs.jpg","img_alt":"https://cdn.meme.am/cache/instances/folder235/500x/38435235/joker-mind-loss-tell-that-tfs-is-down-and-everyone-loses-their-minds.jpg","fr":{"title":"TFS en ligne de commande","summary":"\r\n        <p>\r\n            Vous n&apos;avez sans doute jamais r&#xE9;fl&#xE9;chi &#xE0; la question mais, &quot;Avons-nous la possibilit&#xE9; d&apos;utiliser TFS via ligne de commande comme Git ?&quot;.\r\n        </p>\r\n    ","content":"\r\n        <h2>Team Foundation Server en CLI</h2>\r\n        <p>\r\n            Vous n&apos;avez sans doute jamais r&#xE9;fl&#xE9;chi &#xE0; la question mais, &quot;Avons-nous la possibilit&#xE9; d&apos;utiliser TFS via ligne de commande comme Git ?&quot;.\r\n        </p>\r\n        <h3>Pourquoi s&apos;infliger tant de souffrance* ?</h3>\r\n        <p>\r\n            Et bien dans mon cas, nous avons deux solutions similaires dont les principales diff&#xE9;rences touchent le visuel.\r\n        </p>\r\n        <p>\r\n            Une des solutions a &#xE9;volu&#xE9; plus rapidement que l&apos;autre et il est temps maintenant d&apos;appliquer les modifications de l&apos;une &#xE0; l&apos;autre.\r\n        </p>\r\n        <h3>Le probl&#xE8;me</h3>\r\n        <p>\r\n            Nous sommes en train d&apos;envisager un merge entre deux solutions &quot;s&#xE9;par&#xE9;es&quot;. Et l&apos;interface int&#xE9;gr&#xE9;e &#xE0; Visual Studio ne nous permet pas ce genre de manipulation (ce qui semble normal car risqu&#xE9; [trop de conflits]).\r\n        </p>\r\n        <p>\r\n            <blockquote>\r\n                Vu la similarit&#xE9; des projets, il aurait problablement pr&#xE9;f&#xE9;rable de cr&#xE9;er une branche pour chaque projet et non de tout s&#xE9;parer.\r\n            </blockquote>\r\n        </p>\r\n        <h3>Comment acc&#xE9;der au CLI <b>TF</b> ?</h3>\r\n        <p>\r\n            La premi&#xE8;re chose &#xE0; faire est de trouver le chemin vers &apos;TF.exe&apos; (ex : D:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\Common7\\IDE). Vous pouvez maintenant l&apos;ajouter &#xE0; votre &apos;Path&apos; <a href=\"http://sametmax.com/ajouter-un-chemin-a-la-variable-denvironnement-path-sous-windows/\" alt=\"Ajouter au Path Windows\">(lien)</a>.\r\n        </p>\r\n        <p>\r\n            <blockquote>\r\n                Si vous ne l&apos;avez pas ajout&#xE9; &#xE0; votre Path, il faut via votre outil de ligne de commande que vous vous d&#xE9;placez dans le r&#xE9;pertoire o&#xF9; se trouve &apos;TF.exe&apos; et &#xE0; partir de l&#xE0; vous serez en mesure de taper la commande suivante :\r\n                <code>&gt; .\\TF.exe</code>.\r\n            </blockquote>\r\n        </p>\r\n        <p>\r\n            Vous &#xEA;tes en mesure d&apos;&#xE9;x&#xE9;cuter la commande :\r\n            <ul>\r\n                <li><code>&gt; .\\TF.exe workspaces</code></li>\r\n                <li>ou</li>\r\n                <li><code>&gt; tf workspaces</code></li>\r\n            </ul>\r\n        </p>\r\n        <p>\r\n            Maintenant passons aux choses s&#xE9;rieuses :\r\n            <ul>\r\n                <li><code>&gt; tf merge /baseless -r &quot;$/Project2/Main/Source&quot; &quot;$/Project1/Main/Source&quot;</code></li>\r\n                <li>ou directement sur les dossiers</li>\r\n                <li><code>&gt; tf merge /baseless -r &quot;D:/tfs-projects/Project2/Main/Source&quot; &quot;D:/tfs-projects/Project1/Main/Source&quot;</code></li>\r\n            </ul>\r\n            /baseless = pas de relations entre les branches &amp; -r = recursif.\r\n        </p>\r\n        <p>\r\n            * Je ne suis pas un &quot;fou&quot; des CLI mais, &#xE7;a ne me d&#xE9;range pas alors que certaines personnes sont plus sensibles &#xE0; avoir des boutons &#x263A;\r\n        </p>\r\n        <p style=\"text-align:center;\">\r\n            <img class=\"img-rounded\" src=\"/blog/files/img/cli-joke.jpg\" alt=\"https://cmatskas.com/content/images/2015/Aug/Command_Line_tools_meme.jpg\">\r\n        </p>\r\n        <p>\r\n            <a href=\"https://benoit808.wordpress.com/2009/03/30/tfs-source-control-merging-between-team-projects/\" alt=\"sources\">sources</a>\r\n        </p>\r\n    "},"en":{"title":"TFS CLI.","summary":"\r\n        <p>\r\n            Can I use TFS through a CLI ?\r\n        </p>\r\n    ","content":"\r\n        <h2>Team Foundation Server CLI</h2>\r\n        <p>\r\n            Can I use TFS through a CLI ?\r\n        </p>\r\n        <h3>But why ???*</h3>\r\n        <p>\r\n            In my case, I&apos;ve got two similar solutions where the only difference is the &quot;visual&quot;. The second is a copy from the first one.\r\n        </p>\r\n        <p>\r\n            However, one of these solutions has been upgraded many times, and now we need to update the other one.\r\n        </p>\r\n        <h3>Issue</h3>\r\n        <p>\r\n            We attempt to merge two separate solutions where no relation exists. The VS interface doesn&apos;t permit to do something like this (because too many risk of conflicts).\r\n        </p>\r\n        <p>\r\n            <blockquote>\r\n                Maybe next time the best solution was to create a branch.\r\n            </blockquote>\r\n        </p>\r\n        <h3>How to use <b>TF</b> CLI ?</h3>\r\n        <p>\r\n            Find the path to &apos;TF.exe&apos; (ex : D:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\Common7\\IDE). Add to your &apos;Path&apos; <a href=\"https://superuser.com/questions/949560/how-do-i-set-system-environment-variables-in-windows-10\" alt=\"Customize the Windows path\">(lien)</a>.\r\n        </p>\r\n        <p>\r\n            <blockquote>\r\n                If you didn&apos;t add it to your Path, you need to open the &apos;IDE&apos; folder with you CLI :\r\n                <code>&gt; .\\TF.exe</code>.\r\n            </blockquote>\r\n        </p>\r\n        <p>\r\n            Test :\r\n            <ul>\r\n                <li><code>&gt; .\\TF.exe workspaces</code></li>\r\n                <li>or</li>\r\n                <li><code>&gt; tf workspaces</code></li>\r\n            </ul>\r\n        </p>\r\n        <p>\r\n            Immediately get down to serious matter:\r\n            <ul>\r\n                <li><code>&gt; tf merge /baseless -r &quot;$/Project2/Main/Source&quot; &quot;$/Project1/Main/Source&quot;</code></li>\r\n                <li>Or with folders</li>\r\n                <li><code>&gt; tf merge /baseless -r &quot;D:/tfs-projects/Project2/Main/Source&quot; &quot;D:/tfs-projects/Project1/Main/Source&quot;</code></li>\r\n            </ul>\r\n            /baseless = ignore branches relationship &amp; -r = recursive.\r\n        </p>\r\n        <p>\r\n            * Some people doesn&apos;t like to use a CLI !\r\n        </p>\r\n        <p style=\"text-align:center;\">\r\n            <img class=\"img-rounded\" src=\"/blog/files/img/cli-joke.jpg\" alt=\"https://cmatskas.com/content/images/2015/Aug/Command_Line_tools_meme.jpg\">\r\n        </p>\r\n        <p>\r\n            <a href=\"https://benoit808.wordpress.com/2009/03/30/tfs-source-control-merging-between-team-projects/\" alt=\"sources\">sources</a>\r\n        </p>\r\n    "}},{"id":29,"publication_date":1497916800000,"img":"/blog/files/img/keep-calm-i-am-just-offline.png","img_alt":"https://sd.keepcalm-o-matic.co.uk/i/keep-calm-i-am-just-offline.png","fr":{"title":"Pr&#xE9;sentation de l&apos;addon GoOffline pour Team Foundation Server","summary":"\r\n        <p>\r\n            Lorsque vous utilisez des syst&#xE8;mes de gestion de fichier, vous avez diff&#xE9;rentes r&#xE8;gles param&#xE9;trables.\r\n        </p>\r\n        <p>\r\n            Dans certains cas, un outil comme GoOffline pour TFS peut &#xEA;tre tr&#xE8;s utile.\r\n        </p>\r\n    ","content":"\r\n        <p>\r\n            Lorsque vous utilisez des syst&#xE8;mes de gestion de fichier, vous avez diff&#xE9;rentes r&#xE8;gles param&#xE9;trables.\r\n        </p>\r\n        <p>\r\n            Dans certains cas, un outil comme GoOffline pour TFS peut &#xEA;tre tr&#xE8;s utile.\r\n        </p>\r\n        <h3>L&apos;addon GoOffline <a href=\"https://marketplace.visualstudio.com/items?itemName=BernieTschirren.GoOffline\" alt=\"MarketPlace GoOffline\">lien</a></h3>\r\n        <p>\r\n            C&apos;est le moment ! votre pull request est pr&#xEA;te mais, il se trouve que vous avez de nombreux conflits. Un merge est donc n&#xE9;cessaire et ce n&apos;est pas forc&#xE9;ment &#xE9;vident.\r\n        </p>\r\n        <p>\r\n            J&apos;ai travaill&#xE9; sur un projet o&#xF9; une politique TFS ne permettait pas l&apos;&#xE9;dition simultan&#xE9;e d&apos;un fichier par plusieurs utilisateurs.\r\n        </p>\r\n        <p>\r\n            M&#xEA;me si les users stories sont bien d&#xE9;finies ; il est quand m&#xEA;me tr&#xE8;s probable d&apos;avoir &#xE0; travailler sur des fichiers communs &#xE0; une autre &apos;user story&apos; en cours de r&#xE9;alisation par un &#xE9;quipier.\r\n        </p>\r\n        <p>\r\n            Ce n&apos;est pas une condition de d&#xE9;veloppement confort et sans risque, mais gr&#xE2;ce &#xE0; GoOffline, on peut couper la connexion &#xE0; TFS sans &#xEA;tre oblig&#xE9; de couper le r&#xE9;seau ou supprimer le serveur TFS de VS.\r\n        </p>\r\n        <p>\r\n            J&apos;ai trouv&#xE9; cet outil pratique lors de phase de debug, on &#xE9;tait deux &#xE0; rechercher l&apos;erreur dans le m&#xEA;me fichier.\r\n        </p>\r\n    "},"en":{"title":"GoOffline TFS Addon","summary":"\r\n        <p>\r\n            When you use versioning you can establish some rules !\r\n        </p>\r\n        <p>\r\n            In specific case, the GoOffline addon can be useful.\r\n        </p>\r\n    ","content":"\r\n        <p>\r\n            When you use versioning you can establish some rules !\r\n        </p>\r\n        <p>\r\n            In specific case, the GoOffline addon can be useful.\r\n        </p>\r\n        <h3>GoOffline Addon<a href=\"https://marketplace.visualstudio.com/items?itemName=BernieTschirren.GoOffline\" alt=\"MarketPlace GoOffline\">lien</a></h3>\r\n        <p>\r\n            It&apos;s time to do your pull request ! It&apos;s time to validate it, but you can have many conflicts and you need to do some merges.\r\n        </p>\r\n        <p>\r\n            I&apos;m working on project where a TFS rule does not authorize the simultaneous file editing. No Merge ! &#x263B;\r\n        </p>\r\n        <p>\r\n            Even if your user story is correctly defined, you can work with a colleague on the same file.\r\n        </p>\r\n        <p>\r\n            Thanks to GoOffline you are able to shut down the TFS connection easily.\r\n        </p>\r\n        <p>\r\n            This tool is useful in debugging phase, when you are two on the same file to find a solution.\r\n        </p>\r\n    "}},{"id":28,"publication_date":1491868800000,"img":"/blog/files/img/sql-timeout.jpg","img_alt":"https://img.devrant.io/devrant/rant/r_104562_5sLtx.jpg","fr":{"title":"C# : Modifier le timeout d&apos;un objet WebClient.","summary":"\r\n\t\t<p>\r\n            Voici une m&#xE9;thode pour changer le timeout par d&#xE9;faut d&apos;un <b>WebClient</b>. \r\n            Par d&#xE9;faut il d&#xE9;pend du <i>HttpWebRequest</i> Timeout de 100 secondes (rappel : le timeout d&apos;une session est de 20 minutes).\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n            Voici une m&#xE9;thode pour changer le timeout par d&#xE9;faut d&apos;un <b>WebClient</b>. \r\n            Par d&#xE9;faut il d&#xE9;pend du <i>HttpWebRequest</i> Timeout de 100 secondes (rappel : le timeout d&apos;une session est de 20 minutes).\r\n\t\t</p>\r\n\t\t<h2>Exemple</h2>\r\n\t\t<p>\r\n\t\t\tCr&#xE9;ation d&apos;une classe qui h&#xE9;rite de WebClient :\r\n\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\nnamespace System.Net\r\n{\r\n    using System;\r\n\r\n    /// &lt;summary&gt;\r\n    /// Custom WebClient.\r\n    /// &lt;/summary&gt;\r\n    public class CustomWebClient : WebClient\r\n    {\r\n        /// &lt;summary&gt;\r\n        /// Customized default WebClient timeout (100s) to 5s.\r\n        /// &lt;/summary&gt;\r\n        /// &lt;param name=&quot;address&quot;&gt;Url adresse.&lt;/param&gt;\r\n        /// &lt;returns&gt;The customized WebRequest&lt;/returns&gt;\r\n        protected override WebRequest GetWebRequest(Uri address)\r\n        {\r\n            WebRequest webR = base.GetWebRequest(address);\r\n            webR.Timeout = 5000; // milliseconds\r\n            return webR;\r\n        }\r\n    }\r\n}\r\n\t\t\t</prism-component>\r\n\t\t</p>\r\n        <h2>En action</h2>\r\n        <p>\r\n            Ensuite vous utilisez la nouvelle classe que vous avez cr&#xE9;&#xE9; :\r\n            <prism-component class=\"language-csharp line-numbers\">\r\nusing (var client = new CustomWebClient())\r\n{\r\n [....]                \r\n}           \r\n            </prism-component>\r\n            Si vous voulez tester rapidement chez vous, vous pouvez utiliser &quot;Thread.Sleep(15000);&quot; (en millisecondes) pour simuler un temps de r&#xE9;ponse trop lent.\r\n        </p>\r\n\t"},"en":{"title":"C# : Change the WebClient timeout.","summary":"\r\n\t\t<p>\r\n            With this sample you are able to change the default <b>WebClient</b> timeout. \r\n            The default value depends on the <i>HttpWebRequest</i> Timeout =&gt; 100 seconds (default session timeout is 20 minutes).\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n            With this sample you are able to change the default <b>WebClient</b> timeout. \r\n            The default value depends on the <i>HttpWebRequest</i> Timeout =&gt; 100 seconds (default session timeout is 20 minutes).\r\n\t\t</p>\r\n\t\t<h2>Sample method</h2>\r\n\t\t<p>\r\n\t\t\tCreate an inherited class from WebClient :\r\n\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\nnamespace System.Net\r\n{\r\n    using System;\r\n\r\n    /// &lt;summary&gt;\r\n    /// Custom WebClient.\r\n    /// &lt;/summary&gt;\r\n    public class CustomWebClient : WebClient\r\n    {\r\n        /// &lt;summary&gt;\r\n        /// Customized default WebClient timeout (100s) to 5s.\r\n        /// &lt;/summary&gt;\r\n        /// &lt;param name=&quot;address&quot;&gt;Url adresse.&lt;/param&gt;\r\n        /// &lt;returns&gt;The customized WebRequest&lt;/returns&gt;\r\n        protected override WebRequest GetWebRequest(Uri address)\r\n        {\r\n            WebRequest webR = base.GetWebRequest(address);\r\n            webR.Timeout = 5000; // milliseconds\r\n            return webR;\r\n        }\r\n    }\r\n}\r\n\t\t\t</prism-component>\r\n\t\t</p>\r\n        <h2>En action</h2>\r\n        <p>\r\n            Now you can use your new class :\r\n            <prism-component class=\"language-csharp line-numbers\">\r\nusing (var client = new CustomWebClient())\r\n{\r\n [....]                \r\n}           \r\n            </prism-component>\r\n            If you want test this you can simulate slow response with &quot;Thread.Sleep(15000);&quot; (milliseconds).\r\n        </p>\r\n\t"}},{"id":27,"publication_date":1488931200000,"img":"/blog/files/img/adfs-no-idea.jpg","img_alt":"http://www.quickmeme.com/meme/3617h0","fr":{"title":"C# : s&apos;authentifier &#xE0; un ADFS (Active Directory Federation Services) directement avec username / password","summary":"\r\n\t\t<p>\r\n\t\t\tL&apos;authentification d&apos;un site peut se r&#xE9;aliser par l&apos;interm&#xE9;diaire d&apos;un <b>ADFS</b>, seulement une demande d&apos;authentification par \r\n\t\t\td&#xE9;faut passe par l&apos;utilisation d&apos;une &quot;popup&quot; de connexion (&#xE0; l&apos;instar de l&apos;utilisation de son compte github/google pour se connecter &#xE0; gitlab).\r\n\t\t</p><p>\r\n\t\t\tOn souhaite que &#xE7;a soit le formulaire de notre application qui envoie les informations. Les versions plus r&#xE9;centes d&apos;ADFS propose le protocole \r\n\t\t\t<b>OAuth</b> mais certaines m&#xE9;thodes ne sont pas disponibles (<a href=\"https://blogs.technet.microsoft.com/maheshu/2015/04/28/oauth-2-0-support-in-adfs-on-windows-server-2012-r2/\" alt=\"grant_type=password non support&#xE9;\">grant_type=password</a>).\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tL&apos;authentification d&apos;un site peut se r&#xE9;aliser par l&apos;interm&#xE9;diaire d&apos;un <b>ADFS</b>, seulement une demande d&apos;authentification par \r\n\t\t\td&#xE9;faut passe par l&apos;utilisation d&apos;une &quot;popup&quot; de connexion (&#xE0; l&apos;instar de l&apos;utilisation de son compte github pour se connecter &#xE0; gitlab).\r\n\t\t</p><p>\r\n\t\t\tOn souhaite que &#xE7;a soit le formulaire de notre application qui envoie les informations. Les versions plus r&#xE9;centes d&apos;ADFS propose le protocole \r\n\t\t\t<b>OAuth</b> mais certaines m&#xE9;thodes ne sont pas disponibles (<a href=\"https://blogs.technet.microsoft.com/maheshu/2015/04/28/oauth-2-0-support-in-adfs-on-windows-server-2012-r2/\" alt=\"grant_type=password non support&#xE9;\">grant_type=password</a>).\r\n\t\t</p>\r\n\t\t<h2>Pr&#xE9;requis</h2>\r\n\t\t<p>\r\n\t\t\tComme ADFS et son impl&#xE9;mentation d&apos;OAuth ne nous permet pas l&apos;envoie du username et du password, il faut rendre accessible une m&#xE9;thode (endpoint) de l&apos;ADFS. \r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tLa m&#xE9;thode qui nous int&#xE9;resse pour utiliser les informations de connexion de l&apos;utilisateur est &quot;windowsmixed&quot; [variable dans le code = ADFSEndpoint](ex: &quot;https://myfederationserver.com/adfs/services/trust/13/windowsmixed&quot;).\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tApr&#xE8;s avoir rendu accessible cette m&#xE9;thode, il faut cr&#xE9;er un &quot;identifier&quot; pour que notre application soit reconnue par l&apos;ADFS [variable dans le code = ADFSIdentifier](ex: &quot;https://mysite.com/identifier&quot;).\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tEnsuite, c&#xF4;t&#xE9; ADFS on peut d&#xE9;terminer les claims que l&apos;on souhaite retourner (exemple : la m&#xE9;thode &quot;ConvertGenericTokenToClaimsIdentity&quot; r&#xE9;cup&#xE8;re l&apos;email, le nom, pr&#xE9;nom, pays, ...).\r\n\t\t</p>\r\n\t\t<h2>En action</h2>\r\n\t\t<p>\r\n\t\t\tExemple de classe qui consomme un ADFS &apos;WindowsMixed&apos; :\r\n\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\nnamespace MyApp.Helpers\r\n{\r\n    using Domain.AppModule.Services;\r\n    using System;\r\n    using System.IdentityModel.Protocols.WSTrust;\r\n    using System.IdentityModel.Tokens;\r\n    using System.Net;\r\n    using System.Security.Claims;\r\n    using System.ServiceModel;\r\n    using System.ServiceModel.Security;\r\n    using System.Threading.Tasks;\r\n\r\n    /// &lt;summary&gt;\r\n    /// ADFS Consumer WindowsMixed authentication.\r\n    /// &lt;/summary&gt;\r\n    public static class ADFSConsumerHelper\r\n    {\r\n        /// &lt;summary&gt;\r\n        /// Do a web request with credentials to a specific ADFS url.\r\n        /// &lt;/summary&gt;\r\n        /// &lt;param name=&quot;username&quot;&gt;&lt;/param&gt;\r\n        /// &lt;param name=&quot;password&quot;&gt;&lt;/param&gt;\r\n        /// &lt;returns&gt;&lt;/returns&gt;\r\n        public static async Task&lt;ClaimsIdentity&gt; GetClaims(\r\n            string username,\r\n            string password)\r\n        {\r\n            var claims = new ClaimsIdentity();\r\n\r\n            var domainUsername = username.Split(&apos;\\\\&apos;);\r\n            if(domainUsername.Length != 2)\r\n            {\r\n                return null;\r\n            }\r\n            \r\n            var domain = domainUsername[0];\r\n            username = domainUsername[1];\r\n\r\n            var appSettings = UnityFactory.Resolve&lt;ISettingAppService&gt;().GetConfigurationSetting();\r\n            var stsEndpointAddress = appSettings.ADFSEndpoint;\r\n            var appliesToEndpointAddress = appSettings.ADFSIdentifier;\r\n            \r\n            var credential = new NetworkCredential(username, password, domain);\r\n            var binding = new WS2007HttpBinding(SecurityMode.TransportWithMessageCredential);\r\n            binding.Security.Message.EstablishSecurityContext = false;\r\n            binding.Security.Message.ClientCredentialType = MessageCredentialType.Windows;\r\n            binding.Security.Transport.ClientCredentialType = HttpClientCredentialType.None;\r\n\r\n            var endpoint = new EndpointAddress(stsEndpointAddress);\r\n\r\n            var factory = new WSTrustChannelFactory(binding, endpoint);\r\n            factory.TrustVersion = TrustVersion.WSTrust13;\r\n            factory.Credentials.Windows.ClientCredential = credential;\r\n            factory.Credentials.UserName.UserName = credential.UserName;\r\n            factory.Credentials.UserName.Password = credential.Password;\r\n\r\n            var channel = factory.CreateChannel();\r\n\r\n            var rstToken = new RequestSecurityToken\r\n            {\r\n                RequestType = RequestTypes.Issue,\r\n                AppliesTo = new EndpointReference(appliesToEndpointAddress),\r\n                KeyType = KeyTypes.Bearer,\r\n                TokenType = &quot;urn:oasis:names:tc:SAML:2.0:assertion&quot;\r\n            };\r\n\r\n            var rstResponse = new RequestSecurityTokenResponse();\r\n\r\n            var callback = ServicePointManager.ServerCertificateValidationCallback;\r\n            try\r\n            {\r\n                ServicePointManager.ServerCertificateValidationCallback += delegate { return true; };\r\n                var token = channel.Issue(rstToken, out rstResponse) as GenericXmlSecurityToken;\r\n\r\n                claims = ADFSConsumerHelper.ConvertGenericTokenToClaimsIdentity(token);        \r\n            }\r\n            catch (Exception ex)\r\n            {\r\n                throw ex;\r\n            }\r\n            finally\r\n            {\r\n                ServicePointManager.ServerCertificateValidationCallback = callback;\r\n            }\r\n\r\n            return claims;\r\n        }\r\n\r\n        /// &lt;summary&gt;\r\n        /// Xml Token to Claims identity.\r\n        /// &lt;/summary&gt;\r\n        /// &lt;param name=&quot;token&quot;&gt;The xml token.&lt;/param&gt;\r\n        /// &lt;returns&gt;The claims identity.&lt;/returns&gt;\r\n        private static ClaimsIdentity ConvertGenericTokenToClaimsIdentity(GenericXmlSecurityToken token)\r\n        {\r\n            ClaimsIdentity claims = new ClaimsIdentity();\r\n\r\n            var tokenAttributeTags = token.TokenXml.GetElementsByTagName(&quot;Attribute&quot;);\r\n            for (var i = 0; i &lt; tokenAttributeTags.Count; i++)\r\n            {\r\n                if (tokenAttributeTags[i].Attributes[&quot;Name&quot;] == null)\r\n                {\r\n                    continue;\r\n                }\r\n\r\n                switch (tokenAttributeTags[i].Attributes[&quot;Name&quot;].InnerText)\r\n                {\r\n                    case @&quot;http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname&quot;:\r\n                        // last child : tokenAttributeTags[i].LastChild.Name == &quot;AttributeValue&quot;\r\n                        var firstName = tokenAttributeTags[i].LastChild.InnerText;\r\n                        claims.AddClaim(new Claim(ClaimTypes.GivenName, firstName));\r\n                        break;\r\n                    case @&quot;http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname&quot;:\r\n                        var lastName = tokenAttributeTags[i].LastChild.InnerText;\r\n                        claims.AddClaim(new Claim(ClaimTypes.Name, lastName));\r\n                        break;\r\n                    case @&quot;http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress&quot;:\r\n                        var email = tokenAttributeTags[i].LastChild.InnerText;\r\n                        claims.AddClaim(new Claim(ClaimTypes.Email, email));\r\n                        break;\r\n                    case @&quot;http://schemas.microsoft.com/LiveID/Federation/2008/05/ImmutableID&quot;:\r\n                        var activeDirectoryID = tokenAttributeTags[i].LastChild.InnerText;\r\n                        claims.AddClaim(new Claim(&quot;ActiveDirectoryID&quot;, activeDirectoryID));\r\n                        break;\r\n                    case @&quot;http//sts.adeccotest.com/activedirectory/claims/country&quot;:\r\n                        var country = tokenAttributeTags[i].LastChild.InnerText;\r\n                        claims.AddClaim(new Claim(ClaimTypes.Country, country));\r\n                        break;\r\n                    case @&quot;http//sts.adeccotest.com/activedirectory/claims/country_phonenumber&quot;:\r\n                        var phone = tokenAttributeTags[i].LastChild.InnerText;\r\n                        claims.AddClaim(new Claim(ClaimTypes.HomePhone, phone));\r\n                        break;\r\n                    default:\r\n                        continue;\r\n                }\r\n            }\r\n\r\n            return claims;\r\n        }\r\n    }\r\n}\r\n\t\t\t</prism-component>\r\n\t\t</p>\r\n\r\n\t"},"en":{"title":"C# : ADFS (Active Directory Federation Services) username / password authentication","summary":"\r\n\t\t<p>\r\n\t\t\tWe need to use an <b>ADFS</b> with an UserName/Password authentication. Even if the latest ADFS versions can be consume with the OAuth protocole,\r\n\t\t\tit has many limitations (<a href=\"https://blogs.technet.microsoft.com/maheshu/2015/04/28/oauth-2-0-support-in-adfs-on-windows-server-2012-r2/\" alt=\"grant_type=password unavaible\">grant_type=password</a>).\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tThe default ADFS authentication use a &quot;popup&quot; (like when you use your github/google account to logging in gitlab).\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tWe need to use an <b>ADFS</b> with an UserName/Password authentication. Even if the latest ADFS versions can be consume with the OAuth protocole,\r\n\t\t\tit has many limitations (<a href=\"https://blogs.technet.microsoft.com/maheshu/2015/04/28/oauth-2-0-support-in-adfs-on-windows-server-2012-r2/\" alt=\"grant_type=password unavaible\">grant_type=password</a>).\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tThe default ADFS authentication use a &quot;popup&quot; (like when you use your github/google account to logging in gitlab).\r\n\t\t</p>\r\n\t\t<h2>Prerequesits</h2>\r\n\t\t<p>\r\n\t\t\tAs ADFS and OAuth implementation are limited, we need to turn on an ADFS method (endpoint).\r\n\t\t\tThis method is &quot;windowsmixed&quot; [variable name in code = ADFSEndpoint](ex: &quot;https://myfederationserver.com/adfs/services/trust/13/windowsmixed&quot;).\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tThen, you need to create an &quot;identifier&quot; [variable name in code = ADFSIdentifier](ex: &quot;https://mysite.com/identifier&quot;).\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tAlso, you can can customize the claims returned after authentication (method in sample: ConvertGenericTokenToClaimsIdentity).\r\n\t\t</p>\r\n\t\t<h2>Action</h2>\r\n\t\t<p>\r\n\t\t\tSample ADFS &apos;WindowsMixed&apos; consumption :\r\n\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\nnamespace MyApp.Helpers\r\n{\r\n    using Domain.AppModule.Services;\r\n    using System;\r\n    using System.IdentityModel.Protocols.WSTrust;\r\n    using System.IdentityModel.Tokens;\r\n    using System.Net;\r\n    using System.Security.Claims;\r\n    using System.ServiceModel;\r\n    using System.ServiceModel.Security;\r\n    using System.Threading.Tasks;\r\n\r\n    /// &lt;summary&gt;\r\n    /// ADFS Consumer WindowsMixed authentication.\r\n    /// &lt;/summary&gt;\r\n    public static class ADFSConsumerHelper\r\n    {\r\n        /// &lt;summary&gt;\r\n        /// Do a web request with credentials to a specific ADFS url.\r\n        /// &lt;/summary&gt;\r\n        /// &lt;param name=&quot;username&quot;&gt;&lt;/param&gt;\r\n        /// &lt;param name=&quot;password&quot;&gt;&lt;/param&gt;\r\n        /// &lt;returns&gt;&lt;/returns&gt;\r\n        public static async Task&lt;ClaimsIdentity&gt; GetClaims(\r\n            string username,\r\n            string password)\r\n        {\r\n            var claims = new ClaimsIdentity();\r\n\r\n            var domainUsername = username.Split(&apos;\\\\&apos;);\r\n            if(domainUsername.Length != 2)\r\n            {\r\n                return null;\r\n            }\r\n            \r\n            var domain = domainUsername[0];\r\n            username = domainUsername[1];\r\n\r\n            var appSettings = UnityFactory.Resolve&lt;ISettingAppService&gt;().GetConfigurationSetting();\r\n            var stsEndpointAddress = appSettings.ADFSEndpoint;\r\n            var appliesToEndpointAddress = appSettings.ADFSIdentifier;\r\n            \r\n            var credential = new NetworkCredential(username, password, domain);\r\n            var binding = new WS2007HttpBinding(SecurityMode.TransportWithMessageCredential);\r\n            binding.Security.Message.EstablishSecurityContext = false;\r\n            binding.Security.Message.ClientCredentialType = MessageCredentialType.Windows;\r\n            binding.Security.Transport.ClientCredentialType = HttpClientCredentialType.None;\r\n\r\n            var endpoint = new EndpointAddress(stsEndpointAddress);\r\n\r\n            var factory = new WSTrustChannelFactory(binding, endpoint);\r\n            factory.TrustVersion = TrustVersion.WSTrust13;\r\n            factory.Credentials.Windows.ClientCredential = credential;\r\n            factory.Credentials.UserName.UserName = credential.UserName;\r\n            factory.Credentials.UserName.Password = credential.Password;\r\n\r\n            var channel = factory.CreateChannel();\r\n\r\n            var rstToken = new RequestSecurityToken\r\n            {\r\n                RequestType = RequestTypes.Issue,\r\n                AppliesTo = new EndpointReference(appliesToEndpointAddress),\r\n                KeyType = KeyTypes.Bearer,\r\n                TokenType = &quot;urn:oasis:names:tc:SAML:2.0:assertion&quot;\r\n            };\r\n\r\n            var rstResponse = new RequestSecurityTokenResponse();\r\n\r\n            var callback = ServicePointManager.ServerCertificateValidationCallback;\r\n            try\r\n            {\r\n                ServicePointManager.ServerCertificateValidationCallback += delegate { return true; };\r\n                var token = channel.Issue(rstToken, out rstResponse) as GenericXmlSecurityToken;\r\n\r\n                claims = ADFSConsumerHelper.ConvertGenericTokenToClaimsIdentity(token);        \r\n            }\r\n            catch (Exception ex)\r\n            {\r\n                throw ex;\r\n            }\r\n            finally\r\n            {\r\n                ServicePointManager.ServerCertificateValidationCallback = callback;\r\n            }\r\n\r\n            return claims;\r\n        }\r\n\r\n        /// &lt;summary&gt;\r\n        /// Xml Token to Claims identity.\r\n        /// &lt;/summary&gt;\r\n        /// &lt;param name=&quot;token&quot;&gt;The xml token.&lt;/param&gt;\r\n        /// &lt;returns&gt;The claims identity.&lt;/returns&gt;\r\n        private static ClaimsIdentity ConvertGenericTokenToClaimsIdentity(GenericXmlSecurityToken token)\r\n        {\r\n            ClaimsIdentity claims = new ClaimsIdentity();\r\n\r\n            var tokenAttributeTags = token.TokenXml.GetElementsByTagName(&quot;Attribute&quot;);\r\n            for (var i = 0; i &lt; tokenAttributeTags.Count; i++)\r\n            {\r\n                if (tokenAttributeTags[i].Attributes[&quot;Name&quot;] == null)\r\n                {\r\n                    continue;\r\n                }\r\n\r\n                switch (tokenAttributeTags[i].Attributes[&quot;Name&quot;].InnerText)\r\n                {\r\n                    case @&quot;http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname&quot;:\r\n                        // last child : tokenAttributeTags[i].LastChild.Name == &quot;AttributeValue&quot;\r\n                        var firstName = tokenAttributeTags[i].LastChild.InnerText;\r\n                        claims.AddClaim(new Claim(ClaimTypes.GivenName, firstName));\r\n                        break;\r\n                    case @&quot;http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname&quot;:\r\n                        var lastName = tokenAttributeTags[i].LastChild.InnerText;\r\n                        claims.AddClaim(new Claim(ClaimTypes.Name, lastName));\r\n                        break;\r\n                    case @&quot;http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress&quot;:\r\n                        var email = tokenAttributeTags[i].LastChild.InnerText;\r\n                        claims.AddClaim(new Claim(ClaimTypes.Email, email));\r\n                        break;\r\n                    case @&quot;http://schemas.microsoft.com/LiveID/Federation/2008/05/ImmutableID&quot;:\r\n                        var activeDirectoryID = tokenAttributeTags[i].LastChild.InnerText;\r\n                        claims.AddClaim(new Claim(&quot;ActiveDirectoryID&quot;, activeDirectoryID));\r\n                        break;\r\n                    case @&quot;http//sts.adeccotest.com/activedirectory/claims/country&quot;:\r\n                        var country = tokenAttributeTags[i].LastChild.InnerText;\r\n                        claims.AddClaim(new Claim(ClaimTypes.Country, country));\r\n                        break;\r\n                    case @&quot;http//sts.adeccotest.com/activedirectory/claims/country_phonenumber&quot;:\r\n                        var phone = tokenAttributeTags[i].LastChild.InnerText;\r\n                        claims.AddClaim(new Claim(ClaimTypes.HomePhone, phone));\r\n                        break;\r\n                    default:\r\n                        continue;\r\n                }\r\n            }\r\n\r\n            return claims;\r\n        }\r\n    }\r\n}\r\n\t\t\t</prism-component>\r\n\t\t</p>\r\n\r\n\t"}},{"id":26,"publication_date":1487030400000,"img":"/blog/files/img/json-statham.jpg","img_alt":"https://cdn.meme.am/cache/instances/folder350/500x/56076350.jpg","fr":{"title":"Newtonsoft : matcher des objets json &#xE0; une classe csharp &amp; personnaliser JsonConverter.","summary":"\r\n\t\t<p>\r\n\t\t\tS&apos;il y a une librairie qui n&apos;a plus besoin d&apos;&#xEA;tre pr&#xE9;sent&#xE9;e et je pense &quot;Newtonsoft.Json&quot; / &quot;Json.net&quot;. J&apos;ai une application qui doit matcher\r\n\t\t\tdes objets Json ; Newtonsoft le fait tr&#xE8;s bien.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tIl faut donc utiliser des annotations sur nos classes et propri&#xE9;t&#xE9;s pour cr&#xE9;er la correspondance avec le json que l&apos;on souhaite parser \r\n\t\t\tet envoyer.\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tS&apos;il y a une librairie qui n&apos;a plus besoin d&apos;&#xEA;tre pr&#xE9;sent&#xE9;e et je pense &quot;Newtonsoft.Json&quot; / &quot;Json.net&quot;. J&apos;ai une application qui doit matcher\r\n\t\t\tdes objets Json ; Newtonsoft le fait tr&#xE8;s bien.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tIl faut donc utiliser des annotations sur nos classes et propri&#xE9;t&#xE9;s pour cr&#xE9;er la correspondance avec le json que l&apos;on souhaite parser \r\n\t\t\tet envoyer.\r\n\t\t</p>\r\n\t\t<h2>Classe exemple</h2>\r\n\t\t<p>\r\n\t\t\tExemple d&apos;une classe c# que l&apos;on souhaite faire matcher &#xE0; une classe json existante ou que l&apos;on souhaite renommer certaines propri&#xE9;t&#xE9;s au \r\n\t\t\tmoment de sa s&#xE9;rialisation :\r\n\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\nnamespace MyProject.Web\r\n{\r\n\tusing System;\r\n    using Newtonsoft.Json;\r\n    using Newtonsoft.Json.Converters;\r\n\t\t\t\t\r\n\t[JsonObject(MemberSerialization.OptIn)]\r\n    public class Post\r\n    {\r\n        [JsonProperty(PropertyName = &quot;category&quot;)]\r\n        [JsonConverter(typeof(StringEnumConverter))]\r\n        public PostCategory Category { get; set; }\r\n\r\n        [JsonProperty(PropertyName = &quot;title&quot;)]\r\n        public string Title { get; set; }\r\n\r\n        [JsonProperty(PropertyName = &quot;date&quot;)]\r\n        [JsonConverter(typeof(JsonShortDateTimeConverter))]\r\n        public DateTime Date { get; set; }\r\n\t}\r\n}\r\n\t\t\t</prism-component>\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tNous aurons donc un objet json de cette forme :\r\n\t\t\t<prism-component class=\"language-js line-numbers\">\r\n{\r\n\t&quot;category&quot;: &quot;Media&quot;,\r\n\t&quot;title&quot;: &quot;My First Post&quot;,\r\n\t&quot;date&quot;: &quot;201702&quot;\r\n}\r\n\t\t\t</prism-component>\r\n\t\t</p>\r\n\t\t<h2>En action</h2>\r\n\t\t<p>\r\n\t\t\tExemples pour une api avec s&#xE9;rialisation et conversion :\r\n\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\nnamespace MyProject.Web\r\n{\r\n\tpublic class PostController : ApiController\r\n    {\r\n        [Route(&quot;api/Post/{id}&quot;)]\r\n        public HttpResponseMessage Get(int id)\r\n        {\r\n\t\t\tvar response = new Post {\r\n\t\t\t\tCategory = PostCategory.Media,\r\n\t\t\t\tTitle = &quot;My First Post&quot;,\r\n\t\t\t\tDate = DateTime.Now\r\n\t\t\t};\r\n\r\n\t\t\treturn this.Request.CreateResponse(HttpStatusCode.OK, response);\r\n\t\t}\r\n\r\n\t\t[Route(&quot;api/Post&quot;)]\r\n        public HttpResponseMessage Put([FromBody] Post request)\r\n        {\r\n\t\t\tvar response = new Post {\r\n\t\t\t\tCategory = PostCategory.Media,\r\n\t\t\t\tTitle = &quot;My First Post&quot;,\r\n\t\t\t\tDate = DateTime.Now\r\n\t\t\t};\r\n\r\n\t\t\tresponse.Category = request.Category;\r\n\t\t\tresponse.Title = request.Title;\r\n\t\t\tresponse.Date = request.Date;\r\n\r\n\t\t\treturn this.Request.CreateResponse(HttpStatusCode.OK, response);\r\n\t\t}\r\n\r\n\t\t[Route(&quot;api/Post/update&quot;)]\r\n        public HttpResponseMessage Put2([FromBody] JObject request)\r\n        {\r\n\t\t\tvar requestConverted = request.ToObject&lt;Post&gt;();\r\n\r\n\t\t\tvar response = new Post {\r\n\t\t\t\tCategory = PostCategory.Media,\r\n\t\t\t\tTitle = &quot;My First Post&quot;,\r\n\t\t\t\tDate = DateTime.Now\r\n\t\t\t};\r\n\r\n\t\t\tresponse.Category = requestConverted.Category;\r\n\t\t\tresponse.Title = requestConverted.Title;\r\n\t\t\tresponse.Date = requestConverted.Date;\r\n\r\n\t\t\treturn this.Request.CreateResponse(HttpStatusCode.OK, response);\r\n\t\t}\r\n\t}\r\n}\r\n\t\t\t</prism-component>\r\n\t\t</p>\r\n\t\t<h2>JsonConverter personnalis&#xE9;</h2>\r\n\t\t<p>\r\n\t\t\tVous pouvez personnaliser la mani&#xE8;re dont vous souhaitez s&#xE9;rialiser vos donn&#xE9;es, dans mon cas je souhaitais avoir\r\n\t\t\tdes dates &quot;DateTime&quot; en csharp et un format string particulier en json (voir dans mon premier extrait de code).\r\n\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\n\t/// [JsonConverter(typeof(JsonShortDateTimeConverter))]\r\n\t/// &lt;summary&gt;\r\n    /// Format a DateTime to YYYYMM format.\r\n    /// &lt;/summary&gt;\r\n    public class JsonShortDateTimeConverter : IsoDateTimeConverter\r\n    {\r\n        public JsonShortDateTimeConverter()\r\n        {\r\n            this.DateTimeFormat = &quot;yyyyMM&quot;;\r\n        }\r\n    }\r\n\t\t\t</prism-component>\r\n\t\t</p>\r\n\t"},"en":{"title":"Newtonsoft : Matching a c# object with a json object &amp; JsonConverter customizing.","summary":"\r\n\t\t<p>\r\n\t\t\t&quot;Newtonsoft.Json&quot; is a famous c# library for Json transformation.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tYou can use it for mathing a json with a c# object &amp; vice versa.\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\t&quot;Newtonsoft.Json&quot; is a famous c# library for Json transformation.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tYou can use it for mathing a json with a c# object &amp; vice versa.\r\n\t\t</p>\r\n\t\t<h2>Sample C# object</h2>\r\n\t\t<p>\r\n\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\nnamespace MyProject.Web\r\n{\r\n\tusing System;\r\n    using Newtonsoft.Json;\r\n    using Newtonsoft.Json.Converters;\r\n\t\t\t\t\r\n\t[JsonObject(MemberSerialization.OptIn)]\r\n    public class Post\r\n    {\r\n        [JsonProperty(PropertyName = &quot;category&quot;)]\r\n        [JsonConverter(typeof(StringEnumConverter))]\r\n        public PostCategory Category { get; set; }\r\n\r\n        [JsonProperty(PropertyName = &quot;title&quot;)]\r\n        public string Title { get; set; }\r\n\r\n        [JsonProperty(PropertyName = &quot;date&quot;)]\r\n        [JsonConverter(typeof(JsonShortDateTimeConverter))]\r\n        public DateTime Date { get; set; }\r\n\t}\r\n}\r\n\t\t\t</prism-component>\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tResult to a json like:\r\n\t\t\t<prism-component class=\"language-js line-numbers\">\r\n{\r\n\t&quot;category&quot;: &quot;Media&quot;,\r\n\t&quot;title&quot;: &quot;My First Post&quot;,\r\n\t&quot;date&quot;: &quot;201702&quot;\r\n}\r\n\t\t\t</prism-component>\r\n\t\t</p>\r\n\t\t<h2>In action</h2>\r\n\t\t<p>\r\n\t\t\tSerialization / Conversion :\r\n\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\nnamespace MyProject.Web\r\n{\r\n\tpublic class PostController : ApiController\r\n    {\r\n        [Route(&quot;api/Post/{id}&quot;)]\r\n        public HttpResponseMessage Get(int id)\r\n        {\r\n\t\t\tvar response = new Post {\r\n\t\t\t\tCategory = PostCategory.Media,\r\n\t\t\t\tTitle = &quot;My First Post&quot;,\r\n\t\t\t\tDate = DateTime.Now\r\n\t\t\t};\r\n\r\n\t\t\treturn this.Request.CreateResponse(HttpStatusCode.OK, response);\r\n\t\t}\r\n\r\n\t\t[Route(&quot;api/Post&quot;)]\r\n        public HttpResponseMessage Put([FromBody] Post request)\r\n        {\r\n\t\t\tvar response = new Post {\r\n\t\t\t\tCategory = PostCategory.Media,\r\n\t\t\t\tTitle = &quot;My First Post&quot;,\r\n\t\t\t\tDate = DateTime.Now\r\n\t\t\t};\r\n\r\n\t\t\tresponse.Category = request.Category;\r\n\t\t\tresponse.Title = request.Title;\r\n\t\t\tresponse.Date = request.Date;\r\n\r\n\t\t\treturn this.Request.CreateResponse(HttpStatusCode.OK, response);\r\n\t\t}\r\n\r\n\t\t[Route(&quot;api/Post/update&quot;)]\r\n        public HttpResponseMessage Put2([FromBody] JObject request)\r\n        {\r\n\t\t\tvar requestConverted = request.ToObject&lt;Post&gt;();\r\n\r\n\t\t\tvar response = new Post {\r\n\t\t\t\tCategory = PostCategory.Media,\r\n\t\t\t\tTitle = &quot;My First Post&quot;,\r\n\t\t\t\tDate = DateTime.Now\r\n\t\t\t};\r\n\r\n\t\t\tresponse.Category = requestConverted.Category;\r\n\t\t\tresponse.Title = requestConverted.Title;\r\n\t\t\tresponse.Date = requestConverted.Date;\r\n\r\n\t\t\treturn this.Request.CreateResponse(HttpStatusCode.OK, response);\r\n\t\t}\r\n\t}\r\n}\r\n\t\t\t</prism-component>\r\n\t\t</p>\r\n\t\t<h2>Customizing a JsonConverter</h2>\r\n\t\t<p>\r\n\t\t\tHow to customize a JsonConverter ?\r\n\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\n\t/// [JsonConverter(typeof(JsonShortDateTimeConverter))]\r\n\t/// &lt;summary&gt;\r\n    /// Format a DateTime to YYYYMM format.\r\n    /// &lt;/summary&gt;\r\n    public class JsonShortDateTimeConverter : IsoDateTimeConverter\r\n    {\r\n        public JsonShortDateTimeConverter()\r\n        {\r\n            this.DateTimeFormat = &quot;yyyyMM&quot;;\r\n        }\r\n    }\r\n\t\t\t</prism-component>\r\n\t\t</p>\r\n\t"}},{"id":25,"publication_date":1486080000000,"img":"/blog/files/img/token-to-me.jpg","img_alt":"https://cdn.meme.am/instances/500x/72188043.jpg","fr":{"title":"Owin : Personnaliser le provider d&apos;authentification.","summary":"\r\n\t\t<p>\r\n\t\t\tLe provider d&apos;authentification d&apos;Owin est une solution a envisager pour g&#xE9;rer au mieux les utilisateurs de son application WEB.\r\n\t\t\tVous pourrez g&#xE9;rer facilement la s&#xE9;curit&#xE9; de votre application WEB via cookie et token.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tEn NodeJS nous avons <a href=\"http://passportjs.org/\" target=\"_blank\">Passport</a> qui permet de g&#xE9;rer de multiple provider d&apos;authentification externe comme Facebook, Google, ... \r\n\t\t\ten .Net nous avons Owin.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tNous allons donc utiliser certaines des fonctionnalit&#xE9;s d&apos;Owin pour g&#xE9;rer enti&#xE9;rement l&apos;authentification de nos utilisateurs.\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tLe provider d&apos;authentification d&apos;Owin est une solution a envisager pour g&#xE9;rer au mieux les utilisateurs de son application WEB.\r\n\t\t\tVous pourrez g&#xE9;rer facilement la s&#xE9;curit&#xE9; de votre application WEB via cookie et token.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tEn NodeJS nous avons <a href=\"http://passportjs.org/\" target=\"_blank\">Passport</a> qui permet de g&#xE9;rer de multiple provider d&apos;authentification externe comme Facebook, Google, ... \r\n\t\t\ten .Net nous avons Owin.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tNous allons donc utiliser certaines des fonctionnalit&#xE9;s d&apos;Owin pour g&#xE9;rer enti&#xE9;rement l&apos;authentification de nos utilisateurs.\r\n\t\t</p>\r\n\t\t<h2>Pr&#xE9;requis</h2>\r\n\t\t<p>\r\n\t\t\tRevoir <a href=\"https://oauth.net/2/\" target=\"_blank\">OAuth </a> &amp; pr&#xE9;parer sa solution avec Owin !\r\n\t\t</p>\r\n\t\t<h2>Au d&#xE9;part</h2>\r\n\t\t<p>\r\n\t\t\tA la racine du projet nous avons notre &quot;Startup.cs&quot; :\r\n\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\nusing Microsoft.Owin;\r\n[assembly: OwinStartup(typeof(MyProject.Web.Startup))]\r\nnamespace MyProject.Web\r\n{\r\n\tusing Owin;\r\n\tusing System.Web.Mvc;\r\n\tusing System.Web.Http;\r\n\tusing System.Web.Routing;\r\n\tusing System.Web.Optimization;\r\n\t\t\t\t\r\n\tpublic partial class Startup\r\n\t{\r\n\t\tpublic void Configuration(IAppBuilder app)\r\n\t\t{\r\n\t\t\tConfigureAuth(app);\r\n\r\n\t\t\tAreaRegistration.RegisterAllAreas();\r\n\t\t\tGlobalConfiguration.Configure(WebApiConfig.Register);\r\n\t\t\tFilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);\r\n\t\t\tRouteConfig.RegisterRoutes(RouteTable.Routes);\r\n\t\t\tBundleConfig.RegisterBundles(BundleTable.Bundles);\r\n\t\t}\r\n\t}\r\n}\r\n\t\t\t</prism-component>\r\n\t\t</p>\r\n\t\t<h2>Configuration de l&apos;authentification</h2>\r\n\t\t<p>\r\n\t\t\tLa m&#xE9;thode &apos;ConfigureAuth&apos; se trouve dans le dossier &apos;App_Start&apos; dans le fichier que j&apos;ai nomm&#xE9; &apos;Startup.Auth.cs&apos; (qui est une class partial de Startup <=> m&#xEA;me namespace) :\r\n\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\nnamespace MyProject.Web\r\n{\r\n\tusing Microsoft.AspNet.Identity;\r\n\tusing Microsoft.Owin;\r\n\tusing Microsoft.Owin.Security.Cookies;\r\n\tusing Microsoft.Owin.Security.OAuth;\r\n\tusing Owin;\r\n\tusing Providers;\r\n\tusing System;\r\n\r\n\tpublic partial class Startup\r\n\t{\r\n\t\tpublic void ConfigureAuth(IAppBuilder app)\r\n\t\t{\r\n\t\t\t// Cookie Owin for form authentication.\r\n\t\t\tCookieAuthenticationOptions cookieAuthOptions = new CookieAuthenticationOptions\r\n\t\t\t{\r\n\t\t\t\tAuthenticationType = DefaultAuthenticationTypes.ApplicationCookie,\r\n\t\t\t\tLoginPath = new PathString(&quot;/Home/Index&quot;),\r\n\t\t\t\tLogoutPath = new PathString(&quot;/Home/Logout&quot;),\r\n\t\t\t\tExpireTimeSpan = TimeSpan.FromMinutes(30),\r\n\t\t\t\tSlidingExpiration = true\r\n\t\t\t};\r\n\r\n\t\t\tapp.UseCookieAuthentication(cookieAuthOptions);\r\n\r\n\t\t\t// Token OAuth.\r\n\t\t\tOAuthAuthorizationServerOptions oAuthServerOptions = new OAuthAuthorizationServerOptions\r\n\t\t\t{\r\n\t\t\t\tTokenEndpointPath = new PathString(&quot;/token&quot;),\r\n\t\t\t\tProvider = new OAuthCustomAuthenticationProvider(),\r\n\t\t\t\tAccessTokenExpireTimeSpan = TimeSpan.FromDays(30),\r\n\t\t\t\tAllowInsecureHttp = true,\r\n\t\t\t};\r\n\r\n\t\t\t// Token Generation\r\n\t\t\tapp.UseOAuthAuthorizationServer(oAuthServerOptions);\r\n\t\t\tapp.UseOAuthBearerAuthentication(new OAuthBearerAuthenticationOptions());\r\n\t\t}\r\n\t}\r\n}\t\t\r\n\t\t\t</prism-component>\r\n\t\t\tNous avons donc configur&#xE9; un syst&#xE8;me d&apos;authentification par cookie pour une authentification basique par formulaire et surtout mis en \r\n\t\t\tplace les Bearer token qui sont des &apos;must have&apos; lorsque l&apos;on souhaite s&#xE9;curiser une WEB API. Il reste bien &#xE9;videmment &#xE0; cr&#xE9;er notre &apos;OAuthCustomAuthenticationProvider&apos;.\r\n\t\t</=></p>\r\n\t\t<h2>Token API : &quot;grant_type=password&quot;</h2>\r\n\t\t<p>\r\n\t\t\tNous cr&#xE9;ons la classe &apos;OAuthCustomAuthenticationProvider&apos; dans un dossier &apos;Providers&apos;. Il faut ensuite surcharger les m&#xE9;thodes de &apos;OAuthAuthorizationServerProvider&apos;.\r\n\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\nnamespace MyProject.Web.Providers\r\n{\r\n\t[...]\r\n\tusing Microsoft.AspNet.Identity;\r\n    using Microsoft.Owin.Security;\r\n    using Microsoft.Owin.Security.Cookies;\r\n    using Microsoft.Owin.Security.OAuth;\r\n    using System;\r\n    using System.Collections.Generic;\r\n    using System.Net;\r\n    using System.Security.Claims;\r\n    using System.Security.Principal;\r\n    using System.ServiceModel.Security;\r\n    using System.Threading.Tasks;\r\n\r\n\tpublic class OAuthCustomAuthenticationProvider : OAuthAuthorizationServerProvider\r\n    {\r\n\t\t// no ClientId needed, use grant_type=password.\r\n\t\tpublic override async Task ValidateClientAuthentication(OAuthValidateClientAuthenticationContext context)\r\n        {\r\n            if (context.ClientId == null)\r\n            {\r\n                context.Validated();\r\n            }\r\n        }\r\n\r\n\t\t// une fois ValidateClientAuthentication pass&#xE9;e nous passons dans cette m&#xE9;thode et c&apos;est ici que l&apos;on g&#xE8;re notre authentification.\r\n\t\tpublic override async Task GrantResourceOwnerCredentials(OAuthGrantResourceOwnerCredentialsContext context)\r\n        {\r\n            // Decrypt password\r\n            var usernameDecrypted = context.UserName;\r\n            var passwordDecrypted = context.Password;\r\n\r\n            // find user.\r\n\t\t\tUser user = new User();\r\n\t\t\ttry\r\n            {\r\n\t\t\t\tuser = userManager.Find(usernameDecrypted, passwordDecrypted); // this method is for the sample.\r\n\t\t\t}\r\n            catch (SecurityNegotiationException ex)\r\n            {\r\n                context.SetError(&quot;invalid_grand&quot;, &quot;The username or password is incorrect&quot;);\r\n                context.Response.Headers.Add(&quot;X-Challenge&quot;, new[] { ((int)HttpStatusCode.Unauthorized).ToString() });\r\n                return;\r\n            }\r\n            catch(Exception ex)\r\n            {\r\n                context.SetError(&quot;invalid_grand&quot;, &quot;Problem with authentication provider&quot;);\r\n                context.Response.Headers.Add(&quot;X-Challenge&quot;, new[] { ((int)HttpStatusCode.ServiceUnavailable).ToString() });\r\n                return;\r\n            }\r\n\r\n\t\t\t// create a claims.\r\n            var oAuthIdentity = new ClaimsIdentity(context.Options.AuthenticationType);\r\n            oAuthIdentity.AddClaim(new Claim(ClaimTypes.Sid, user.ID.ToString()));\r\n            oAuthIdentity.AddClaim(new Claim(ClaimTypes.Role, &quot;user&quot;));\r\n            oAuthIdentity.AddClaim(new Claim(ClaimTypes.NameIdentifier, user.UserName));\r\n\r\n            var cookiesIdentity = new ClaimsIdentity(oAuthIdentity.Claims, CookieAuthenticationDefaults.AuthenticationType);\r\n\r\n\t\t\t// custom properties.\r\n            var properties = new AuthenticationProperties(new Dictionary&lt;string, string&gt; {\r\n                    { &quot;username&quot;, user.UserName }\r\n            });\r\n\r\n\t\t\t// create the token.\r\n            var ticket = new AuthenticationTicket(oAuthIdentity, properties);\r\n\r\n            context.Validated(ticket);\r\n            context.Request.Context.Authentication.SignIn(cookiesIdentity);\r\n        }\r\n\r\n\t\t// Permet de reprendre les custom &apos;properties&apos; dans le json contenant le token de r&#xE9;ponse.\r\n        public override Task TokenEndpoint(OAuthTokenEndpointContext context)\r\n        {\r\n            foreach (KeyValuePair&lt;string, string&gt; property in context.Properties.Dictionary)\r\n            {\r\n                context.AdditionalResponseParameters.Add(property.Key, property.Value);\r\n            }\r\n\r\n            return Task.FromResult&lt;object&gt;(null);\r\n        }\r\n\t}\r\n}\r\n\t\t\t</prism-component>\r\n\t\t\tEnsuite vous pouvez r&#xE9;cup&#xE9;rer l&apos;id de notre utilisateur dans une &quot;action&quot; d&apos;un &quot;controller&quot; via :\r\n\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\nvar userID = int.Parse(((ClaimsIdentity)this.RequestContext.Principal.Identity).FindFirst(ClaimTypes.Sid).Value);\r\n\t\t\t</prism-component>\r\n\t\t\tCeci gr&#xE2;ce &#xE0; la gestion des Thread et des Claims.\r\n\t\t</p>\r\n\t\t<h2>Token API : tests</h2>\r\n\t\t<p>\r\n\t\t\tPour tester l&apos;authentification via token, il faut donc interroger l&apos;url configur&#xE9; dans le &apos;TokenEndpointPath&apos; (dans notre exemple : /token).\r\n\t\t\tOn peut utiliser une application comme PostMan pour r&#xE9;aliser notre appel qui doit ressembler &#xE0; :\r\n\t\t\t<ul>\r\n\t\t\t\t<li>POST http://localhost:29817/token</li>\r\n\t\t\t\t<li>Headers : content_type=application/x-www-form-urlencoded</li>\r\n\t\t\t\t<li>Body : grant_type=password&amp;username=toto&amp;password=titi</li>\r\n\t\t\t</ul>\r\n\t\t\tVous recevez ensuite votre Access Token pour r&#xE9;aliser les prochains appels, pour cela je vous renvoie vers la documentation de <a href=\"https://oauth.net/2/\" target=\"_blank\">OAuth </a>,\r\n\t\t\tmais il devrait ressembler &#xE0; :\r\n\t\t\t<ul>\r\n\t\t\t\t<li>GET http://localhost:29817/Api/Group/test</li>\r\n\t\t\t\t<li>Headers : Authorization=Bearer MY_ACCESS_TOKEN</li>\r\n\t\t\t</ul>\r\n\t\t</p>\r\n\t\t<h2>Authentification via formulaire</h2>\r\n\t\t<p>\r\n\t\t\tExemple d&apos;une action pour authentifier un utilisateur et une pour la d&#xE9;connexion :\r\n\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\n[HttpPost]\r\npublic async Task&lt;ActionResult&gt; Index(LoginModel model)\r\n{\r\n\tif (ModelState.IsValid)\r\n\t{\r\n\t\tvar user = userManager.Find(model.UserName, model.Password);\r\n\r\n\t\tif (user != null)\r\n\t\t{\r\n\t\t\tvar cookiesIdentity = new ClaimsIdentity(DefaultAuthenticationTypes.ApplicationCookie);\r\n            cookiesIdentity.AddClaim(new Claim(ClaimTypes.Sid, user.ID.ToString()));\r\n            cookiesIdentity.AddClaim(new Claim(ClaimTypes.Role, &quot;admin&quot;));\r\n            cookiesIdentity.AddClaim(new Claim(ClaimTypes.NameIdentifier, model.UserName));\r\n\r\n            HttpContext.GetOwinContext().Authentication.SignIn(cookiesIdentity);\r\n\r\n\t\t\treturn RedirectToAction(&quot;List&quot;, &quot;Users&quot;);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tModelState.AddModelError(&quot;&quot;, &quot;The user name or password provided is incorrect.&quot;);\r\n\t\t}\r\n\t}\r\n\r\n\t// If we got this far, something failed, redisplay form\r\n\treturn View(model);\r\n}\r\n\r\n[HttpGet]\r\npublic ActionResult Logout()\r\n{\r\n\tHttpContext.GetOwinContext().Authentication.SignOut(DefaultAuthenticationTypes.ApplicationCookie);\r\n\r\n\treturn RedirectToAction(&quot;Index&quot;);\r\n}\r\n\t\t\t</prism-component>\r\n\t\t\tTout est g&#xE9;rer dans le context Owin ce qui facilite &#xE9;norm&#xE9;ment le travail.\r\n\t\t</p>\r\n\t\t<h2>Apr&#xE8;s ?</h2>\r\n\t\t<p>\r\n\t\t\tDans le temps il faut penser &#xE0; l&apos;utilisation des refreshToken ! Il faudra alors overrider les m&#xE9;thodes du &apos;AuthenticationTokenProvider&apos;.\r\n\t\t</p>\r\n\t"},"en":{"title":"Owin : Authentication provider customization.","summary":"\r\n\t\t<p>\r\n\t\t\tThe authentication Owin provider is a really cool way for manage your users in a Web application.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tWith NodeJS you can found <a href=\"http://passportjs.org/\" target=\"_blank\">Passport</a>, this is able to do connection with Facebook, Google, ... \r\n\t\t\tIn .Net we have Owin.\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tThe authentication Owin provider is a really cool way for manage your users in a Web application.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tWith NodeJS you can found <a href=\"http://passportjs.org/\" target=\"_blank\">Passport</a>, this is able to do connection with Facebook, Google, ... \r\n\t\t\tIn .Net we have Owin.\r\n\t\t</p>\r\n\t\t<h2>Prerequisites</h2>\r\n\t\t<p>\r\n\t\t\tLook <a href=\"https://oauth.net/2/\" target=\"_blank\">OAuth </a> &amp; install Owin !\r\n\t\t</p>\r\n\t\t<h2>At beginning</h2>\r\n\t\t<p>\r\n\t\t\tThe &quot;Startup.cs&quot; file :\r\n\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\nusing Microsoft.Owin;\r\n[assembly: OwinStartup(typeof(MyProject.Web.Startup))]\r\nnamespace MyProject.Web\r\n{\r\n\tusing Owin;\r\n\tusing System.Web.Mvc;\r\n\tusing System.Web.Http;\r\n\tusing System.Web.Routing;\r\n\tusing System.Web.Optimization;\r\n\t\t\t\t\r\n\tpublic partial class Startup\r\n\t{\r\n\t\tpublic void Configuration(IAppBuilder app)\r\n\t\t{\r\n\t\t\tConfigureAuth(app);\r\n\r\n\t\t\tAreaRegistration.RegisterAllAreas();\r\n\t\t\tGlobalConfiguration.Configure(WebApiConfig.Register);\r\n\t\t\tFilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);\r\n\t\t\tRouteConfig.RegisterRoutes(RouteTable.Routes);\r\n\t\t\tBundleConfig.RegisterBundles(BundleTable.Bundles);\r\n\t\t}\r\n\t}\r\n}\r\n\t\t\t</prism-component>\r\n\t\t</p>\r\n\t\t<h2>Configuration</h2>\r\n\t\t<p>\r\n\t\t\tThe &apos;ConfigureAuth&apos; method is inthe &apos;App_Start&apos; folder in a &apos;Startup.Auth.cs&apos; file (&apos;Startup&apos; partial class <=> same namespace) :\r\n\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\nnamespace MyProject.Web\r\n{\r\n\tusing Microsoft.AspNet.Identity;\r\n\tusing Microsoft.Owin;\r\n\tusing Microsoft.Owin.Security.Cookies;\r\n\tusing Microsoft.Owin.Security.OAuth;\r\n\tusing Owin;\r\n\tusing Providers;\r\n\tusing System;\r\n\r\n\tpublic partial class Startup\r\n\t{\r\n\t\tpublic void ConfigureAuth(IAppBuilder app)\r\n\t\t{\r\n\t\t\t// Cookie Owin for form authentication.\r\n\t\t\tCookieAuthenticationOptions cookieAuthOptions = new CookieAuthenticationOptions\r\n\t\t\t{\r\n\t\t\t\tAuthenticationType = DefaultAuthenticationTypes.ApplicationCookie,\r\n\t\t\t\tLoginPath = new PathString(&quot;/Home/Index&quot;),\r\n\t\t\t\tLogoutPath = new PathString(&quot;/Home/Logout&quot;),\r\n\t\t\t\tExpireTimeSpan = TimeSpan.FromMinutes(30),\r\n\t\t\t\tSlidingExpiration = true\r\n\t\t\t};\r\n\r\n\t\t\tapp.UseCookieAuthentication(cookieAuthOptions);\r\n\r\n\t\t\t// Token OAuth.\r\n\t\t\tOAuthAuthorizationServerOptions oAuthServerOptions = new OAuthAuthorizationServerOptions\r\n\t\t\t{\r\n\t\t\t\tTokenEndpointPath = new PathString(&quot;/token&quot;),\r\n\t\t\t\tProvider = new OAuthCustomAuthenticationProvider(),\r\n\t\t\t\tAccessTokenExpireTimeSpan = TimeSpan.FromDays(30),\r\n\t\t\t\tAllowInsecureHttp = true,\r\n\t\t\t};\r\n\r\n\t\t\t// Token Generation\r\n\t\t\tapp.UseOAuthAuthorizationServer(oAuthServerOptions);\r\n\t\t\tapp.UseOAuthBearerAuthentication(new OAuthBearerAuthenticationOptions());\r\n\t\t}\r\n\t}\r\n}\t\t\r\n\t\t\t</prism-component>\r\n\t\t\tThe cookie authentication is now configurate, and the bearer token too !\r\n\t\t</=></p>\r\n\t\t<h2>Token API : &quot;grant_type=password&quot;</h2>\r\n\t\t<p>\r\n\t\t\tAdd a new call &apos;OAuthCustomAuthenticationProvider&apos; in a &apos;Providers&apos; folder. After that override some methods &apos;OAuthAuthorizationServerProvider&apos;.\r\n\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\nnamespace MyProject.Web.Providers\r\n{\r\n\t[...]\r\n\tusing Microsoft.AspNet.Identity;\r\n    using Microsoft.Owin.Security;\r\n    using Microsoft.Owin.Security.Cookies;\r\n    using Microsoft.Owin.Security.OAuth;\r\n    using System;\r\n    using System.Collections.Generic;\r\n    using System.Net;\r\n    using System.Security.Claims;\r\n    using System.Security.Principal;\r\n    using System.ServiceModel.Security;\r\n    using System.Threading.Tasks;\r\n\r\n\tpublic class OAuthCustomAuthenticationProvider : OAuthAuthorizationServerProvider\r\n    {\r\n\t\t// no ClientId needed, use grant_type=password.\r\n\t\tpublic override async Task ValidateClientAuthentication(OAuthValidateClientAuthenticationContext context)\r\n        {\r\n            if (context.ClientId == null)\r\n            {\r\n                context.Validated();\r\n            }\r\n        }\r\n\r\n\t\t// After ValidateClientAuthentication time to do authentication.\r\n\t\tpublic override async Task GrantResourceOwnerCredentials(OAuthGrantResourceOwnerCredentialsContext context)\r\n        {\r\n            // Decrypt password\r\n            var usernameDecrypted = context.UserName;\r\n            var passwordDecrypted = context.Password;\r\n\r\n            // find user.\r\n\t\t\tUser user = new User();\r\n\t\t\ttry\r\n            {\r\n\t\t\t\tuser = userManager.Find(usernameDecrypted, passwordDecrypted); // this method is for the sample.\r\n\t\t\t}\r\n            catch (SecurityNegotiationException ex)\r\n            {\r\n                context.SetError(&quot;invalid_grand&quot;, &quot;The username or password is incorrect&quot;);\r\n                context.Response.Headers.Add(&quot;X-Challenge&quot;, new[] { ((int)HttpStatusCode.Unauthorized).ToString() });\r\n                return;\r\n            }\r\n            catch(Exception ex)\r\n            {\r\n                context.SetError(&quot;invalid_grand&quot;, &quot;Problem with authentication provider&quot;);\r\n                context.Response.Headers.Add(&quot;X-Challenge&quot;, new[] { ((int)HttpStatusCode.ServiceUnavailable).ToString() });\r\n                return;\r\n            }\r\n\r\n\t\t\t// create a claims.\r\n            var oAuthIdentity = new ClaimsIdentity(context.Options.AuthenticationType);\r\n            oAuthIdentity.AddClaim(new Claim(ClaimTypes.Sid, user.ID.ToString()));\r\n            oAuthIdentity.AddClaim(new Claim(ClaimTypes.Role, &quot;user&quot;));\r\n            oAuthIdentity.AddClaim(new Claim(ClaimTypes.NameIdentifier, user.UserName));\r\n\r\n            var cookiesIdentity = new ClaimsIdentity(oAuthIdentity.Claims, CookieAuthenticationDefaults.AuthenticationType);\r\n\r\n\t\t\t// custom properties.\r\n            var properties = new AuthenticationProperties(new Dictionary&lt;string, string&gt; {\r\n                    { &quot;username&quot;, user.UserName }\r\n            });\r\n\r\n\t\t\t// create the token.\r\n            var ticket = new AuthenticationTicket(oAuthIdentity, properties);\r\n\r\n            context.Validated(ticket);\r\n            context.Request.Context.Authentication.SignIn(cookiesIdentity);\r\n        }\r\n\r\n\t\t// add the &quot;custom properties&quot; to your json response with access token.\r\n        public override Task TokenEndpoint(OAuthTokenEndpointContext context)\r\n        {\r\n            foreach (KeyValuePair&lt;string, string&gt; property in context.Properties.Dictionary)\r\n            {\r\n                context.AdditionalResponseParameters.Add(property.Key, property.Value);\r\n            }\r\n\r\n            return Task.FromResult&lt;object&gt;(null);\r\n        }\r\n\t}\r\n}\r\n\t\t\t</prism-component>\r\n\t\t\tYou can have the current user ID in an &quot;action&quot; of your &quot;controller&quot; with :\r\n\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\nvar userID = int.Parse(((ClaimsIdentity)this.RequestContext.Principal.Identity).FindFirst(ClaimTypes.Sid).Value);\r\n\t\t\t</prism-component>\r\n\t\t\tThanks to the Thread &amp; the Claims.\r\n\t\t</p>\r\n\t\t<h2>Token API : testing !</h2>\r\n\t\t<p>\r\n\t\t\tTest token authentication with a call to &apos;TokenEndpointPath&apos; url (in this sample is : /token).\r\n\t\t\tYou can use PostMan for the call, it&apos;s may look like this :\r\n\t\t\t<ul>\r\n\t\t\t\t<li>POST http://localhost:29817/token</li>\r\n\t\t\t\t<li>Headers : content_type=application/x-www-form-urlencoded</li>\r\n\t\t\t\t<li>Body : grant_type=password&amp;username=toto&amp;password=titi</li>\r\n\t\t\t</ul>\r\n\t\t\tWhen you have the Access Token, the next api call may look like this :\r\n\t\t\t<ul>\r\n\t\t\t\t<li>GET http://localhost:29817/Api/Group/test</li>\r\n\t\t\t\t<li>Headers : Authorization=Bearer MY_ACCESS_TOKEN</li>\r\n\t\t\t</ul>\r\n\t\t</p>\r\n\t\t<h2>Form authentication</h2>\r\n\t\t<p>\r\n\t\t\tSample of actions for login &amp; logout an user :\r\n\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\n[HttpPost]\r\npublic async Task&lt;ActionResult&gt; Index(LoginModel model)\r\n{\r\n\tif (ModelState.IsValid)\r\n\t{\r\n\t\tvar user = userManager.Find(model.UserName, model.Password);\r\n\r\n\t\tif (user != null)\r\n\t\t{\r\n\t\t\tvar cookiesIdentity = new ClaimsIdentity(DefaultAuthenticationTypes.ApplicationCookie);\r\n            cookiesIdentity.AddClaim(new Claim(ClaimTypes.Sid, user.ID.ToString()));\r\n            cookiesIdentity.AddClaim(new Claim(ClaimTypes.Role, &quot;admin&quot;));\r\n            cookiesIdentity.AddClaim(new Claim(ClaimTypes.NameIdentifier, model.UserName));\r\n\r\n            HttpContext.GetOwinContext().Authentication.SignIn(cookiesIdentity);\r\n\r\n\t\t\treturn RedirectToAction(&quot;List&quot;, &quot;Users&quot;);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tModelState.AddModelError(&quot;&quot;, &quot;The user name or password provided is incorrect.&quot;);\r\n\t\t}\r\n\t}\r\n\r\n\t// If we got this far, something failed, redisplay form\r\n\treturn View(model);\r\n}\r\n\r\n[HttpGet]\r\npublic ActionResult Logout()\r\n{\r\n\tHttpContext.GetOwinContext().Authentication.SignOut(DefaultAuthenticationTypes.ApplicationCookie);\r\n\r\n\treturn RedirectToAction(&quot;Index&quot;);\r\n}\r\n\t\t\t</prism-component>\r\n\t\t\tEverything is managed with Owin.\r\n\t\t</p>\r\n\t\t<h2>After ?</h2>\r\n\t\t<p>\r\n\t\t\tFor a better security maybe you need to use the refreshToken ! (&apos;AuthenticationTokenProvider&apos; override).\r\n\t\t</p>\r\n\t"}},{"id":24,"publication_date":1484092800000,"img":"/blog/files/img/nodejs-universe.jpg","img_alt":"https://cdn.meme.am/cache/instances/folder93/58392093.jpg","fr":{"title":"Node JS : Mise &#xE0; jour Node/NPM impossible sur Windows.","summary":"\r\n\t\t<p>\r\n\t\t\tJe souhaite mettre &#xE0; jour <b>Node</b> mais m&#xEA;me apr&#xE8;s une r&#xE9;installation du package d&apos;installation ; &quot;node -v&quot; ne retourne \r\n\t\t\tpas la version esp&#xE9;r&#xE9;e.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tIl semblerait que plusieurs versions de Node se sont install&#xE9;es sur la machine (version par d&#xE9;faut de Visual Studio).\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tIl faut d&#xE9;sinstaller Node et supprimer toutes ses r&#xE9;f&#xE9;rences.\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tJe souhaite mettre &#xE0; jour <b>Node</b> mais m&#xEA;me apr&#xE8;s une r&#xE9;installation du package d&apos;installation ; &quot;node -v&quot; ne retourne \r\n\t\t\tpas la version esp&#xE9;r&#xE9;e.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tIl semblerait que plusieurs versions de Node se sont install&#xE9;es sur la machine (version par d&#xE9;faut de Visual Studio).\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tIl faut d&#xE9;sinstaller Node et supprimer toutes ses r&#xE9;f&#xE9;rences.\r\n\t\t</p>\r\n\t\t<h2>Supprimer les r&#xE9;f&#xE9;rences &#xE0; Node (<a href=\"http://stackoverflow.com/a/20711410\" alt=\"Source\">source</a>)</h2>\r\n\t\t<p>\r\n\t\t\t<ul>\r\n\t\t\t\t<li>Supprimer Node des &quot;Programmes et fonctionnalit&#xE9;s&quot;</li>\r\n\t\t\t\t<li>V&#xE9;rifier que le dossier suivant est bien supprimer =&gt; C:\\Program Files (x86)\\Nodejs</li>\r\n\t\t\t\t<li>V&#xE9;rifier que le dossier suivant est bien supprimer =&gt; C:\\Program Files\\Nodejs</li>\r\n\t\t\t\t<li>Supprimer =&gt; C:\\Users\\{User}\\AppData\\Roaming\\npm (ou %appdata%\\npm)</li>\r\n\t\t\t\t<li>Supprimer =&gt; C:\\Users\\{User}\\AppData\\Roaming\\npm-cache (ou %appdata%\\npm-cache)</li>\r\n\t\t\t</ul>\r\n\t\t\t* V&#xE9;rifier &#xE9;galement sur les autres disques durs.\r\n\t\t</p>\r\n\t\t<h2>Clean Install / Update de NodeJs</h2>\r\n\t\t<p>\r\n\t\t\tNode nous recommande pour chaque &quot;mise &#xE0; jour&quot; de faire une installation via le package d&apos;install et non via ligne de commandes\r\n\t\t\t(<a href=\"https://nodejs.org/en/download/current/\">version actuelle</a>). Donc il faut t&#xE9;l&#xE9;charger le dernier &quot;.msi/.exe&quot;\r\n\t\t\tcorrespondant &#xE0; votre type de processeur/OS.\r\n\t\t</p>\r\n\t"},"en":{"title":"Node JS : Unable to update Node/NPM on Windows..","summary":"\r\n\t\t<p>\r\n\t\t\tI want to update Node but even if I do an installation of the latest package the node version is wrong.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tMaybe many node instances are installed (Visual Studio instance). \r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tYou need to completely uninstall node and all references.\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tI want to update Node but even if I do an installation of the latest package the node version is wrong.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tMaybe many node instances are installed (Visual Studio instance). \r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tYou need to completely uninstall node and all references.\r\n\t\t</p>\r\n\t\t<h2>Remove Node completely (<a href=\"http://stackoverflow.com/a/20711410\" alt=\"Source\">source</a>)</h2>\r\n\t\t<p>\r\n\t\t\t<ul>\r\n\t\t\t\t<li>Remove Node from &quot;Programs and Features&quot;</li>\r\n\t\t\t\t<li>Check this folder dossier and remove it =&gt; C:\\Program Files (x86)\\Nodejs</li>\r\n\t\t\t\t<li>Check this folder dossier and remove it =&gt; C:\\Program Files\\Nodejs</li>\r\n\t\t\t\t<li>Remove =&gt; C:\\Users\\{User}\\AppData\\Roaming\\npm (ou %appdata%\\npm)</li>\r\n\t\t\t\t<li>Remove =&gt; C:\\Users\\{User}\\AppData\\Roaming\\npm-cache (ou %appdata%\\npm-cache)</li>\r\n\t\t\t</ul>\r\n\t\t\t* Maybe check on others local disks.\r\n\t\t</p>\r\n\t\t<h2>NodeJS Clean Install/Update</h2>\r\n\t\t<p>\r\n\t\t\tThe node recommandation when you want to update it is to download the latest installation package\r\n\t\t\t(<a href=\"https://nodejs.org/en/download/current/\">Current version</a>).\r\n\t\t</p>\r\n\t"}},{"id":23,"publication_date":1483574400000,"img":"/blog/files/img/jquery-not-work.jpg","img_alt":"https://cdn.meme.am/cache/instances/folder335/500x/57483335.jpg","fr":{"title":"jQuery : &quot;Cannot read property &apos;XXX&apos; of undefined&quot; lorsque je passe un param&#xE8;tre &#xE0; une m&#xE9;thode jQuery.","summary":"\r\n\t\t<p>\r\n\t\t\tProbl&#xE8;me qui est survenu dans mon cas avec une vieille version de <b>jQuery</b> (1.4.2) lorsque que l&apos;on red&#xE9;fini la m&#xE9;thode &quot;click&quot; \r\n\t\t\td&apos;un &#xE9;l&#xE9;ment du DOM.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tCette m&#xE9;thode &quot;click&quot; r&#xE9;alise un traitement particulier selon les param&#xE8;tres pass&#xE9;s, malheureusement j&apos;obtiens l&apos;erreur \r\n\t\t\t&quot;Cannot read property &apos;handler&apos; of undefined&quot;.\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tProbl&#xE8;me qui est survenu dans mon cas avec une vieille version de <b>jQuery</b> (1.4.2) lorsque que l&apos;on red&#xE9;fini la m&#xE9;thode &quot;click&quot; \r\n\t\t\td&apos;un &#xE9;l&#xE9;ment du DOM.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tCette m&#xE9;thode &quot;click&quot; r&#xE9;alise un traitement particulier selon les param&#xE8;tres pass&#xE9;s, malheureusement j&apos;obtiens l&apos;erreur \r\n\t\t\t&quot;Cannot read property &apos;handler&apos; of undefined&quot;.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tCode initial :\r\n\t\t\t<prism-component class=\"language-js line-numbers\">\r\n$(&quot;.selector&quot;).bind(&apos;click&apos;, function(event)\r\n{\r\n\tif (event.data != undefined &amp;&amp; event.data.isCustom)\r\n\t{\r\n\t\tconsole.log(&quot;Do something Good&quot;);\r\n\t}\r\n\r\n\tif (event.data != undefined &amp;&amp; !event.data.isCustom)\r\n\t{\r\n\t\tconsole.log(&quot;Do something Wrong&quot;);\r\n\t}\r\n});\r\n\r\n[...]\r\n\r\n// Dans un autre fichier.\r\nfunction DoSometing(){\r\n    $(&apos;.selector&apos;).click({isCustom: true});\r\n}\r\n\t\t\t</prism-component>\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tDans la fonction &quot;DoSometing&quot; on voit que l&apos;on tente de passer un param&#xE8;tre &#xE0; la m&#xE9;thode &quot;click&quot; et malheureusement sur Chrome\r\n\t\t\t&#xE7;a ne fonctionne pas (avec cette version de jQuery).\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tCode fonctionnel :\r\n\t\t\t<prism-component class=\"language-js line-numbers\">\r\n$(&quot;.selector&quot;).bind(&apos;click&apos;, function(event, data)\r\n{\r\n\tif (data !== undefined &amp;&amp; data.isCustom)\r\n\t{\r\n\t\tconsole.log(&quot;Do something Good&quot;);\r\n\t}\r\n\r\n\tif (data !== undefined &amp;&amp; !data.isCustom)\r\n\t{\r\n\t\tconsole.log(&quot;Do something Wrong&quot;);\r\n\t}\r\n});\r\n\r\n[...]\r\n\r\n// Dans un autre fichier.\r\nfunction DoSometing(){\r\n    $(&apos;.selector&apos;).triggerHandler(&apos;click&apos;, { isCustom: true });\r\n}\r\n\t\t\t</prism-component>\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tOn utilise donc la m&#xE9;thode jQuery &quot;trigglerHandler&quot; pour passer le param&#xE8;tre, &quot;trigger&quot; ne fonctionne pas non plus dans \r\n\t\t\tnotre cas.\r\n\t\t</p>\r\n\t"},"en":{"title":"jQuery : &quot;Cannot read property &apos;XXX&apos; of undefined&quot;.","summary":"\r\n\t\t<p>\r\n\t\t\tThis problem comes on an old <b>jQuery</b> version (1.4.2) when we override a &quot;click&quot; method of a DOM element.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tThis &quot;click&quot; method needs to do something different if a parameter is given, but I encounter this error : &quot;Cannot read property &apos;handler&apos; of undefined&quot; on Chrome.\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tThis problem comes on an old <b>jQuery</b> version (1.4.2) when we override a &quot;click&quot; method of a DOM element.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tThis &quot;click&quot; method needs to do something different if a parameter is given, but I encounter this error : &quot;Cannot read property &apos;handler&apos; of undefined&quot; on Chrome.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tInitially  :\r\n\t\t\t<prism-component class=\"language-js line-numbers\">\r\n$(&quot;.selector&quot;).bind(&apos;click&apos;, function(event)\r\n{\r\n\tif (event.data != undefined &amp;&amp; event.data.isCustom)\r\n\t{\r\n\t\tconsole.log(&quot;Do something Good&quot;);\r\n\t}\r\n\r\n\tif (event.data != undefined &amp;&amp; !event.data.isCustom)\r\n\t{\r\n\t\tconsole.log(&quot;Do something Wrong&quot;);\r\n\t}\r\n});\r\n\r\n[...]\r\n\r\n// In other file.\r\nfunction DoSometing(){\r\n    $(&apos;.selector&apos;).click({isCustom: true});\r\n}\r\n\t\t\t</prism-component>\r\n\t\t</p>\t\r\n\t\t<p>\r\n\t\t\tIn the &quot;DoSometing&quot; function, I attempt to use a parameter &quot;isCustom&quot; but isn&apos;t working with this jQuery version.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tRevision :\r\n\t\t\t<prism-component class=\"language-js line-numbers\">\r\n$(&quot;.selector&quot;).bind(&apos;click&apos;, function(event, data)\r\n{\r\n\tif (data !== undefined &amp;&amp; data.isCustom)\r\n\t{\r\n\t\tconsole.log(&quot;Do something Good&quot;);\r\n\t}\r\n\r\n\tif (data !== undefined &amp;&amp; !data.isCustom)\r\n\t{\r\n\t\tconsole.log(&quot;Do something Wrong&quot;);\r\n\t}\r\n});\r\n\r\n[...]\r\n\r\n// In the other file.\r\nfunction DoSometing(){\r\n    $(&apos;.selector&apos;).triggerHandler(&apos;click&apos;, { isCustom: true });\r\n}\r\n\t\t\t</prism-component>\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tI need to use the &quot;trigglerHandler&quot; method to use my parameter (&quot;trigger&quot; not working too).\r\n\t\t</p>\r\n\t"}},{"id":22,"publication_date":1483315200000,"img":"/blog/files/img/dependency-injection-aliens.jpg","img_alt":"https://cdn.meme.am/instances/37792755.jpg","fr":{"title":"Unity : Injecter des param&#xE8;tres au constructeur lors du resolve.","summary":"\r\n\t\t<p>\r\n\t\t\tLorsque vous utilisez l&apos;injection de d&#xE9;pendances, vous pouvez avoir besoin d&apos;initialiser votre \r\n\t\t\tr&#xE9;solution de d&#xE9;pendances avec certains param&#xE8;tres.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tAvec <b>Unity</b> votre &quot;CustomUnityContainer&quot; va h&#xE9;riter de &quot;UnityContainer&quot;, qui va lui pemettre d&apos;avoir les propri&#xE9;t&#xE9;s\r\n\t\t\tet les m&#xE9;thodes comme la m&#xE9;thode &quot;Resolve&quot;.\r\n\t\t</p>\t\t\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tLorsque vous utilisez l&apos;injection de d&#xE9;pendances, vous pouvez avoir besoin d&apos;initialiser votre \r\n\t\t\tr&#xE9;solution de d&#xE9;pendances avec certains param&#xE8;tres.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tAvec <b>Unity</b> votre &quot;CustomUnityContainer&quot; va h&#xE9;riter de &quot;UnityContainer&quot;, qui va lui pemettre d&apos;avoir les propri&#xE9;t&#xE9;s\r\n\t\t\tet les m&#xE9;thodes comme la m&#xE9;thode &quot;Resolve&quot;.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tExemple code :\r\n\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\npublic class CustomUnityContainer : UnityContainer\r\n{\r\n\t[...]\r\n}\r\n\t\t\t</prism-component>\r\n\t\t\tVous avez ensuite votre UnityFactory qui va permettre de r&#xE9;cup&#xE9;rer l&apos;instance du &quot;CustomUnityContainer&quot;.\r\n\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\npublic class UnityFactory\r\n{\r\n\tprivate static readonly CustomUnityContainer _unityContainer = new CustomUnityContainer();\r\n\t\r\n\tpublic static CustomUnityContainer Container\r\n\t{\r\n\t\tget { return _unityContainer; }\r\n\t}\r\n\r\n\tpublic static TService Resolve&lt;TService&gt;(ParameterOverrides overrides)\r\n\t{\r\n\t\treturn _unityContainer.Resolve&lt;TService&gt;(overrides);\r\n\t}\r\n\r\n\t[...]\r\n}\r\n\t\t\t</prism-component>\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tC&apos;est donc cette class &quot;ParameterOverrides&quot; qui va nous interesser.\r\n\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\npublic class MyServices : IMyServices\r\n{\r\n\tpublic MyServices()\r\n\t{}\r\n\r\n\tpublic MyServices(string param1, string param2)\r\n\t{\r\n\t\t[...]\r\n\t}\r\n\r\n\t[...]\r\n}\r\n\t\t\t</prism-component>\r\n\t\t\tPour injecter nos param&#xE8;tres au constructeur lors de notre r&#xE9;solution de d&#xE9;pendances, il faut donc faire :\r\n\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\nvar overrides = new ParameterOverrides();\r\noverrides.Add(&quot;param1&quot;, &quot;value1&quot;);\r\noverrides.Add(&quot;param2&quot;, &quot;value2&quot;);\r\n\r\nvar myServices = UnityFactory.Resolve&lt;IMyServices&gt;(overrides);\r\n\t\t\t</prism-component>\r\n\t\t</p>\r\n\t"},"en":{"title":"Unity : Inject params to constructor when you resolve dependency","summary":"\r\n\t\t<p>\r\n\t\t\tWhen you use the dependency injection you may have need to initialize your dependency resolution with some parameters.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tWith <b>Unity</b> your &quot;CustomUnityContainer&quot; inherit &quot;UnityContainer&quot;. &quot;CustomUnityContainer&quot; can have access to &quot;Resolve&quot; \r\n\t\t\tmethod.\r\n\t\t</p>\t\t\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tWhen you use the dependency injection you may have need to initialize your dependency resolution with some parameters.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tWith <b>Unity</b> your &quot;CustomUnityContainer&quot; inherit &quot;UnityContainer&quot;. &quot;CustomUnityContainer&quot; can have access to &quot;Resolve&quot; \r\n\t\t\tmethod.\r\n\t\t</p>\t\r\n\t\t<p>\r\n\t\t\tSample :\r\n\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\npublic class CustomUnityContainer : UnityContainer\r\n{\r\n\t[...]\r\n}\r\n\t\t\t</prism-component>\r\n\t\t\tYour UnityFactory give you access to the &quot;CustomUnityContainer&quot; instance.\r\n\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\npublic class UnityFactory\r\n{\r\n\tprivate static readonly CustomUnityContainer _unityContainer = new CustomUnityContainer();\r\n\t\r\n\tpublic static CustomUnityContainer Container\r\n\t{\r\n\t\tget { return _unityContainer; }\r\n\t}\r\n\r\n\tpublic static TService Resolve&lt;TService&gt;(ParameterOverrides overrides)\r\n\t{\r\n\t\treturn _unityContainer.Resolve&lt;TService&gt;(overrides);\r\n\t}\r\n\r\n\t[...]\r\n}\r\n\t\t\t</prism-component>\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tOur solution is the &quot;ParameterOverrides&quot; class !\r\n\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\npublic class MyServices : IMyServices\r\n{\r\n\tpublic MyServices()\r\n\t{}\r\n\r\n\tpublic MyServices(string param1, string param2)\r\n\t{\r\n\t\t[...]\r\n\t}\r\n\r\n\t[...]\r\n}\r\n\t\t\t</prism-component>\r\n\t\t\tFor inject my params to constructor :\r\n\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\nvar overrides = new ParameterOverrides();\r\noverrides.Add(&quot;param1&quot;, &quot;value1&quot;);\r\noverrides.Add(&quot;param2&quot;, &quot;value2&quot;);\r\n\r\nvar myServices = UnityFactory.Resolve&lt;IMyServices&gt;(overrides);\r\n\t\t\t</prism-component>\r\n\t\t</p>\r\n\t"}},{"id":21,"publication_date":1482451200000,"img":"/blog/files/img/nodejs-minions.gif","img_alt":"http://a.memegen.com/obdo0d.gif","fr":{"title":"Visual Studio Code : Debugger une application console Commander Node.js","summary":"\r\n\t\t<p>\r\n\t\t\t<b>Visual Studio Code</b> permet de debugger nos applications.\r\n\t\t\tVoici un lien vers les bases du debug avec Visual Studio Code : \r\n\t\t\t<a href=\"https://code.visualstudio.com/Docs/editor/debugging\" target=\"_blank\">lien</a>.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tMaintenant que vous savez naviguer vers le mode debug et surtout vers le fichier de configuration &quot;launch.json&quot;, vous pouvez\r\n\t\t\t&#xE9;diter la mani&#xE8;re de lancer votre programme.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tDans un pr&#xE9;c&#xE9;dent article j&apos;avais pr&#xE9;sent&#xE9; diff&#xE9;rentes lib node dont &quot;commander&quot; et &quot;grunt-execute&quot; car dans le code de ce site j&apos;utilise\r\n\t\t\tune tache pour &quot;compiler&quot; / &quot;indexer&quot; mes articles. \r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\t<b>Visual Studio Code</b> permet de debugger nos applications.\r\n\t\t\tVoici un lien vers les bases du debug avec Visual Studio Code : \r\n\t\t\t<a href=\"https://code.visualstudio.com/Docs/editor/debugging\" target=\"_blank\">lien</a>.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tMaintenant que vous savez naviguer vers le mode debug et surtout vers le fichier de configuration &quot;launch.json&quot;, vous pouvez\r\n\t\t\t&#xE9;diter la mani&#xE8;re de lancer votre programme.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tDans un pr&#xE9;c&#xE9;dent article j&apos;avais pr&#xE9;sent&#xE9; diff&#xE9;rentes lib node dont &quot;commander&quot; et &quot;grunt-execute&quot;. Dans le code de ce site j&apos;utilise\r\n\t\t\tdonc une tache pour &quot;compiler&quot; / &quot;indexer&quot; mes articles. \r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tVoici a quoi ressemble mon &quot;launch.json&quot; pour executer uniquement l&apos;action &quot;indexing&quot; de mon tool en cli :\r\n\t\t\t<prism-component class=\"language-js line-numbers\">\r\n{\r\n\t&quot;type&quot;: &quot;node&quot;,\r\n\t&quot;request&quot;: &quot;launch&quot;,\r\n\t&quot;name&quot;: &quot;Lancer le programme&quot;,\r\n\t&quot;program&quot;: &quot;${workspaceRoot}/cli/program.js&quot;,\r\n\t&quot;cwd&quot;: &quot;${workspaceRoot}&quot;,\r\n\t&quot;args&quot;: [\r\n\t\t\t\t&quot;indexing&quot;, \r\n\t\t\t\t&quot;-d&quot;,\r\n\t\t\t\t&quot;-p&quot;,\r\n\t\t\t\t&quot;blog/content/posts/&quot;\r\n\t\t\t]\r\n},\r\n\t\t\t</prism-component>\r\n\t\t\tLe fichier en question se trouve sur mon Github : <a href=\"https://github.com/aZerato/aZerato.github.io/blob/master/cli/program.js\" target=\"_blank\">lien</a>.\r\n\t\t</p>\r\n\t"},"en":{"title":"Visual Studio Code : Debug a Node.js Commander application console","summary":"\r\n\t\t<p>\r\n\t\t\t<b>Visual Studio Code</b> is really cool for debug a Node.js console application.\r\n\t\t\tThe basics : <a href=\"https://code.visualstudio.com/Docs/editor/debugging\" target=\"_blank\">lien</a>.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tNow you are able to navigate between debug mode and the &quot;launch.json&quot; file configuration. You can edit it to customize \r\n\t\t\tthe program execution.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tPreviously i&apos;m talking about different libs like &quot;commander&quot; and &quot;grunt-execute&quot;. For this application i&apos;m using two task for posts &quot;compiling&quot; /\r\n\t\t\t&quot;indexing&quot;.\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\t<b>Visual Studio Code</b> is really cool for debug a Node.js console application.\r\n\t\t\tThe basics : <a href=\"https://code.visualstudio.com/Docs/editor/debugging\" target=\"_blank\">lien</a>.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tNow you are able to navigate between debug mode and the &quot;launch.json&quot; file configuration. You can edit it to customize \r\n\t\t\tthe program execution.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tPreviously i&apos;m talking about different libs like &quot;commander&quot; and &quot;grunt-execute&quot;. For this application i&apos;m using two task for posts &quot;compiling&quot; /\r\n\t\t\t&quot;indexing&quot;.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tThis is my &quot;launch.json&quot; file for launch only the &quot;indexing&quot; action of my tool :\r\n\t\t\t<prism-component class=\"language-js line-numbers\">\r\n{\r\n\t&quot;type&quot;: &quot;node&quot;,\r\n\t&quot;request&quot;: &quot;launch&quot;,\r\n\t&quot;name&quot;: &quot;Lancer le programme&quot;,\r\n\t&quot;program&quot;: &quot;${workspaceRoot}/cli/program.js&quot;,\r\n\t&quot;cwd&quot;: &quot;${workspaceRoot}&quot;,\r\n\t&quot;args&quot;: [\r\n\t\t\t\t&quot;indexing&quot;, \r\n\t\t\t\t&quot;-d&quot;,\r\n\t\t\t\t&quot;-p&quot;,\r\n\t\t\t\t&quot;blog/content/posts/&quot;\r\n\t\t\t]\r\n},\r\n\t\t\t</prism-component>\r\n\t\t\tThe &quot;program.js&quot; file can be founded here : <a href=\"https://github.com/aZerato/aZerato.github.io/blob/master/cli/program.js\" target=\"_blank\">lien</a>.\r\n\t\t</p>\r\n\t"}},{"id":20,"publication_date":1481587200000,"img":"/blog/files/img/vscode-ad.png","img_alt":"http://www.windowsphoneaddict.fr/wp-content/uploads/2015/11/VisualStudioCode-e1447935140166.png","fr":{"title":"Visual Studio Code : Probl&#xE8;me mon code est automatiquement format&#xE9; quand je sauvegarde","summary":"\r\n\t\t<p>\r\n\t\t\tLorsque j&apos;&#xE9;dite du code HTML avec <b>Visual Studio Code</b> et que met &quot;du code copi&#xE9;-coll&#xE9;&quot; d&apos;un autre langage dans \r\n\t\t\tun component angular, &#xE0; la sauvegarde mon &quot;code copi&#xE9;-coll&#xE9;&quot; &#xE9;tait automatiquement format&#xE9;.\r\n\t\t</p>\t\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tLorsque j&apos;&#xE9;dite du code HTML avec <b>Visual Studio Code</b> et que met &quot;du code copi&#xE9;-coll&#xE9;&quot; d&apos;un autre langage dans \r\n\t\t\tun component angular, &#xE0; la sauvegarde mon &quot;code copi&#xE9;-coll&#xE9;&quot; &#xE9;tait automatiquement format&#xE9;.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tLorsque que je r&#xE9;dige mes &quot;articles&quot; pour ce site j&apos;utilise un component angular bas&#xE9; sur la lib <a href=\"http://prismjs.com/\" target=\"_blank\">Prism.js</a> pour mettre en forme\r\n\t\t\tmon code. Comme mon code &quot;copi&#xE9;&quot; est &quot;coll&#xE9;&quot; dans un component &quot;&lt;prism-component&gt;&quot; et non dans un &quot;&lt;code&gt;&quot; ; Visual Studio Code\r\n\t\t\tjoue un script de mise en forme supprimant les espaces inutiles ce qui casse la structure de mon code.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<div class=\"well\">\r\n\t\t\t\tRQ : Si je garde &quot;&lt;code&gt;&quot; au lieu de mon component angular il n&apos;y a pas de probl&#xE8;me.\r\n\t\t\t</div>\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tPour d&#xE9;sactiver cette option il faut faire &quot;CTRL + SHIFT + P&quot; / &quot;CMD + SHIFT + P&quot;, il faut taper ensuite &quot;formatter&quot; et s&#xE9;l&#xE9;ctionner &quot;Formatter Config&quot;,\r\n\t\t\tet changer la valeur de &quot;onSave&quot; &#xE0; false.\r\n\t\t</p>\r\n\t"},"en":{"title":"Visual Studio Code : Disable auto formatting code","summary":"\r\n\t\t<p>\r\n\t\t\tWhen I edit my HTML code with <b>Visual Studio Code</b> some spaces are deleted when i save. My HTML code is automatically\r\n\t\t\tformatted that break &quot;cut &amp; past&quot; text structure.\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tWhen I edit my HTML code with <b>Visual Studio Code</b> some spaces are deleted when i save. My HTML code is automatically\r\n\t\t\tformatted that break &quot;cut &amp; past&quot; text structure.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tWhen I write a new post with &quot;code samples&quot;, I use a custom angular component. &quot;&lt;prism-component&gt;&quot; is based on <a href=\"http://prismjs.com/\" target=\"_blank\">Prism.js</a>\r\n\t\t\tlibrary, and create automatically &quot;&lt;pre&gt;&lt;code&gt;&quot; tags.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<div class=\"well\">\r\n\t\t\t\tIf I save my file with &quot;&lt;code&gt;&quot; tag, the inner text is not formatted,\r\n\t\t\t\tbut if I use my &quot;&lt;prism-component&gt;&quot; that inner text is formatted.\r\n\t\t\t</div>\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tTo deactivate this feature : &quot;CTRL + SHIFT + P&quot; / &quot;CMD + SHIFT + P&quot;. After that, type &quot;formatter&quot; and select &quot;Formatter Config&quot;,\r\n\t\t\tin formatter.json file change &quot;onSave&quot; value to false.\r\n\t\t</p>\r\n\t"}},{"id":19,"publication_date":1481068800000,"img":"/blog/files/img/iqueryable-repository.jpg","img_alt":"https://cdn.meme.am/instances/69129463.jpg","fr":{"title":"C# : Vieux projets ADO .NET et LINQ (LINQ TO SQL)","summary":"\r\n\t\t<p>\r\n\t\t\tJe sors du d&#xE9;veloppement d&apos;une application o&#xF9; j&apos;ai pu plonger dans un code utilisant des librairies r&#xE9;centes. Mais voil&#xE0; toutes les bonnes choses ont une\r\n\t\t\tfin ...\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tAdieu les patterns Repository/SelectBuilder/Specifications/ ... On est sur du EntityObject avec des ObjectQuery &#x263A;\r\n\t\t\t<a href=\"https://msdn.microsoft.com/fr-fr/library/ff477605(v=vs.100).aspx\" target=\"_blank\">Bienvenue sur ADO.NET</a>.\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tJe sors du d&#xE9;veloppement d&apos;une application o&#xF9; j&apos;ai pu plonger dans un code utilisant des librairies r&#xE9;centes. Mais voil&#xE0; toutes les bonnes choses ont une\r\n\t\t\tfin ...\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tAdieu les patterns Repository/SelectBuilder/Specifications/ ... On est sur du EntityObject avec des ObjectQuery &#x263A;\r\n\t\t\t<a href=\"https://msdn.microsoft.com/fr-fr/library/ff477605(v=vs.100).aspx\" target=\"_blank\">Bienvenue sur ADO.NET</a>.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tMalgr&#xE9; tout, l&apos;architecture de la solution est assez bien d&#xE9;coup&#xE9;e, et donc nous pouvons retrouver notre &quot;MyAppDBContext&quot;.\r\n\t\t\tNous avons une m&#xE9;thode &quot;GetList&lt;T&gt;&apos; qui ressemble &#xE0; &#xE7;a :\r\n\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\n\t\t\t\r\nclass MyAppDBContext : ContainerContext\r\n{\r\n\t[...]\r\n\r\n\tpublic Context Current {\r\n\t\t...\r\n\t}\r\n\r\n\tpublic IList&lt;T&gt; GetList&lt;T&gt;()\r\n\t{\r\n\t\tvar type = typeof(T);\r\n\t\tvar typeName = type.Name;\r\n\t\tvar setName = typeName.EndsWith(&quot;y&quot;)\r\n\t\t\t? string.Concat(typeName.Substring(0, typeName.Length - 1), &quot;ies&quot;)\r\n\t\t\t: string.Concat(typeName, &quot;s&quot;);\r\n\t\t\r\n\t\tvar request = string.replace(&quot;SELECT * FROM {0}&quot;, setName);\r\n\r\n\t\tvar result = MyAppDBContext.Current.Execute(request);\r\n\r\n\t\treturn result.toList();\r\n\t}\r\n\r\n\t[...]\r\n}\r\n\t\t\t\r\n\t\t\t</prism-component>\r\n\t\t\tLe &quot;ContainerContext&quot; est une classe autog&#xE9;n&#xE9;r&#xE9;e (CRUD de la base) qui regroupe nos diff&#xE9;rents &quot;ObjectQuery&quot; :\r\n\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\n\t\t\t\r\nclass ContainerContext : ObjectContext\r\n{\r\n\t[...]\r\n\r\n\t/// &lt;summary&gt;\r\n\t/// There are no comments for PostLikes in the schema.\r\n\t/// &lt;/summary&gt;\r\n\t[global::System.CodeDom.Compiler.GeneratedCode(&quot;System.Data.Entity.Design.EntityClassGenerator&quot;, &quot;4.0.0.0&quot;)]\r\n\tpublic global::System.Data.Objects.ObjectQuery&lt;PostLike&gt; PostLikes\r\n\t{\r\n\t\tget\r\n\t\t{\r\n\t\t\tif ((this._PostLikes == null))\r\n\t\t\t{\r\n\t\t\t\tthis._PostLikes = base.CreateQuery&lt;PostLike&gt;(&quot;[PostLikes]&quot;);\r\n\t\t\t}\r\n\t\t\treturn this._PostLikes;\r\n\t\t}\r\n\t}\r\n\t[global::System.CodeDom.Compiler.GeneratedCode(&quot;System.Data.Entity.Design.EntityClassGenerator&quot;, &quot;4.0.0.0&quot;)]\r\n\tprivate global::System.Data.Objects.ObjectQuery&lt;PostLike&gt; _PostLikes;\r\n\r\n\t[...]\r\n}\r\n\t\t\t\r\n\t\t\t</prism-component>\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tAvec cet exemple on peut voir la partie MyAppDBContext n&apos;&#xE9;tait pas &quot;performante&quot; et ni &#xE9;volutive car :\r\n\t\t\t<ul>\r\n\t\t\t\t<li>- On retourne une liste de toutes les colonnes (&quot;SELECT *&quot;) alors que je voudrais peut &#xEA;tre limit&#xE9; les colonnes &#xE0; recevoir.</li>\r\n\t\t\t\t<li>- On fait un toList() mais si on veut faire des traitements on refiltre la liste.</li>\r\n\t\t\t</ul>\r\n\t\t\tNotre objectif &#xE9;tait d&apos;afficher une liste d&apos;utilisateurs qui avaient &quot;aim&#xE9;&quot; un post. Nous avions un EntityObject &quot;PostLike&quot; qui a un\r\n\t\t\t&quot;PostLikes ObjectQuery&lt;PostLike&gt;&quot;. Initialement, on attendait 4-5 secondes pour 150-200 enregistrements &#xE0; parcourir. On avait un appel  \r\n            de cette forme &quot;GetList&lt;PostLike&gt;().Where(f =&gt; f.PostID == postID).Select(s =&gt; s.UserID);&quot; r&#xE9;cup&#xE9;rer tous les ID des utilisateurs.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<s>Il faut am&#xE9;liorer &#xE7;a !</s> Il faut faire notre &quot;Where&quot; avant le &quot;toList()&quot;. Il faut se dire que l&apos;on a LINQ et qu&apos;il faut jouer avec des IQueryable ou des IEnumerable pour pas que \r\n\t\t\tnotre requ&#xEA;te soit interpr&#xE9;t&#xE9;e. J&apos;ai cherch&#xE9; et j&apos;ai vu que nos ObjectQuery ont la m&#xE9;thode &quot;asQueryable&quot; !\r\n\t\t</p>\r\n\r\n\t\t<h2>R&#xE9;cup&#xE9;rer mes &quot;ObjectQuery&quot; pour un objet T</h2>\r\n\t\t\r\n\t\t<p>\r\n\t\t\tNous avons une m&#xE9;thode GetList avec un EntityObject T, cet objet T est en relation avec un ObjectQuery (qui a le m&#xEA;me nom au pluriel).\r\n\t\t\tNous n&apos;avons pas de moyen de r&#xE9;cup&#xE9;rer &#xE0; la vol&#xE9; l&apos;ObjectQuery en rapport &#xE0; un EntityObject.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tLes ObjectQuery sont des propri&#xE9;t&#xE9;s de notre &quot;MyAppDBContext&quot;, l&apos;id&#xE9;al serait de se baser sur ces propri&#xE9;t&#xE9;s pour r&#xE9;cup&#xE9;rer le bon ObjectQuery, <b>ce n&apos;est pas jolie</b>\r\n\t\t\tmais via cette m&#xE9;thode on peut r&#xE9;cup&#xE9;rer la valeur de l&apos;attribut qui a son &quot;type_de_notre_attribut == typeof(T)&quot;.\r\n\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\n/// &lt;summary&gt;\r\n/// Query contexts.\r\n/// &lt;/summary&gt;\r\nprivate IDictionary&lt;string, ObjectQuery&gt; queryContexts = new Dictionary&lt;string, ObjectQuery&gt;();\r\n\r\n/// &lt;summary&gt;\r\n/// Find for a T object the ObjectQuery concerned.\r\n/// &lt;/summary&gt;\r\n/// &lt;typeparam name=&quot;T&quot;&gt;&lt;/typeparam&gt;\r\n/// &lt;returns&gt;&lt;/returns&gt;\r\nprivate ObjectQuery FindObjectQuery&lt;T&gt;()\r\n{\r\n\tvar type = typeof(T);\r\n\tvar typeName = type.Name;\r\n\tvar setName = typeName.EndsWith(&quot;y&quot;)\r\n\t\t? string.Concat(typeName.Substring(0, typeName.Length - 1), &quot;ies&quot;)\r\n\t\t: string.Concat(typeName, &quot;s&quot;);\r\n\r\n\tif (this.queryContexts.Count == 0)\r\n\t{\r\n\t\tPropertyInfo[] props = typeof(MyAppDBContext).GetProperties();\r\n\t\tforeach (var prop in props)\r\n\t\t{\r\n\t\t\tif (prop.DeclaringType.BaseType == typeof(ObjectContext))\r\n\t\t\t{\r\n\t\t\t\tvar value = prop.GetValue(MyAppDBContext.Current, null);\r\n\t\t\t\tthis.queryContexts.Add(prop.Name, (ObjectQuery)value);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tObjectQuery query = null;\r\n\tvar state = this.queryContexts.TryGetValue(setName, out query);\r\n\tif (!state)\r\n\t{\r\n\t\tthis.queryContexts.TryGetValue(typeName, out query);\r\n\t}\r\n\r\n\treturn query;\r\n}\t\t\r\n\t\t\t</prism-component>\r\n\t\t\tAvec cette m&#xE9;thode, on r&#xE9;cup&#xE8;re, pour toutes les propri&#xE9;t&#xE9;s, les objets de ma class MyAppDBContext qui sont de type ObjectQuery \r\n\t\t\t(pour mon exemple on r&#xE9;cup&#xE9;re toutes les propri&#xE9;t&#xE9;s mais on pourrait en r&#xE9;cup&#xE9;rer qu&apos;une seule).\r\n\t\t</p>\r\n\r\n\t\t<h2>Passer un ObjectQuery &#xE0; un Queryable (LINQ to SQL)</h2>\r\n\t\t\r\n\t\t<p>\r\n\t\t\tMaintenant que nous avons la posibilit&#xE9; de r&#xE9;cuperer un ObjectQuery pour un EntityObjet T, il faut pouvoir utiliser\r\n\t\t\tles m&#xE9;thodes LINQ :\r\n\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\n/// &lt;summary&gt;\r\n/// Return list.\r\n/// &lt;/summary&gt;\r\n/// &lt;typeparam name=&quot;T&quot;&gt;&lt;/typeparam&gt;\r\n/// &lt;param name=&quot;predicate&quot;&gt;\r\n/// &lt;returns&gt;&lt;/returns&gt;\r\npublic List&lt;T&gt; GetList&lt;T&gt;(Expression&lt;Func&lt;T, bool&gt;&gt; predicate)\r\n{\r\n\tvar provider = this.GetQueryable&lt;T&gt;(predicate);\r\n\r\n\treturn provider.ToList();\r\n}\r\n\r\n/// &lt;summary&gt;\r\n/// Return IQueryable.\r\n/// Never propose this Queryable object to sub layer !.\r\n/// &lt;/summary&gt;\r\n/// &lt;typeparam name=&quot;T&quot;&gt;&lt;/typeparam&gt;\r\n/// &lt;param name=&quot;predicate&quot;&gt;\r\n/// &lt;returns&gt;&lt;/returns&gt;\r\nprivate IQueryable&lt;T&gt; GetQueryable&lt;T&gt;(Expression&lt;Func&lt;T, bool&gt;&gt; predicate)\r\n{\r\n\tvar queryContext = this.FindObjectQuery&lt;T&gt;();\r\n\r\n\tvar provider = ((IQueryable&lt;T&gt;)queryContext.AsQueryable()).Where(predicate);\r\n\r\n\treturn provider;\r\n}\r\n\t\t\t</prism-component>\r\n\t\t\tOn cast mon ObjectQuery en &quot;Queryable&quot; en plus du &quot;AsQueryable&quot; (car il manque le typage) et j&apos;en profite pour passer mon predicat dans mon Where.\r\n\t\t\tOn passe par deux m&#xE9;thodes, une m&#xE9;thode pour retourner une IQueryable, que l&apos;on a en priv&#xE9;e, et apr&#xE8;s la m&#xE9;thode public qui retourne la List<t>.\r\n\t\t</t></p>\r\n\r\n\t\t<h2>On am&#xE9;liore encore avec les &quot;SelectBuilder&quot;</h2>\r\n\t\t\r\n\t\t<p>\r\n            Un SelectBuilder est une lambda expression permetant de limiter &quot;le nombre de colonnes&quot; que l&apos;on va r&#xE9;cuperer d&apos;un enregistrement (c&apos;est l&apos;expression que l&apos;on met dans notre &quot;.Select()&quot; en LINQ).\r\n\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\n/// &lt;summary&gt;\r\n/// Return list.\r\n/// &lt;/summary&gt;\r\n/// &lt;typeparam name=&quot;T&quot;&gt;Object that you want to use to interrogate the linked ObjectQuery.&lt;/typeparam&gt;\r\n/// &lt;typeparam name=&quot;TResult&quot;&gt;Type object that you want to return thanks to the selectbuilder.&lt;/typeparam&gt;\r\n/// &lt;param name=&quot;predicate&quot;&gt;\r\n/// &lt;param name=&quot;builder&quot;&gt;Select builder.\r\n/// &lt;returns&gt;&lt;/returns&gt;\r\npublic List&lt;TResult&gt; GetList&lt;T, TResult&gt;(Expression&lt;Func&lt;T, bool&gt;&gt; predicate, Expression&lt;Func&lt;T, TResult&gt;&gt; builder)\r\n{\r\n\tvar provider = this.GetQueryable&lt;T&gt;(predicate).Select(builder);\r\n\r\n\treturn provider.ToList();\r\n}\r\n\t\t\t</prism-component> \r\n\t\t</p>\r\n\r\n\t\t<h2>Final</h2>\r\n\r\n\t\t<p>\r\n\t\t\tOn passe de &#xE7;a : &quot;GetList&lt;PostLike&gt;().Where(f =&gt; f.PostID == postID).Select(s =&gt; s.UserID);&quot; &#xE0; &#xE7;a : \r\n\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\nclass MyView \r\n{\t\t\r\n\tpublic void Render()\r\n\t{\r\n\t\tList&lt;long&gt; userIDs = MyAppDBContext\r\n\t\t\t.GetList&lt;PostLike, long&gt;(\r\n\t\t\t\tf =&gt; f.PostID == postID, \r\n\t\t\t\tMyView.SelectUserIDsBuilder());\r\n\t}\r\n\r\n\tpublic static Expression&lt;Func&lt;PostLike, long&gt;&gt; SelectUserIDsBuilder()\r\n\t{\r\n\t\treturn postlike =&gt; postlike.userID;\t\r\n\t}\r\n}\t\t\t\t\r\n\t\t\t</prism-component>\r\n\t\t\tEt niveau temps de traitement on passe de 4-5 sec &#xE0; 450ms.\r\n\t\t</p>\r\n\r\n\t\t<h2>En plus</h2>\r\n\r\n\t\t<p>\r\n\t\t\tOn devait r&#xE9;cup&#xE9;rer le nombre d&apos;&#xE9;l&#xE9;ments pour un certain objet &quot;Page&quot;. Il faut cr&#xE9;er une m&#xE9;thode Count&lt;T&gt; avec T notre objet.\r\n\t\t\tMais ceci est possible si notre GetQueryable ne tente pas seulement de r&#xE9;cup&#xE9;rer les ObjectQuery.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tL&apos;objet &quot;Page&quot; h&#xE9;rit&#xE9; de notre objet &quot;Post&quot;.\r\n\t\t\tDans le &quot;ContainerContext&quot; notre h&#xE9;ritage ce pr&#xE9;sentait sous cette forme :\r\n\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\n\t\t\t\r\nclass ContainerContext : ObjectContext\r\n{\r\n\t[...]\r\n\r\n\t[global::System.Data.Objects.DataClasses.EdmEntityTypeAttribute(NamespaceName=&quot;MyAppModel&quot;, Name=&quot;Page&quot;)]\r\n    [global::System.Runtime.Serialization.DataContractAttribute(IsReference=true)]\r\n    [global::System.Serializable()]\r\n    public partial class Page : Post\r\n    {\r\n\t\t[...]\r\n\t}\r\n\r\n\t[...]\r\n}\r\n\t\t\t\r\n\t\t\t</prism-component>\r\n\t\t\tPour pouvoir r&#xE9;aliser notre Count voici ce qu&apos;il faut faire :\r\n\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\npublic int CountPages(Expression&lt;Func&lt;Page, bool&gt;&gt; predicate)\r\n{\r\n\treturn MyAppDBContext.Current.Posts.OfType&lt;Page&gt;().Count(predicate);\r\n}\r\n\t\t\t</prism-component>\r\n\t\t</p>\r\n\t"},"en":{"title":"C# : ADO .NET &amp;&amp; LINQ (LINQ TO SQL)","summary":"\r\n\t\tNot already translated.\r\n\t","content":"\r\n\t\tNot already translated.\r\n\t"}},{"id":18,"publication_date":1478822400000,"img":"/blog/files/img/rest-verbs.jpg","img_alt":"https://cdn.meme.am/cache/instances/folder468/65606468.jpg","fr":{"title":"ASP .NET : &quot;The requested resource does not support http method GET/POST/PUT/...&quot;","summary":"\r\n\t\t<p>\r\n\t\t\tL&apos;application jongle entre des APIs controller et des controller &quot;normaux&quot; ; et c&apos;est sur ce point qu&apos;il faut faire attention.\r\n\t\t\tLes actions doivent avoir des &quot;data annotations&quot;, pour pr&#xE9;ciser le verb, coh&#xE9;rentes avec le traitement qui doit &#xEA;tre r&#xE9;alis&#xE9; dans la couche m&#xE9;tier.\r\n\t\t</p>\r\n\t\t<h4>\r\n\t\t\tMais il arrive que l&apos;on rencontre cette erreur : &quot;The requested resource does not support http method GET/POST/PUT/...&quot; !\r\n\t\t</h4>\r\n\t\t<p>\r\n\t\t\tC&apos;est curieux car l&apos;action que je tente de requeter en PUT a bien la &quot;data annotation&quot; [HttpPut]. Il faut faire attention aux &apos;assemblies&apos; que \r\n\t\t\tl&apos;on utilise !\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tSi vous &#xEA;tes au niveau d&apos;une WEB API utiliser &quot;System.Web.Http&quot; si vous &#xEA;tes au niveau MVC prendre &quot;System.Web.Mvc&quot;.\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tL&apos;application jongle entre des APIs controller et des controller &quot;normaux&quot; ; et c&apos;est sur ce point qu&apos;il faut faire attention.\r\n\t\t\tLes actions doivent avoir des &quot;data annotations&quot;, pour pr&#xE9;ciser le verb, coh&#xE9;rentes avec le traitement qui doit &#xEA;tre r&#xE9;alis&#xE9; dans la couche m&#xE9;tier.\r\n\t\t</p>\r\n\t\t<h4>\r\n\t\t\tMais il arrive que l&apos;on rencontre cette erreur : &quot;The requested resource does not support http method GET/POST/PUT/...&quot; !\r\n\t\t</h4>\r\n\t\t<p>\r\n\t\t\tC&apos;est curieux car l&apos;action que je tente de requeter en PUT a bien la &quot;data annotation&quot; [HttpPut]. Il faut faire attention aux &apos;assemblies&apos; que \r\n\t\t\tl&apos;on utilise !\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tSi vous &#xEA;tes au niveau d&apos;une WEB API utiliser &quot;System.Web.Http&quot; si vous &#xEA;tes au niveau MVC prendre &quot;System.Web.Mvc&quot;.\r\n\t\t</p>\r\n\t"},"en":{"title":"ASP .NET : &quot;The requested resource does not support http method GET/POST/PUT/...&quot;","summary":"\r\n\t\t<p>\r\n\t\t\tWhen you working on a MVC &amp; an API application you need to be careful.\r\n\t\t\tWhen you describ a new action in your controller you can use the &quot;data annotation&quot; to precise the Http Verb. \r\n\t\t\tA Http Verb need to be coherent with the data treatment in sub layers.\r\n\t\t</p>\r\n\t\t<h2>\r\n\t\t\tYou can encounter this error : &quot;The requested resource does not support http method GET/POST/PUT/...&quot; !\r\n\t\t</h2>\r\n\t\t<p>\r\n\t\t\tBut why ? I&apos;m sure that my action has the [HttpPut] &quot;data annotation&quot; !\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tIf you work in WEB API, you need to use the &quot;System.Web.Http&quot; assembly, otherwise &quot;System.Web.Mvc&quot; in MVC part.\r\n\t\t</p>\r\n\t","content":null}},{"id":17,"publication_date":1476057600000,"img":"/blog/files/img/activedirectory-ring.jpg","img_alt":"https://i.imgflip.com/xyrde.jpg","fr":{"title":"C# : interroger un &quot;Active Directory&quot; &amp; introduction aux objet dynamique &quot;JObject&quot;","summary":"\r\n\t\t<p>\r\n\t\t\tPour un projet d&apos;API qui permet d&apos;&quot;authentifier&quot; sur un AD.\r\n\t\t\tCe projet permet &#xE0; l&apos;utilisateur de passer son nom et son mot de passe du domaine sur lequel est le Web service et lui dire s&apos;il existe.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tPour r&#xE9;aliser cela j&apos;ai utilis&#xE9; <a href=\"https://msdn.microsoft.com/fr-fr/library/system.directoryservices(v=vs.110).aspx\" target=\"_blank\"><b>System.DirectoryServices</b></a>.\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tPour un projet d&apos;API qui permet d&apos;&quot;authentifier&quot; sur un AD.\r\n\t\t\tCe projet permet &#xE0; l&apos;utilisateur de passer son nom et son mot de passe du domaine sur lequel est le Web service et lui dire s&apos;il existe.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tPour r&#xE9;aliser cela j&apos;ai utilis&#xE9; <a href=\"https://msdn.microsoft.com/fr-fr/library/system.directoryservices(v=vs.110).aspx\" target=\"_blank\"><b>System.DirectoryServices</b></a>.\r\n\t\t</p>\r\n\t\t<h2>Id&#xE9;e de base</h2>\r\n\t\t<p>\r\n\t\t\tComme un utilisateur va entrer son nom et son mot de passe, j&apos;ai seulement &#xE0; v&#xE9;rifier qu&apos;il soit capable d&apos;ouvrir l&apos;AD.\r\n\t\t\tPar pr&#xE9;caution, je v&#xE9;rifie qu&apos;il existe bien dans l&apos;AD.\r\n\t\t</p>\r\n\t\t<h2>Le code dans tout &#xE7;a</h2>\r\n\t\t<p>\r\n\t\t\tExemple avec cette m&#xE9;thode (dans ce cas je retourne en m&#xEA;me temps la valeur de la propri&#xE9;t&#xE9; &quot;MatriculeElementName&quot;) :\r\n\t\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\n/// &lt;summary&gt;\r\n/// &quot;Authenticate&quot; user with AD informations (check if is able to open AD).\r\n/// &lt;/summary&gt;\r\n/// &lt;param name=&quot;username&quot;&gt;\r\n/// &lt;param name=&quot;password&quot;&gt;\r\n/// &lt;returns&gt;AD Value equi matriculeElementName in Web.config&lt;/returns&gt;\r\npublic AuthenticationAD AuthenticateUserAD(String username, String password)\r\n{\r\n\t// Je devais retourner la valeur d&apos;un &quot;matricule&quot; mais je ne connaissais pas le nom de cette propri&#xE9;t&#xE9; sur l&apos;AD \r\n\t// qui devrait &#xEA;tre interrog&#xE9; dans le projet, donc j&apos;ai rendu &#xE7;a modifiable.\r\n\tString matriculeElementName = this.settingsProvider.ApplicationSettings.ADSettings.MatriculeElementName;\r\n\t\r\n\t// c&apos;est une classe custom, qui devait juste avoir la propri&#xE9;t&#xE9; &apos;Exist&apos; et &apos;Id&apos;.\r\n\tAuthenticationAD auth = new AuthenticationAD { Exist = false };\r\n\t\r\n\ttry\r\n\t{\r\n\t\t// on tente d&apos;ouvrir l&apos;AD avec le combo user/pass.\r\n\t\tusing (DirectoryEntry de = new DirectoryEntry(this.ADConnection, username, password))\r\n\t\t{\r\n\t\t\t// Bind to the native AdsObject to force authentication.\r\n\t\t\tObject obj = de.NativeObject;\r\n\t\t\tDirectorySearcher ds = new DirectorySearcher(de);\r\n\r\n\t\t\tds.SearchRoot = de;\r\n\t\t\t// sAMAccountName &#xE9;qui au nom utilisateur sur le domaine.\r\n\t\t\tds.Filter = &quot;(sAMAccountName=&quot; + username + &quot;)&quot;;\r\n\r\n\t\t\tSearchResult result = ds.FindOne();\r\n\r\n\t\t\tif (result != null)\r\n\t\t\t{\r\n\t\t\t\tauth.Exist = true;\r\n\t\t\t\t\r\n\t\t\t\t// je tente de voir si le user &#xE0; ce fameux &quot;matricule&quot;.\r\n\t\t\t\tResultPropertyValueCollection value = result.Properties[matriculeElementName];\r\n\t\t\t\tif (value.Count &gt; 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tauth.Id = value[0].ToString();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t// no user with this username\r\n\t\t\t\tauth.Exist = false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tcatch (Exception ex)\r\n\t{\r\n\t\tthrow new UnknowUserException(&quot;AD connection problem. &quot; + ex.Message);\r\n\t}\r\n\r\n\treturn auth;\r\n}\r\n\t\t\t</prism-component>\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tJ&apos;ai souhait&#xE9; aller plus loin, j&apos;avais plusieurs informations &#xE0; retrouver sauf que cela devait &#xEA;tre enti&#xE8;rement dynamique.\r\n\t\t\tIl est donc possible de cr&#xE9;er des collections d&apos;objets dynamiques en C#. \r\n\t\t\tLa m&#xE9;thode suivante cherche &#xE0; retourner des propri&#xE9;t&#xE9;s d&apos;utilisateurs dans l&apos;AD (toujours en prenant compte du &quot;matricule&quot;). \r\n\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\n/// &lt;summary&gt;\r\n/// Return for specific user matricules AD informations.\r\n/// &lt;/summary&gt;\r\n/// &lt;param name=&quot;username&quot;&gt;\r\n/// &lt;param name=&quot;password&quot;&gt;\r\n/// &lt;param name=&quot;matricules&quot;&gt;\r\n/// &lt;returns&gt;&lt;/returns&gt;\r\npublic JArray InformationsAD(String username, String password, String[] matricules) \r\n{\r\n\tJArray informations = new JArray();\r\n\r\n\t// toujours ce fameux nom qui correspond &#xE0; la propri&#xE9;t&#xE9; &quot;matricule&quot; &#xE0; matcher.\r\n\tString matriculeElementName = this.settingsProvider.ApplicationSettings.ADSettings.MatriculeElementName;\r\n\t// une liste de &quot;propri&#xE9;t&#xE9;s&quot; AD &#xE0; retourner pour chaque utilisateur (matricule trouv&#xE9;) (ex: &quot;userId;telephone;mail;...&quot;).\r\n\tString expectedElementsNames = this.settingsProvider.ApplicationSettings.ADSettings.InformationsElementsNames;\r\n\r\n\tif(\r\n\t\tString.IsNullOrEmpty(matriculeElementName) \r\n\t\t|| \r\n\t\tString.IsNullOrEmpty(expectedElementsNames)\r\n\t)\r\n\t{\r\n\t\tthrow new ConfigurationException(&quot;Web.config : AD informations (matricules or expectedElementsNames) empty.&quot;);\r\n\t}\r\n\r\n\ttry\r\n\t{\r\n\t\tusing (DirectoryEntry de = new DirectoryEntry(this.ADConnection, username, password))\r\n\t\t{\r\n\t\t\t// Bind to the native AdsObject to force authentication.\r\n\t\t\tObject obj = de.NativeObject;\r\n\t\t\tDirectorySearcher ds = new DirectorySearcher(de);\r\n\r\n\t\t\tds.SearchRoot = de;\r\n\t\t\tds.Filter = this.GenerateFilterOR(matriculeElementName, matricules);\r\n\r\n\t\t\tSearchResultCollection results = ds.FindAll();\r\n\r\n\t\t\tif (results.Count &gt; 0)\r\n\t\t\t{\r\n\t\t\t\tString[] expectedSplit = expectedElementsNames.Split(&apos;;&apos;);\r\n\t\t\t\tforeach (SearchResult result in results)\r\n\t\t\t\t{\r\n\t\t\t\t\t// le Json object est dynamique !\r\n\t\t\t\t\tJObject jsonItem = new JObject();\r\n\r\n\t\t\t\t\t// add only if one or more properties matched\r\n\t\t\t\t\tBoolean state = false;\r\n\t\t\t\t\tforeach (String propKey in expectedSplit)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tResultPropertyValueCollection value = result.Properties[propKey];\r\n\t\t\t\t\t\tif (value.Count &gt; 0)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t// Ajout d&apos;une nouvelle propri&#xE9;t&#xE9; pour le Json Object courant. \r\n\t\t\t\t\t\t\t// L&apos;utilsateur suivant n&apos;aura peut &#xEA;tre pas la propri&#xE9;t&#xE9; demand&#xE9; mais &#xE7;a ne posera aucun probl&#xE8;me.\r\n\t\t\t\t\t\t\tjsonItem.Add(propKey, value[0].ToString());\r\n\t\t\t\t\t\t\tstate = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (state == true)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tinformations.Add(jsonItem);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tcatch (Exception ex)\r\n\t{\r\n\t\tthrow new UnknowUserException(&quot;AD connection problem. &quot; + ex.Message);\r\n\t}\r\n\r\n\treturn informations;\r\n}\t\r\n\t\t\t</prism-component>\r\n\t\t</p>\r\n\t"},"en":{"title":"C# : Active Directory interrogation &amp; intro to dynamic object with JObject","summary":"\r\n\t\t<p>\r\n\t\t\tI need to create an API able to &quot;authenticate&quot; with an AD.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tFor this, I use <a href=\"https://msdn.microsoft.com/en-US/library/system.directoryservices(v=vs.110).aspx\" target=\"_blank\"><b>System.DirectoryServices</b></a>.\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tI need to create an API able to &quot;authenticate&quot; with an AD.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tFor this, I use <a href=\"https://msdn.microsoft.com/en-US/library/system.directoryservices(v=vs.110).aspx\" target=\"_blank\"><b>System.DirectoryServices</b></a>.\r\n\t\t</p>\r\n\t\t<h2>Main Idea</h2>\r\n\t\t<p>\r\n\t\t\tEach user give their username &amp; password, i need to check if they are able to open the AD.\r\n\t\t\tI control too, if they exist in AD.\r\n\t\t</p>\r\n\t\t<h2>The Code</h2>\r\n\t\t<p>\r\n\t\t\tSample :\r\n\t\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\n/// &lt;summary&gt;\r\n/// &quot;Authenticate&quot; user with AD informations (check if is able to open AD).\r\n/// &lt;/summary&gt;\r\n/// &lt;param name=&quot;username&quot;&gt;\r\n/// &lt;param name=&quot;password&quot;&gt;\r\n/// &lt;returns&gt;AD Value equi matriculeElementName in Web.config&lt;/returns&gt;\r\npublic AuthenticationAD AuthenticateUserAD(String username, String password)\r\n{\r\n\t// I need to be able to match a AD property = &quot;matricule&quot;\r\n\t// i don&apos;t know have the real property name, thus i set property name in the web.config.\r\n\tString matriculeElementName = this.settingsProvider.ApplicationSettings.ADSettings.MatriculeElementName;\r\n\t\r\n\t// custom class with &apos;Exist&apos; &amp; &apos;Id&apos; properties.\r\n\tAuthenticationAD auth = new AuthenticationAD { Exist = false };\r\n\t\r\n\ttry\r\n\t{\r\n\t\t// attempt to open AD with username/pass combo.\r\n\t\tusing (DirectoryEntry de = new DirectoryEntry(this.ADConnection, username, password))\r\n\t\t{\r\n\t\t\t// Bind to the native AdsObject to force authentication.\r\n\t\t\tObject obj = de.NativeObject;\r\n\t\t\tDirectorySearcher ds = new DirectorySearcher(de);\r\n\r\n\t\t\tds.SearchRoot = de;\r\n\t\t\t// sAMAccountName = domain username.\r\n\t\t\tds.Filter = &quot;(sAMAccountName=&quot; + username + &quot;)&quot;;\r\n\r\n\t\t\tSearchResult result = ds.FindOne();\r\n\r\n\t\t\tif (result != null)\r\n\t\t\t{\r\n\t\t\t\tauth.Exist = true;\r\n\t\t\t\t\r\n\t\t\t\t// Attempt to get the &quot;matricule&quot; AD property value.\r\n\t\t\t\tResultPropertyValueCollection value = result.Properties[matriculeElementName];\r\n\t\t\t\tif (value.Count &gt; 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tauth.Id = value[0].ToString();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t// no user with this username\r\n\t\t\t\tauth.Exist = false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tcatch (Exception ex)\r\n\t{\r\n\t\tthrow new UnknowUserException(&quot;AD connection problem. &quot; + ex.Message);\r\n\t}\r\n\r\n\treturn auth;\r\n}\r\n\t\t\t</prism-component>\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tWith C# you are able to create a dynamic object. \r\n\t\t\tThis sample method gets back for a &quot;matricule&quot; a list of values for specifics AD properties. \r\n\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\n/// &lt;summary&gt;\r\n/// Return for specific user matricules AD informations.\r\n/// &lt;/summary&gt;\r\n/// &lt;param name=&quot;username&quot;&gt;\r\n/// &lt;param name=&quot;password&quot;&gt;\r\n/// &lt;param name=&quot;matricules&quot;&gt;\r\n/// &lt;returns&gt;&lt;/returns&gt;\r\npublic JArray InformationsAD(String username, String password, String[] matricules) \r\n{\r\n\tJArray informations = new JArray();\r\n\r\n\t// Always match the famous &quot;matricule&quot; property.\r\n\tString matriculeElementName = this.settingsProvider.ApplicationSettings.ADSettings.MatriculeElementName;\r\n\t// return a list of AD properties (ex: &quot;userId;telephone;mail;...&quot;).\r\n\tString expectedElementsNames = this.settingsProvider.ApplicationSettings.ADSettings.InformationsElementsNames;\r\n\r\n\tif(\r\n\t\tString.IsNullOrEmpty(matriculeElementName) \r\n\t\t|| \r\n\t\tString.IsNullOrEmpty(expectedElementsNames)\r\n\t)\r\n\t{\r\n\t\tthrow new ConfigurationException(&quot;Web.config : AD informations (matricules or expectedElementsNames) empty.&quot;);\r\n\t}\r\n\r\n\ttry\r\n\t{\r\n\t\tusing (DirectoryEntry de = new DirectoryEntry(this.ADConnection, username, password))\r\n\t\t{\r\n\t\t\t// Bind to the native AdsObject to force authentication.\r\n\t\t\tObject obj = de.NativeObject;\r\n\t\t\tDirectorySearcher ds = new DirectorySearcher(de);\r\n\r\n\t\t\tds.SearchRoot = de;\r\n\t\t\tds.Filter = this.GenerateFilterOR(matriculeElementName, matricules);\r\n\r\n\t\t\tSearchResultCollection results = ds.FindAll();\r\n\r\n\t\t\tif (results.Count &gt; 0)\r\n\t\t\t{\r\n\t\t\t\tString[] expectedSplit = expectedElementsNames.Split(&apos;;&apos;);\r\n\t\t\t\tforeach (SearchResult result in results)\r\n\t\t\t\t{\r\n\t\t\t\t\t// Dynamic Json object !\r\n\t\t\t\t\tJObject jsonItem = new JObject();\r\n\r\n\t\t\t\t\t// add only if one or more properties matched\r\n\t\t\t\t\tBoolean state = false;\r\n\t\t\t\t\tforeach (String propKey in expectedSplit)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tResultPropertyValueCollection value = result.Properties[propKey];\r\n\t\t\t\t\t\tif (value.Count &gt; 0)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t// Add new property for the current Json Object. \r\n\t\t\t\t\t\t\t// even if the next &quot;user&quot; doesn&apos;t have this property it&apos;s can&apos;t be a problem.\r\n\t\t\t\t\t\t\tjsonItem.Add(propKey, value[0].ToString());\r\n\t\t\t\t\t\t\tstate = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (state == true)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tinformations.Add(jsonItem);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tcatch (Exception ex)\r\n\t{\r\n\t\tthrow new UnknowUserException(&quot;AD connection problem. &quot; + ex.Message);\r\n\t}\r\n\r\n\treturn informations;\r\n}\t\r\n\t\t\t</prism-component>\r\n\t\t</p>\r\n\t"}},{"id":16,"publication_date":1475625600000,"img":"/blog/files/img/sharepoint-sparta.jpg","img_alt":"https://cdn.meme.am/instances/54901502.jpg","fr":{"title":"Sharepoint : passer d&apos;un Site d&apos;&#xE9;quipe &#xE0; un site de publication","summary":"\r\n\t\t<p>\r\n\t\t\tLe <i>site d&apos;&#xE9;quipe</i> &#xE0; certaines limitations que le <i>site de publication</i> n&apos;a pas. En particulier tout ce qui rend possible la personnalisation des pages.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<b>Que faut-il faire pour &quot;transformer&quot; son site d&apos;&#xE9;quipe en site de publication ?</b>\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tLe <i>site d&apos;&#xE9;quipe</i> &#xE0; certaines limitations que le <i>site de publication</i> n&apos;a pas. En particulier tout ce qui rend possible la personnalisation des pages.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<b>Que faut-il faire pour &quot;transformer&quot; son site d&apos;&#xE9;quipe en site de publication ?</b>\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tIl faut se rendre dans les param&#xE8;tres au niveau de la collection de sites et du site pour g&#xE9;rer des &quot;fonctionnalit&#xE9;s&quot;.\r\n\t\t</p>\r\n\t\t<ul>\r\n\t\t\t<li>/_layouts/ManageFeatures.aspx?Scope=Site (collection de sites) : activer la fonctionnalit&#xE9; &quot;Infrastructure de publication Sharepoint Server&quot;</li>\r\n\t\t\t<li>/_layouts/ManageFeatures.aspx (site) : activer la fonctionnalit&#xE9; &quot;Publication Sharepoint Server&quot;</li>\r\n\t\t</ul>\r\n\t\t<p>\r\n\t\t\tVous aurez entre autres la possibilit&#xE9; de g&#xE9;rer vos master/layout comme bon vous semble.\r\n\t\t</p>\r\n\t"},"en":{"title":"Sharepoint : Team Site to Publication Site","summary":"\r\n\t\t<p>\r\n\t\t\tToo much limitations with a <i>Team Site</i> ? How to personnaligrze masterpage or layouts ?\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<b>How to add &quot;Publication Site&quot; features to a &quot;Team Site&quot; ?</b>\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tToo much limitations with <i>Team Site</i> ? How to personnalize masterpage or layouts ?\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<b>How to add the &quot;Publication Site&quot; features to a &quot;Team Site&quot; ?</b>\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tYou need to go to settings of your Sites Collection and your site.\r\n\t\t</p>\r\n\t\t<ul>\r\n\t\t\t<li>/_layouts/ManageFeatures.aspx?Scope=Site (Sites Collection) : activate this feature &quot;Office SharePoint Server Publishing Infrastructur&quot;</li>\r\n\t\t\t<li>/_layouts/ManageFeatures.aspx (Site) : active this feature &quot;Office SharePoint Server Publishing&quot;</li>\r\n\t\t</ul>\r\n\t\t<p>\r\n\t\t\tIt&apos;s time to customize your master &amp; layouts !\r\n\t\t</p>\r\n\t"}},{"id":15,"publication_date":1472601600000,"img":"/blog/files/img/simple-hello-word.jpg","img_alt":"http://s2.quickmeme.com/img/16/16ee02d6facf514ce07fba9a17cc3404b2fd7c56a5e8e5df869c12df0983914e.jpg","fr":{"title":"Node JS - cheerio.js, commander.js &amp;&amp; grunt-execute","summary":"\r\n\t\t<p>\r\n\t\t\tPour r&#xE9;aliser un petit tool en lignes de commandes Node (celui qui permet de &quot;convertir&quot; mes posts) \r\n\t\t\tj&apos;ai utilis&#xE9; des libs bien sympathiques.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tPetit tour de trois libs :\r\n\t\t\t<ul>\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<b>cheerio</b>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<b>commander</b>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<b>grunt-execute</b>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tPour r&#xE9;aliser un petit tool en lignes de commandes Node (celui qui permet de &quot;convertir&quot; mes posts) \r\n\t\t\tj&apos;ai utilis&#xE9; des libs bien sympathiques.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tPetit tour de trois libs :\r\n\t\t\t<ul>\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<b>cheerio</b>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<b>commander</b>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<b>grunt-execute</b>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</p>\r\n\t\t\r\n\t\t<h2>Cheerio.js <a href=\"https://github.com/cheeriojs/cheerio\"><i class=\"fa fa-github-square\" aria-hidden=\"true\"></i>\r\n lien</a></h2>\r\n\t\t<p>\r\n\t\t\tRien &#xE0; voir avec des c&#xE9;r&#xE9;ales, l&#xE0; on parle d&apos;une lib permettant d&apos;utiliser &quot;jQuery&quot; c&#xF4;t&#xE9; back.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tPour &quot;cr&#xE9;er mes posts&quot; j&apos;utilise un script js (exec par node) pour &quot;compiler/convertir&quot; tous les posts en un gros fichier &apos;json&apos;.\r\n\t\t\tChacun de mes posts sont r&#xE9;dig&#xE9;s en HTML avec une structure particuli&#xE8;re (data-annotation).\r\n\t\t\tLe script stream le contenu d&apos;un fichier HTML et avec Cheerio je peux r&#xE9;cup&#xE9;rer les parties que je souhaite avec la syntaxe jQuery.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tMon fichier &apos;post.html&apos; :\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<prism-component class=\"language-markup line-numbers\">\r\n&lt;div data-model=&quot;publication_date&quot;&gt;08-31-2016&lt;/div&gt;\r\n\r\n&lt;div data-lang=&quot;fr&quot;&gt;\r\n\t&lt;div data-model=&quot;title&quot;&gt;Node JS - cheerio.js, commander.js &amp;&amp; grunt-execute&lt;/div&gt;\r\n&lt;/div&gt;\r\n\t\t\t</prism-component>\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tMon script node :\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<prism-component class=\"language-javascript line-numbers\">\r\nvar $ = cheerio.load(htmlFilePath);\r\n\r\nvar jsonPost = {\r\n\tpublication_date: new Date($(&apos;[data-model=&quot;publication_date&quot;]&apos;).html()).getTime(),\r\n\tfr: {\r\n\t\ttitle: $(&apos;[data-lang=&quot;fr&quot;] [data-model=&quot;title&quot;]&apos;).html(),\r\n\t}\r\n};\r\n\t\t\t</prism-component>\r\n\t\t</p>\r\n\r\n\t\t<h2>Commander.js <a href=\"https://github.com/tj/commander.js/\"><i class=\"fa fa-github-square\" aria-hidden=\"true\"></i>\r\n lien</a></h2>\r\n\t\t<p>\r\n\t\t\tCe m&#xEA;me script &#xE9;tait un peu brouillon et j&apos;ai donc souhait&#xE9; l&apos;am&#xE9;liorer.\r\n\t\t\tCommander permet alors d&apos;organiser au mieux son script, de g&#xE9;rer des param&#xE8;tres, g&#xE9;n&#xE9;rer un -help par d&#xE9;faut, ...\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tExemple avec param&#xE8;tres de la cr&#xE9;ation d&apos;un &quot;program&quot; en CLI :\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<prism-component class=\"language-javascript line-numbers\">\r\nprogram\r\n\t.version(&apos;0.0.1&apos;)\r\n\t.option(&apos;-d, --debug&apos;, &apos;Show trace&apos;)\r\n\t.option(&apos;-p --path &lt;string&gt;&apos;, &apos;Specify the posts path&apos;, path, &apos;blog/content/posts/&apos;);\r\n\t\t\t&lt;/string&gt;</prism-component>\r\n\t\t</p>\r\n\r\n\t\t\t\t<h2>Grunt-Execute <a href=\"https://github.com/Bartvds/grunt-execute\"><i class=\"fa fa-github-square\" aria-hidden=\"true\"></i>\r\n lien</a></h2>\r\n\t\t<p>\r\n\t\t\tBon apr&#xE8;s avoir cr&#xE9;&#xE9; mon script,\r\n\t\t\tje voulais que ce dernier soit &#xE9;xecut&#xE9; au milieu d&apos;autres t&#xE2;ches grunt et pour le faire j&apos;ai utilis&#xE9; cette librairie. \r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tExemple du param&#xE8;trage de la t&#xE2;che (il faut bien s&#xE9;parer chacun des param&#xE8;tres) :\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<prism-component class=\"language-javascript line-numbers\">\r\ngrunt.initConfig({\r\n\t[...],\r\n\texecute: {\r\n\t\tpostsConverter: {\r\n\t\t\tsrc: [\r\n\t\t\t\t&apos;cli/posts.converter.js&apos;\r\n\t\t\t],\r\n\t\t\toptions: {\r\n\t\t\t\targs: [\r\n\t\t\t\t\t&apos;convert&apos;, \r\n\t\t\t\t\t&apos;-d&apos;,\r\n\t\t\t\t\t&apos;-p&apos;,\r\n\t\t\t\t\t&apos;blog/content/posts/&apos;\r\n\t\t\t\t],\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n\t\t\t</prism-component>\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tSi vous le souhaitez, l&apos;ensemble du code est disponible <a href=\"https://github.com/aZerato/aZerato.github.io\">ici</a>, \r\n\t\t\tet plus pr&#xE9;cis&#xE9;ment <a href=\"https://github.com/aZerato/aZerato.github.io/blob/master/cli/posts/posts.converter.js\">le script js pour la converstion des posts</a>, \r\n\t\t\tet le <a href=\"https://github.com/aZerato/aZerato.github.io/blob/master/Gruntfile.js\">Gruntfile.js</a>.\r\n\t\t</p>\r\n\t"},"en":{"title":"Node JS - cheerio.js, commander.js &amp;&amp; grunt-execute","summary":"\r\n\t\t<p>\r\n\t\t\tFor a little Node CLI tool i use three cool libraries.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<ul>\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<b>cheerio</b>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<b>commander</b>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<b>grunt-execute</b>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tFor a little Node CLI tool i use three cool libraries.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<ul>\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<b>cheerio</b>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<b>commander</b>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li>\r\n\t\t\t\t\t<b>grunt-execute</b>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</p>\r\n\r\n\t\t\t\t<h2>Cheerio.js <a href=\"https://github.com/cheeriojs/cheerio\"><i class=\"fa fa-github-square\" aria-hidden=\"true\"></i>\r\n link</a></h2>\r\n\t\t<p>\r\n\t\t\tCheerio ? Cereal ? Nop, this lib like &quot;jQuery&quot; for backend.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tFor this website, I use a specific HTML template with <b>data-annotations</b>, for the posts generation.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tSample &apos;post.html&apos; file :\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<prism-component class=\"language-markup line-numbers\">\r\n&lt;div data-model=&quot;publication_date&quot;&gt;08-31-2016&lt;/div&gt;\r\n\r\n&lt;div data-lang=&quot;fr&quot;&gt;\r\n\t&lt;div data-model=&quot;title&quot;&gt;Node JS - cheerio.js, commander.js &amp;&amp; grunt-execute&lt;/div&gt;\r\n&lt;/div&gt;\r\n\t\t\t</prism-component>\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tMy node script for get values :\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<prism-component class=\"language-javascript line-numbers\">\r\nvar $ = cheerio.load(htmlFilePath);\r\n\r\nvar jsonPost = {\r\n\tpublication_date: new Date($(&apos;[data-model=&quot;publication_date&quot;]&apos;).html()).getTime(),\r\n\tfr: {\r\n\t\ttitle: $(&apos;[data-lang=&quot;fr&quot;] [data-model=&quot;title&quot;]&apos;).html(),\r\n\t}\r\n};\r\n\t\t\t</prism-component>\r\n\t\t</p>\r\n\r\n\t\t<h2>Commander.js <a href=\"https://github.com/tj/commander.js/\"><i class=\"fa fa-github-square\" aria-hidden=\"true\"></i>\r\n link</a></h2>\r\n\t\t<p>\r\n\t\t\tTo improve my CLI tool I add &apos;commander.js&apos;, with, you can have parameters management, automatic -help generation, ...\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tSample with params :\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<prism-component class=\"language-javascript line-numbers\">\r\nprogram\r\n\t.version(&apos;0.0.1&apos;)\r\n\t.option(&apos;-d, --debug&apos;, &apos;Show trace&apos;)\r\n\t.option(&apos;-p --path &lt;string&gt;&apos;, &apos;Specify the posts path&apos;, path, &apos;blog/content/posts/&apos;);\r\n\t\t\t&lt;/string&gt;</prism-component>\r\n\t\t</p>\r\n\r\n\t\t\t\t<h2>Grunt-Execute <a href=\"https://github.com/Bartvds/grunt-execute\"><i class=\"fa fa-github-square\" aria-hidden=\"true\"></i>\r\n link</a></h2>\r\n\t\t<p>\r\n\t\t\tAfter that, i would to exec my new node script between some others grunt tasks. \r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tSample task config for my script (split each params !) :\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<prism-component class=\"language-javascript line-numbers\">\r\ngrunt.initConfig({\r\n\t[...],\r\n\texecute: {\r\n\t\tpostsConverter: {\r\n\t\t\tsrc: [\r\n\t\t\t\t&apos;cli/posts.converter.js&apos;\r\n\t\t\t],\r\n\t\t\toptions: {\r\n\t\t\t\targs: [\r\n\t\t\t\t\t&apos;convert&apos;, \r\n\t\t\t\t\t&apos;-d&apos;,\r\n\t\t\t\t\t&apos;-p&apos;,\r\n\t\t\t\t\t&apos;blog/content/posts/&apos;\r\n\t\t\t\t],\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n});\r\n\t\t\t</prism-component>\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tThe complete code is <a href=\"https://github.com/aZerato/aZerato.github.io\">here</a>, \r\n\t\t\tthe <a href=\"https://github.com/aZerato/aZerato.github.io/blob/master/cli/posts/posts.converter.js\">posts.converter.js script</a>, \r\n\t\t\tand the <a href=\"https://github.com/aZerato/aZerato.github.io/blob/master/Gruntfile.js\">Gruntfile.js</a>.\r\n\t\t</p>\r\n\t"}},{"id":14,"publication_date":1472515200000,"img":"/blog/files/img/errors-futurama.jpg","img_alt":"http://s2.quickmeme.com/img/a4/a46c4888c9bcd8cd10caba71cd13840d2acb426879304fc42c1a2396cb4eb401.jpg","fr":{"title":"Sharepoint 2007 : Erreur en passant en mode &apos;Edition&apos;","summary":"\r\n\t\t<p>\r\n\t\t\tLorsque l&apos;on passe au mode &apos;Edition&apos; d&apos;une page contenant des webparts &apos;masqu&#xE9;es&apos; vous pouvez rencontrer une erreur.\r\n\t\t\tUne Webpart masqu&#xE9;e avec &apos;<code>this.Visible = false;</code>&apos; peut poser probl&#xE8;me.\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tLorsque l&apos;on passe au mode &apos;Edition&apos; d&apos;une page contenant des webparts &apos;masqu&#xE9;es&apos; vous pouvez rencontrer une erreur.\r\n\t\t\tUne Webpart masqu&#xE9;e avec &apos;<code>this.Visible = false;</code>&apos; peut poser probl&#xE8;me.\r\n\t\t</p>\r\n        <p>\r\n            En utilisant l&apos;astuce d&apos;afficher les erreurs avec la stack trace, on obtenait le message suivant : \r\n\t\t\t&quot;The Visible property cannot be set on Web Part ...  It can only be set on a standalone Web Part.&quot;\r\n\t\t</p>\r\n        <p>\r\n            Donc si vous souhaitez cacher une WP utilisez :\r\n\t\t\t<ul>\r\n\t\t\t\t<li>\r\n\t\t\t\t\t1. <code>this.Style.Add(HtmlTextWriterStyle.Display, &quot;none&quot;);</code>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li>\r\n\t\t\t\t\t2. <code>\r\n\t\t\t\t\t\tPanel container = new Panel();\r\n\t\t\t\t\t\tthis.Controls.Add(container);\r\n\r\n\t\t\t\t\t\tif(why_i_want_hide) {\r\n\t\t\t\t\t\t\tcontainer.Visible = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</code>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t\tJe vote pour la seconde solution. &#x263A;\r\n        </p>\r\n\t"},"en":{"title":"Sharepoint 2007 : Error in Edit page mode","summary":"\r\n\t\t<p>\r\n\t\t\tWhen you switch to &apos;Edit page&apos; mode with hidden webparts you can have an error.\r\n\t\t\tDon&apos;t use &apos;<code>this.Visible = false;</code>&apos;.\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tWhen you switch to &apos;Edit page&apos; mode with hidden webparts you can have an error.\r\n\t\t\tDon&apos;t use &apos;<code>this.Visible = false;</code>&apos;.\r\n\t\t</p>\r\n        <p>\r\n            Use the trick for show error with stack trace. I&apos;ve got this error : \r\n\t\t\t&quot;The Visible property cannot be set on Web Part ...  It can only be set on a standalone Web Part.&quot;\r\n\t\t</p>\r\n        <p>\r\n            If you want hide webpart content :\r\n\t\t\t<ul>\r\n\t\t\t\t<li>\r\n\t\t\t\t\t1. <code>this.Style.Add(HtmlTextWriterStyle.Display, &quot;none&quot;);</code>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li>\r\n\t\t\t\t\t2. <code>\r\n\t\t\t\t\t\tPanel container = new Panel();\r\n\t\t\t\t\t\tthis.Controls.Add(container);\r\n\r\n\t\t\t\t\t\tif(why_i_want_hide) {\r\n\t\t\t\t\t\t\tcontainer.Visible = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</code>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t\tMaybe the best is the second solution. &#x263A;\r\n        </p>\r\n\t"}},{"id":13,"publication_date":1472428800000,"img":"/blog/files/img/expect-tf2.jpg","img_alt":"http://s2.quickmeme.com/img/62/62bb14331b7f4dc7ca0c4ea73f25c2df69361bd2b12425e752b3f55dbad69db2.jpg","fr":{"title":"Sharepoint 2007 : Le contenu de certaine page n&apos;est pas coh&#xE9;rent","summary":"\r\n\t\t<p>\r\n\t\t\tUne fonctionnalit&#xE9; int&#xE9;ressante de Sharepoint 2007 est la gestion de la mise en cache de certains contenus HTML.\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tUne fonctionnalit&#xE9; int&#xE9;ressante de Sharepoint 2007 est la gestion de la mise en cache de certains contenus HTML.\r\n\t\t</p>\r\n        <p>\r\n            Pour cela, il faut se rendre sur la page d&apos;administration de votre site (_layouts/settings.aspx). Puis dans la partie &apos;Cache de sortie &quot;collection de site&quot;&apos; et &apos;Cache de sortie&apos;. \r\n            Ce syst&#xE8;me de cache est utile pour du contenu statique. \r\n            Comme il n&apos;est param&#xE9;trable que par rapport &#xE0; un site, il faut s&#xE9;parer via sous sites le contenu dynamique du statique.\r\n\t\t</p>\r\n        <p>\r\n            Donc attention, si vous activez cette fonctionnalit&#xE9; sur du contenu dynamique vous risquez de faire afficher du contenu non d&#xE9;sir&#xE9;. \r\n            Comme l&apos;objectif de cette option et d&apos;&#xE9;viter de g&#xE9;n&#xE9;rer &#xE0; chaque fois la page HTML demand&#xE9;e ; cette derni&#xE8;re est mise en cache \r\n            pour &#xEA;tre imm&#xE9;diatement transf&#xE9;r&#xE9;e aux utilisateurs qui la demande. Seulement, si nous sommes avec du contenu dynamique, \r\n            il est possible que &#xE7;a soit une version du contenu dynamique non &#xE0; jour (voir l&apos;affichage de donn&#xE9;es sensibles) qui soit mis en cache \r\n            et transmis par la suite.\r\n        </p>\r\n\t"},"en":{"title":"Sharepoint 2007 : Incorrect HTML content","summary":"\r\n\t\t<p>\r\n\t\t\tThe &apos;site output cache&apos; an interesting Sharepoint feature. It&apos;s used for put in cache the HTML content.\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tThe &apos;site output cache&apos; an interesting Sharepoint feature. It&apos;s used for put in cache the HTML content.\r\n\t\t</p>\r\n        <p>\r\n            Go to the Sharepoint administration (_layouts/settings.aspx) and check &apos;Site output cache&apos; and &apos;Site collection output cache&apos;. \r\n            This feature depends from site scope, you need to separate the dynamic content from static with sub sites.\r\n        </p>\r\n        <p>\r\n            Be careful, if you activate this feature for dynamic content you can have some problems.\r\n            This option is to limit server treatments, thus Sharepoint save in the cache the generated HTML. \r\n            With dynamic content, you can see an outdated post or a form with incorrect values.\r\n        </p>\r\n\t"}},{"id":12,"publication_date":1471996800000,"img":"/blog/files/img/context-please.jpg","img_alt":"http://stpo.free.fr/forum-junk/context-please.jpg","fr":{"title":"ASP .NET - HttpHandler &amp; HttpContext / Session","summary":"\r\n\t\t<p>\r\n\t\t\tLors d&apos;une requ&#xEA;te ajax sur un <i>HttpHandler</i> je n&apos;avais pas acc&#xE8;s c&#xF4;t&#xE9; ASP &#xE0; mon objet <i>Session</i>. \r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tLors d&apos;une requ&#xEA;te ajax sur un <i>HttpHandler</i> je n&apos;avais pas acc&#xE8;s c&#xF4;t&#xE9; ASP &#xE0; mon objet <i>Session</i>.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tLe HttpHandler par d&#xE9;faut ne se base pas sur le m&#xEA;me <b>Context</b> que le reste de l&apos;application, il est ind&#xE9;pendant. \r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tPour qu&apos;il h&#xE9;rite de la m&#xEA;me <b>Session</b>, il faut faire h&#xE9;riter notre HttpHandler de : <a href=\"https://msdn.microsoft.com/fr-fr/library/system.web.sessionstate.irequiressessionstate(v=vs.110).aspx\"><b>IRequiresSessionState</b></a>\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<code>\r\n\t\t\t\tpublic class MyHandler : IHttpHandler, IRequiresSessionState\r\n\t\t\t</code>\r\n\t\t</p>\r\n\t"},"en":{"title":"ASP .NET - HttpHandler &amp; HttpContext / Session","summary":"\r\n\t\t<p>\r\n\t\t\tMy ASP .NET <i>Session</i> object is null in my <i>HttpHandler</i>.\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tMy ASP .NET <i>Session</i> object is null in my <i>HttpHandler</i>.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tInitially, the HttpHandler doesn&apos;t use the same <b>Context</b> than the application.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tFor using the same <i>Session</i> object than the entire application, your HttpHandler has need to inherit from <a href=\"https://msdn.microsoft.com/en-us/library/system.web.sessionstate.irequiressessionstate(v=vs.110).aspx\"><b>IRequiresSessionState</b></a>.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<code>\r\n\t\t\t\tpublic class MyHandler : IHttpHandler, IRequiresSessionState\r\n\t\t\t</code>\r\n\t\t</p>\r\n\t"}},{"id":11,"publication_date":1471910400000,"img":"/blog/files/img/dynamic-batman.jpg","img_alt":"https://cdn.meme.am/instances/500x/38545570.jpg","fr":{"title":"ASP.NET - Changer dynamiquement la valeur d&apos;une propri&#xE9;t&#xE9; du web.config &amp; le statut d&apos;un fichier TFS [debug only]","summary":"\r\n\t\t<p>\r\n\t\t\tPour une raison certaine, dans un context de debug, on souhaitait modifier dynamiquement la valeur d&apos;une propri&#xE9;t&#xE9; du web.config.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t[c&apos;est une vieille note &amp; c&apos;&#xE9;tait pour debug !!! &#x263A;]\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tPour une raison certaine, dans un context de debug, on souhaitait modifier dynamiquement la valeur d&apos;une propri&#xE9;t&#xE9; du web.config.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tNous avions une option super admin sur une application web (un vieux machin), et il fallait ajouter un menu pour switcher de user pour voir facilement les diff&#xE9;rents affichages des pages.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tBien &#xE9;videmment, notre code &#xE9;tait versionn&#xE9; avec TFS, et donc il &#xE9;tait n&#xE9;cessaire que l&apos;on force le changement &#xE0; &apos;modifi&#xE9;&apos; du web.config, pour &#xEA;tre pris en compte.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tIl faut ajouter ces d&#xE9;pendances &#xE0; notre projet (le chemin peut varier selon les environnements) :\r\n\t\t\t<ul>\r\n\t\t\t\t<li>\r\n\t\t\t\t\td:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\Common7\\IDE\\ReferenceAssemblies\\v2.0\\Microsoft.TeamFoundation.dll\r\n\t\t\t\t</li>\r\n\t\t\t\t<li>\r\n\t\t\t\t\td:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\Common7\\IDE\\ReferenceAssemblies\\v2.0\\Microsoft.TeamFoundation.Client.dll\r\n\t\t\t\t</li>\r\n\t\t\t\t<li>\r\n\t\t\t\t\td:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\Common7\\IDE\\ReferenceAssemblies\\v2.0\\Microsoft.TeamFoundation.VersionControl.Client.dll\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tNous avions donc une action dans un controller &apos;Administration&apos; d&#xE9;di&#xE9; :\r\n\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\n/// &lt;summary&gt;\r\n/// Action if you want change dynamically current user.\r\n/// &lt;/summary&gt;\r\n/// &lt;param name=&quot;userrole&quot;&gt;Lastname of user that you want.\r\n/// &lt;returns&gt;Redirection to Homepage or restart app.&lt;/returns&gt;\r\npublic ActionResult ChangeUser(string userrole)\r\n{\r\n\tDomain.Entities.Security.User fuser = FUsers.FList.SingleOrDefault(fu =&gt; fu.LastName == userrole);\r\n\tif (fuser != null)\r\n\t{\r\n\t\t// Open web.config\r\n\t\tConfiguration configuration = WebConfigurationManager.OpenWebConfiguration(&quot;~&quot;);\r\n\r\n\t\t// Check out for edit in first.\r\n\t\tstring fileName = configuration.FilePath;\r\n\t\tvar workspaceInfo = Workstation.Current.GetLocalWorkspaceInfo(fileName);\r\n\t\tif (workspaceInfo != null)\r\n\t\t{\r\n\t\t\tusing (var server = new TfsTeamProjectCollection(workspaceInfo.ServerUri))\r\n\t\t\t{\r\n\t\t\t\tvar workspace = workspaceInfo.GetWorkspace(server);\r\n\t\t\t\tworkspaceInfo.\r\n\t\t\t\tworkspace.PendEdit(fileName);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Edit value\r\n\t\tAppSettingsSection section = (AppSettingsSection)configuration.GetSection(&quot;appSettings&quot;);\r\n\t\tif (section != null)\r\n\t\t{\r\n\t\t\t// Change dynamically value\r\n\t\t\tsection.Settings[&quot;fakeAppContextUsername&quot;].Value = @&quot;DOMAIN\\&quot; + fuser.LastName;\r\n\t\t\tconfiguration.Save(ConfigurationSaveMode.Full, true);\r\n\t\t\t// Restart application with new web.config (reinit cache, ...)\r\n\t\t\tSystem.Web.HttpRuntime.UnloadAppDomain();\r\n\t\t}\r\n\t}\r\n\r\n\treturn RedirectToAction(&quot;Index&quot;);\r\n}\r\n\t\t\t</prism-component>\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tBon je redis que c&apos;&#xE9;tait pour debug !!! &#x263A;\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tMais, on a pu voir qu&apos;il est impossible de modifier une valeur d&apos;une propri&#xE9;t&#xE9; du web.config sans reload l&apos;application \r\n\t\t\tet que l&apos;on peut modifier le statut d&apos;un fichier versionn&#xE9; sur TFS. \r\n\t\t</p>\r\n\t"},"en":{"title":"ASP.NET - Dynamically change the value of web.config property and the versioned TFS file status [debug only]","summary":"\r\n\t\t<p>\r\n\t\t\tIn debug context, we wanted to change dynamically the value of a web.config property.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t[old note &amp; it&apos;s for debug !!! &#x263A;]\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tIn debug context, we want to change dynamically the value of a web.config property.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tThis request was for an old application. We had a super admin menu and they wanted a menu for switching the current user.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tBy the way, the application used TFS versioning. We needed to change web.config file status before each modification.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tAdd this new references (paths can be different) :\r\n\t\t\t<ul>\r\n\t\t\t\t<li>\r\n\t\t\t\t\td:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\Common7\\IDE\\ReferenceAssemblies\\v2.0\\Microsoft.TeamFoundation.dll\r\n\t\t\t\t</li>\r\n\t\t\t\t<li>\r\n\t\t\t\t\td:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\Common7\\IDE\\ReferenceAssemblies\\v2.0\\Microsoft.TeamFoundation.Client.dll\r\n\t\t\t\t</li>\r\n\t\t\t\t<li>\r\n\t\t\t\t\td:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\Common7\\IDE\\ReferenceAssemblies\\v2.0\\Microsoft.TeamFoundation.VersionControl.Client.dll\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\twe had a dedicated action :\r\n\t\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\n/// &lt;summary&gt;\r\n/// Action if you want change dynamically current user.\r\n/// &lt;/summary&gt;\r\n/// &lt;param name=&quot;userrole&quot;&gt;Lastname of user that you want.\r\n/// &lt;returns&gt;Redirection to Homepage or restart app.&lt;/returns&gt;\r\npublic ActionResult ChangeUser(string userrole)\r\n{\r\n\tDomain.Entities.Security.User fuser = FUsers.FList.SingleOrDefault(fu =&gt; fu.LastName == userrole);\r\n\tif (fuser != null)\r\n\t{\r\n\t\t// Open web.config\r\n\t\tConfiguration configuration = WebConfigurationManager.OpenWebConfiguration(&quot;~&quot;);\r\n\r\n\t\t// Check out for edit in first.\r\n\t\tstring fileName = configuration.FilePath;\r\n\t\tvar workspaceInfo = Workstation.Current.GetLocalWorkspaceInfo(fileName);\r\n\t\tif (workspaceInfo != null)\r\n\t\t{\r\n\t\t\tusing (var server = new TfsTeamProjectCollection(workspaceInfo.ServerUri))\r\n\t\t\t{\r\n\t\t\t\tvar workspace = workspaceInfo.GetWorkspace(server);\r\n\t\t\t\tworkspaceInfo.\r\n\t\t\t\tworkspace.PendEdit(fileName);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Edit value\r\n\t\tAppSettingsSection section = (AppSettingsSection)configuration.GetSection(&quot;appSettings&quot;);\r\n\t\tif (section != null)\r\n\t\t{\r\n\t\t\t// Change dynamically value\r\n\t\t\tsection.Settings[&quot;fakeAppContextUsername&quot;].Value = @&quot;DOMAIN\\&quot; + fuser.LastName;\r\n\t\t\tconfiguration.Save(ConfigurationSaveMode.Full, true);\r\n\t\t\t// Restart application with new web.config (reinit cache, ...)\r\n\t\t\tSystem.Web.HttpRuntime.UnloadAppDomain();\r\n\t\t}\r\n\t}\r\n\r\n\treturn RedirectToAction(&quot;Index&quot;);\r\n}\r\n\t\t\t</prism-component>\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tIt&apos;s only for debug !!! &#x263A;\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tTo conclude, it&apos;s impossible to change the value of a web.config property dynamically without reload entire the app \r\n\t\t\tand you can change a file versioned status with TFS.. \r\n\t\t</p>\r\n\t"}},{"id":9,"publication_date":1469059200000,"img":"/blog/files/img/404.jpg","img_alt":"http://www.celebritymemes.com/templates/wlol_v1/images/404.jpg","fr":{"title":"Sharepoint 2013 - &quot;File not found&quot; sur une DLL du projet","summary":"\r\n\t\t<p>\r\n\t\t\tTravaillant sur une solution en multi projets sur du Sharepoint 2013, au moment du build sur le projet principal, on obtenait une telle erreur. \r\n\t\t\tCe projet &#xE9;tait pourtant bien r&#xE9;f&#xE9;renc&#xE9; dans le main project.\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tTravaillant sur une solution en multi projets sur du Sharepoint 2013, au moment du build sur le projet principal, on obtenait une telle erreur.\r\n\t\t\tCe projet &#xE9;tait pourtant bien r&#xE9;f&#xE9;renc&#xE9; dans le main project.  \r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tSe rendre sur ce fameux &apos;main project&apos;, se rendre dans &apos;package &gt; package.package&apos;. L&apos;ouvrir et se rendre dans l&apos;onglet &apos;Advanced &gt; Add &gt; Add assembly from project&apos; et ajouter le projet correspondant &#xE0; la DLL manquante.\r\n\t\t</p>\r\n\t"},"en":{"title":"Sharepoint 2013 - Internal DLL project : &quot;File not found&quot;","summary":"\r\n\t\t<p>\r\n\t\t\tI&apos;ve worked on Sharepoint 2013 multi projects solution. At build time, i&apos;ve got an error &apos;file not found&apos; about another project in the same solution, \r\n\t\t\tbut that was referenced. \r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tI&apos;ve worked on Sharepoint 2013 multi projects solution. At build time, i&apos;ve got an error &apos;file not found&apos; about another project in the same solution, \r\n\t\t\tbut that was referenced. \r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tGo to the main project, open &apos;package &gt; package.package&apos; file. Find the &apos;Advanced&apos; tab, go to &apos;Add &gt; Add assembly from project&apos;. Add missing project.\r\n\t\t</p>\r\n\t"}},{"id":10,"publication_date":1469059200000,"img":"/blog/files/img/routing-table.jpg","img_alt":"http://s2.quickmeme.com/img/e6/e68245cc9b5e1ff15f103c7bd5a909d87f415c6433780e8e1442d8c93d6a03e2.jpg","fr":{"title":"Sharepoint - erreur &quot;SqlSessionState&quot;","summary":"\r\n\t\t<p>\r\n\t\t\tJ&apos;ai eu cette erreur en ouvrant un site Sharepoint directement depuis l&apos;IP du serveur. Aucune r&#xE8;gle de routing/r&#xE9;solution de nom &#xE9;tait en place.\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tJ&apos;ai eu cette erreur en ouvrant un site Sharepoint directement depuis l&apos;IP du serveur. Aucune r&#xE8;gle de routing/r&#xE9;solution de nom &#xE9;tait en place.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tComme un site Sharepoint (2007 pour le coup) est bas&#xE9; sur son hostname, il y a eu des probl&#xE8;mes de routing, des fichiers devaient &#xEA;tre\r\n\t\t\tcharg&#xE9;s depuis &apos;http://mon-site-dev&apos; et non depuis http://IP.DU.SERVER:80. \r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tDonc il a &#xE9;t&#xE9; n&#xE9;cessaire d&apos;ajouter une r&#xE8;gle au niveau du serveur de DNS, que l&apos;on a du ajouter par la suite dans SP. Pour cela, il faut\r\n\t\t\tse rendre dans les param&#xE8;tres de la ferme : &apos;/_admin/AlternateUrlCollections.aspx&apos;.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tVous allez arriver sur la page de configuration &apos;Alternate Access Mapping&apos;. \r\n\t\t\t<ul>\r\n\t\t\t\t<li>Le hostname initial du site param&#xE9;tr&#xE9; lors de la cr&#xE9;ation de la webapp/site : &apos;http://mon-site-dev&apos;</li>\r\n\t\t\t\t<li>La r&#xE8;gle DNS &#xE9;tait bas&#xE9; sur le hostname : &apos;http://mon-site.dev&apos;</li>\r\n\t\t\t</ul>\r\n\t\t\tIl faut alors cliquer sur &apos;Edit Publics URLs&apos;, choisir ensuite &apos;Alternate Access Mapping Collection&apos; et s&#xE9;lectionner le site : &apos;http://mon-site-dev&apos;.\r\n\t\t\tEt vous lui ajouter une &apos;Custom&apos; url correspondant &#xE0; la r&#xE8;gle pr&#xE9;c&#xE9;dente soit &#xE9;gale &#xE0; &apos;http://mon-site.dev&apos;.\r\n\t\t</p>\r\n\t"},"en":{"title":"Sharepoint - erreur &quot;SqlSessionState&quot;","summary":"\r\n\t\t<p>\r\n\t\t\tI&apos;ve this error when i attempt to open directly a Sharepoint website with server&apos;s ip. No resolution name / routing rules are set.\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tI&apos;ve this error when i attempt to open directly a Sharepoint website with server&apos;s ip. No resolution name / routing rules are set.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tA Sharepoint (in this case 2007) website is based on the hostname. Some files are loaded from &apos;http://hostname-my-site/&apos; but i&apos;m use &apos;http://172.12.0.1&apos;.\r\n\t\t</p>\r\n\t\t\tAdd new rule to DNS server. After, go to farm settings : &apos;/_admin/AlternateUrlCollections.aspx&apos;.\r\n\t\t<p></p>\r\n\t\t<p>\r\n\t\t\tWelcome to &apos;Alternate Access Mapping&apos; page ! \r\n\t\t\t<ul>\r\n\t\t\t\t<li>The original setted hostname (at webapp/site creation) : &apos;http://hostname-my-site/&apos;</li>\r\n\t\t\t\t<li>La r&#xE8;gle DNS &#xE9;tait bas&#xE9; sur le hostname : &apos;http://hostname-my.site/&apos;</li>\r\n\t\t\t</ul>\r\n\t\t\t&apos;Edit Publics URLs&apos;, then choose &apos;Alternate Access Mapping Collection&apos;, and select : &apos;http://hostname-my-site&apos;.\r\n\t\t\tAdd &apos;Custom&apos; url &apos;http://hostname-my.site&apos;.\r\n\t\t</p>\r\n\t"}},{"id":8,"publication_date":1468972800000,"img":"/blog/files/img/chrome-starwars.jpg","img_alt":"http://s2.quickmeme.com/img/f7/f774e72967337db5c0f361e23b6135877bb8962a711b997561d66097da146e51.jpg","fr":{"title":"Chrome / HTML : le favicon ne s&apos;affiche pas","summary":"\r\n\t\t<p>\r\n\t\t\tMon Favicon s&apos;affiche tr&#xE8;s bien sur les navigateurs comme Firefox, il ne voulait pas s&apos;afficher sur Chrome.\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tMon Favicon s&apos;affiche tr&#xE8;s bien sur les navigateurs comme Firefox, il ne voulait pas s&apos;afficher sur Chrome.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tApr&#xE8;s recherches et tests, j&apos;ai remarqu&#xE9; que la balise <code>&lt;head&gt;&lt;/head&gt;</code> &#xE9;tait vide sur Chrome. \r\n\t\t\tPour v&#xE9;rifier j&apos;ai donc pass&#xE9; ma master &#xE0; la validation <a href=\"https://validator.w3.org/nu/#textarea\" target=\"_blank\">W3C</a>.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tDans mon cas, la balise <code>&lt;html&gt;&lt;/html&gt;</code> n&apos;avait pas l&apos;attribut &apos;lang&apos;.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tExemple avec mon cas, masterpage Sharepoint 2007 :\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<prism-component class=\"language-markup line-numbers\">\r\n&lt;html dir=&quot;&lt;%$Resources:wss,multipages_direction_dir_value%&gt;&quot; runat=&quot;server&quot; xmlns:o=&quot;urn:schemas-microsoft-com:office:office&quot; __expr-val-dir=&quot;ltr&quot; lang=&quot;fr-FR&quot;&gt;\r\n\t\t\t&lt;/html&gt;</prism-component>\r\n\t\t</p>\r\n\t"},"en":{"title":"Chrome / HTML : favicon not showing up","summary":"\r\n\t\t<p>\r\n\t\t\tMy favicon is showing up on Firefox tab, it&apos;s not on Chrome\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tMy favicon is showing up on Firefox tab, it&apos;s not on Chrome\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tThe <code>&lt;head&gt;&lt;/head&gt;</code> tag is empty on Chrome. \r\n\t\t\tI check my masterpage code with <a href=\"https://validator.w3.org/nu/#textarea\" target=\"_blank\">W3C</a> validator.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tIn my case, the <code>&lt;html&gt;&lt;/html&gt;</code> tag doesn&apos;t have the &apos;lang&apos; attribut.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tSample with my Sharepoint 2007 masterpage :\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<prism-component class=\"language-markup line-numbers\">\r\n&lt;html dir=&quot;&lt;%$Resources:wss,multipages_direction_dir_value%&gt;&quot; runat=&quot;server&quot; xmlns:o=&quot;urn:schemas-microsoft-com:office:office&quot; __expr-val-dir=&quot;ltr&quot; lang=&quot;fr-FR&quot;&gt;\r\n\t\t\t&lt;/html&gt;</prism-component>\r\n\t\t</p>\r\n\t"}},{"id":7,"publication_date":1468540800000,"img":"/blog/files/img/bluescreen.gif","img_alt":"http://www.microtext.co.uk/images/registry_error0x00000051.gif","fr":{"title":"Sharepoint 2007 - Windows server 2003 64 bits : probl&#xE8;me &#xE0; l&apos;installation","summary":"\r\n\t\t<p>\r\n\t\t\tMessage d&apos;erreur <b>&apos;This product requires ASP.NET v2.0 ...&apos;</b> alors que ce dernier est bien install&#xE9;. \r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tSe rendre dans &apos;ISS Manager&apos;, dans la partie gauche vous trouvez un dossier &apos;Web Services Extensions&apos;, en cliquant dessus la partie droite change, trouvez le ou les extensions concernant &apos;ASP.NET V2.0&apos; et &apos;autoris&#xE9;e&apos; les (allow).\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tMessage d&apos;erreur <b>&apos;This product requires ASP.NET v2.0 ...&apos;</b> alors que ce dernier est bien install&#xE9;. \r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tSe rendre dans &apos;ISS Manager&apos;, dans la partie gauche vous trouvez un dossier &apos;Web Services Extensions&apos;, en cliquant dessus la partie droite change, trouvez le ou les extensions concernant &apos;ASP.NET V2.0&apos; et &apos;autoris&#xE9;e&apos; les (allow).\r\n\t\t</p>\r\n\t"},"en":{"title":"Sharepoint 2007 - Windows server 2003 64 bits : install problem","summary":"\r\n\t\t<p>\r\n\t\t\tError message <b>&apos;This product requires ASP.NET v2.0 ...&apos;</b> but, it&apos;s already installed.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tGo to the &apos;ISS Manager&apos;, in the left part you can find a &apos;Web Services Extensions&apos; folder. When you click on it, the right part changed. You need to &apos;allow&apos; the different(s) extension(s) &apos;ASP.NET V2.0&apos;.\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tError message <b>&apos;This product requires ASP.NET v2.0 ...&apos;</b> but, it&apos;s already installed.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tGo to the &apos;ISS Manager&apos;, in the left part you can find a &apos;Web Services Extensions&apos; folder. When you click on it, the right part changed. You need to &apos;allow&apos; the different(s) extension(s) &apos;ASP.NET V2.0&apos;.\r\n\t\t</p>\r\n\t"}},{"id":6,"publication_date":1468281600000,"img":"/blog/files/img/safe.jpg","img_alt":"https://media.makeameme.org/created/safe.jpg","fr":{"title":"Sharepoint 2007 - Apr&#xE8;s d&#xE9;ploiement d&apos;une app un bug au lancement affiche &quot;SafeControl / is not Safe&quot;","summary":"\r\n\t\t<p>\r\n\t\t\t- Il faut v&#xE9;rifier si dans &apos;Central Admin&apos; &gt; Operations &gt; &apos;Solution management&apos; : que notre application &apos;.wsp&apos; est bien d&#xE9;ploy&#xE9;e.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t- Au niveau du site : &apos;monsitesharepoint.com/_layouts/settings.aspx&apos; &gt; &apos;Param&#xE8;tres du site&apos; &gt; &apos;Fonctionnalit&#xE9;s de la collection du sites&apos; et d&#xE9;sactivez &amp; r&#xE9;activez les features n&#xE9;cessaires.\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\t- Il faut v&#xE9;rifier si dans &apos;Central Admin&apos; &gt; Operations &gt; &apos;Solution management&apos; : que notre application &apos;.wsp&apos; est bien d&#xE9;ploy&#xE9;e.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t- Au niveau du site : &apos;monsitesharepoint.com/_layouts/settings.aspx&apos; &gt; &apos;Param&#xE8;tres du site&apos; &gt; &apos;Fonctionnalit&#xE9;s de la collection du sites&apos; et d&#xE9;sactivez &amp; r&#xE9;activez les features n&#xE9;cessaires.\r\n\t\t</p>\r\n\t"},"en":{"title":"Sharepoint 2007 - &quot;SafeControl / is not Safe&quot;","summary":"\r\n\t\t<p>\r\n\t\t\t- Check &apos;Central Admin&apos; &gt; Operations &gt; &apos;Solution management&apos; : the app &apos;.wsp&apos; is deployed.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t- Check at site level : &apos;myspwebsite.com/_layouts/settings.aspx&apos; &gt; &apos;Site Collection Administration&apos; &gt; &apos;Site collection features&apos; &amp; deactivate/reactivate features.\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\t- Check &apos;Central Admin&apos; &gt; Operations &gt; &apos;Solution management&apos; : the app &apos;.wsp&apos; is deployed.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t- Check at site level : &apos;myspwebsite.com/_layouts/settings.aspx&apos; &gt; &apos;Site Collection Administration&apos; &gt; &apos;Site collection features&apos; &amp; deactivate/reactivate features.\r\n\t\t</p>\r\n\t"}},{"id":5,"publication_date":1468108800000,"img":"/blog/files/img/security.gif","img_alt":"https://fat.gfycat.com/AromaticUnimportantKid.gif","fr":{"title":"Windows Server 2003 : HTTPS 502","summary":"\r\n\t\t<p>\r\n\t\t\tVous effectuez des requ&#xEA;tes <b>HTTPS</b> mais vous obtenez directement un code d&apos;erreur <b>502</b> ?\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tIl &#xE9;tait n&#xE9;cessaire de requ&#xEA;ter un <b>WebService</b> <i>SSO</i> c&#xF4;t&#xE9; server (pour limiter la plage IP &#xE0; autoriser au niveau du server qui h&#xE9;berge le WS) par code C#. Seulement le code fonctionnant tr&#xE8;s bien sur une machine avec Windows 8, retournait une erreur &quot;System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream&quot; sur le server Windows 2003.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tIl fut n&#xE9;cessaire de faire une mise &#xE0; jour permettant de revoir le syst&#xE8;me d&apos;encryption pour le requ&#xEA;tage HTTPS.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<i><a href=\"https://support.microsoft.com/en-us/kb/948963\">sources</a></i>\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tVous effectuez des requ&#xEA;tes <b>HTTPS</b> mais vous obtenez directement un code d&apos;erreur <b>502</b> ?\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tIl &#xE9;tait n&#xE9;cessaire de requ&#xEA;ter un <b>WebService</b> <i>SSO</i> c&#xF4;t&#xE9; server (pour limiter la plage IP &#xE0; autoriser au niveau du server qui h&#xE9;berge le WS) par code C#. Seulement le code fonctionnant tr&#xE8;s bien sur une machine avec Windows 8, retournait une erreur &quot;System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream&quot; sur le server Windows 2003.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tIl fut n&#xE9;cessaire de faire une mise &#xE0; jour permettant de revoir le syst&#xE8;me d&apos;encryption pour le requ&#xEA;tage HTTPS.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<i><a href=\"https://support.microsoft.com/en-us/kb/948963\">sources</a></i>\r\n\t\t</p>\r\n\t"},"en":{"title":"Windows Server 2003 : HTTPS 502","summary":"\r\n\t\t<p>\r\n\t\t\tAn <b>HTTPS</b> request returns <b>502</b> error.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tFor ip limitation, we need to request a WS without ajax but directly with c#. The request code works successfully on windows 8, but isn&apos;t on the Windows Server 2003. I&apos;ve got this &quot;System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream&quot;.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tA Microsoft update patch HTTPS encryption.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<i><a href=\"https://support.microsoft.com/en-us/kb/948963\">sources</a></i>\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tAn <b>HTTPS</b> request returns <b>502</b> error.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tFor ip limitation, we need to request a WS without ajax but directly with c#. The request code works successfully on windows 8, but isn&apos;t on the Windows Server 2003. I&apos;ve got this &quot;System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream&quot;.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tA Microsoft update patch HTTPS encryption.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<i><a href=\"https://support.microsoft.com/en-us/kb/948963\">sources</a></i>\r\n\t\t</p>\r\n\t"}},{"id":4,"publication_date":1468022400000,"img":"/blog/files/img/sharepoint-grandma.jpg","img_alt":"http://www.manageprojectsonsharepoint.com/wp-content/uploads/2014/03/SharePoint-funny-5.jpg","fr":{"title":"Sharepoint 2007 : probl&#xE8;me cr&#xE9;ation WebApp","summary":"\r\n\t\t<p>\r\n\t\t\tLors de la cr&#xE9;ation d&apos;une <i>WebApp</i> il m&apos;&#xE9;tait impossible de trouver le <b>pool applicatif IIS</b> et son r&#xE9;pertoire web.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tVous pouvez tenter de relancer le service Sharepoint, il semblerait qu&apos;il se m&#xE9;lange un peu les pinceaux.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<code>\r\n\t\t\t\tnet stop &quot;Windows SharePoint Services Timer&quot;\r\n\t\t\t</code>\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<code>\r\n\t\t\t\tnet start &quot;Windows SharePoint Services Timer&quot;\r\n\t\t\t</code>\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tSi &#xE7;a ne r&#xE9;soud rien : <a href=\"http://sharepoint.stackexchange.com/questions/15351/new-web-app-creation-fails-to-create-iis-site-on-secondary-node\">seconde chance</a>\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tLors de la cr&#xE9;ation d&apos;une <i>WebApp</i> il m&apos;&#xE9;tait impossible de trouver le <b>pool applicatif IIS</b> et son r&#xE9;pertoire web.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tVous pouvez tenter de relancer le service Sharepoint, il semblerait qu&apos;il se m&#xE9;lange un peu les pinceaux.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<code>\r\n\t\t\t\tnet stop &quot;Windows SharePoint Services Timer&quot;\r\n\t\t\t</code>\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<code>\r\n\t\t\t\tnet start &quot;Windows SharePoint Services Timer&quot;\r\n\t\t\t</code>\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tSi &#xE7;a ne r&#xE9;soud rien : <a href=\"http://sharepoint.stackexchange.com/questions/15351/new-web-app-creation-fails-to-create-iis-site-on-secondary-node\">seconde chance</a>\r\n\t\t</p>\r\n\t"},"en":{"title":"Sharepoint 2007 : problem WebApp creation","summary":"\r\n\t\t<p>\r\n\t\t\tDuring <i>WebApp</i> creation, I was unable to find <b>the IIS pool</b> &amp; the web folder.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tYou can restart the Sharepoint service, it would seem that Sharepoint is confused.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<code>\r\n\t\t\t\tnet stop &quot;Windows SharePoint Services Timer&quot;\r\n\t\t\t</code>\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<code>\r\n\t\t\t\tnet start &quot;Windows SharePoint Services Timer&quot;\r\n\t\t\t</code>\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<a href=\"http://sharepoint.stackexchange.com/questions/15351/new-web-app-creation-fails-to-create-iis-site-on-secondary-node\">another chance</a>\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tDuring <i>WebApp</i> creation, I was unable to find <b>the IIS pool</b> &amp; the web folder.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tYou can restart the Sharepoint service, it would seem that Sharepoint is confused.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<code>\r\n\t\t\t\tnet stop &quot;Windows SharePoint Services Timer&quot;\r\n\t\t\t</code>\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<code>\r\n\t\t\t\tnet start &quot;Windows SharePoint Services Timer&quot;\r\n\t\t\t</code>\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<a href=\"http://sharepoint.stackexchange.com/questions/15351/new-web-app-creation-fails-to-create-iis-site-on-secondary-node\">another chance</a>\r\n\t\t</p>\r\n\t"}},{"id":3,"publication_date":1467936000000,"img":"/blog/files/img/sharepoint-homer-broken.png","img_alt":"http://www.manageprojectsonsharepoint.com/wp-content/uploads/2014/03/SharePoint-Funny-broken.png","fr":{"title":"Sharepoint 2013 : &quot;Unable to import WebPart&quot;","summary":"\r\n\t\t<p>\r\n\t\t\tSolution SP 2013 d&#xE9;coup&#xE9;e en plusieurs sous projets. Le projet X r&#xE9;f&#xE9;rence bien le projet Y, il faut se rendre dans le projet principal de votre solution Sharepoint, se rendre dans &apos;package&apos; &gt; &apos;package.package&apos;, et se rendre dans l&apos;onglet &apos;Advanced&apos; &gt; &apos;Add&apos; &gt; &apos;Add assembly from project&apos; et ajouter le projet qui manque.\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tSolution SP 2013 d&#xE9;coup&#xE9;e en plusieurs sous projets. Le projet X r&#xE9;f&#xE9;rence bien le projet Y, il faut se rendre dans le projet principal de votre solution Sharepoint, se rendre dans &apos;package&apos; &gt; &apos;package.package&apos;, et se rendre dans l&apos;onglet &apos;Advanced&apos; &gt; &apos;Add&apos; &gt; &apos;Add assembly from project&apos; et ajouter le projet qui manque.\r\n\t\t</p>\r\n\t"},"en":{"title":"Sharepoint 2013 : &quot;Unable to import WebPart&quot;","summary":"\r\n\t\t<p>\r\n\t\t\tSP 2013 solution, with some under projects. Even if the project Y is referenced in project X, go to the main project Sharepoint, open folder &apos;package&apos; &gt; &apos;package.package&apos;. Then, open the &apos;Advanced&apos; tab &gt; &apos;Add&apos; &gt; &apos;Add assembly from project&apos;.\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tSP 2013 solution, with some under projects. Even if the project Y is referenced in project X, go to the main project Sharepoint, open folder &apos;package&apos; &gt; &apos;package.package&apos;. Then, open the &apos;Advanced&apos; tab &gt; &apos;Add&apos; &gt; &apos;Add assembly from project&apos;.\r\n\t\t</p>\r\n\t"}},{"id":1,"publication_date":1467763200000,"img":"/blog/files/img/validations-futurama.jpg","img_alt":"https://cdn.meme.am/instances/500x/64709545.jpg","fr":{"title":"Sharepoint 2007 : &apos;Enable Validation&apos; error","summary":"\r\n\t\t<p>\r\n\t\t\tAttention quand vous cr&#xE9;ez un &#xE9;l&#xE9;ment  via C# tel qu&apos;un &quot;DropDownList&quot; (soit un <code>&lt;select&gt;&lt;/select&gt;</code>), il y a un &apos;binding&apos; entre son &#xE9;tat initial (au chargement de la page) et son &#xE9;tat &#xE0; l&apos;envoie du formulaire. Par cons&#xE9;quent, si vous effectuez des modifications via du JavaScript sur le contenu du &quot;select&quot;, vous risquez bien de rencontrer une telle erreur.\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tAttention quand vous cr&#xE9;ez un &#xE9;l&#xE9;ment  via C# tel qu&apos;un &quot;DropDownList&quot; (soit un <code>&lt;select&gt;&lt;/select&gt;</code>), il y a un &apos;binding&apos; entre son &#xE9;tat initial (au chargement de la page) et son &#xE9;tat &#xE0; l&apos;envoie du formulaire. Par cons&#xE9;quent, si vous effectuez des modifications via du JavaScript sur le contenu du &quot;select&quot;, vous risquez bien de rencontrer une telle erreur.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tSi vous avez des &#xE9;l&#xE9;ments html que vous risquez de modifier via JavaScript utiliser plut&#xF4;t l&apos;objet HtmlGenericControl pour le cr&#xE9;er.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tPar exemple, j&apos;avais un  <code>&lt;select&gt;&lt;/select&gt;</code> que je remplie &#xE0; la suite d&apos;un appel ajax, donc c&#xF4;t&#xE9; C# :\r\n\t\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\n// globals\r\nprivate HtmlGenericControl custDropDownList;\r\nprivate HtmlGenericControl custIdHidden;\r\n\r\n// chargement de la page.\r\nprotected override void CreateChildControls()\r\n{\r\n\t//[...]\r\n\r\n\t// dans la partie du code qui va cr&#xE9;er les controls.\r\n\tthis.custDropDownList = new HtmlGenericControl(&quot;select&quot;) { \r\n\t\tID = &quot;custDropDownList&quot; \r\n\t};\r\n\tthis.custDropDownList.Attributes.Add(&quot;class&quot;, &quot;col-xs-12 textbox-input&quot;);\r\n\tthis.custDropDownList.Attributes.Add(&quot;disabled&quot;, &quot;disabled&quot;);\r\n\tcontentPanel.Controls.Add(this.custDropDownList);\r\n\r\n\t// ajout d&apos;un input hidden qui va nous servir &#xE0; r&#xE9;cup&#xE9;rer notre valeur.\r\n\tthis.custIdHidden = new HtmlGenericControl(&quot;input&quot;);\r\n\tthis.custIdHidden.Attributes.Add(&quot;type&quot;, &quot;hidden&quot;);\r\n\tthis.custIdHidden.Attributes.Add(&quot;id&quot;, &quot;custIdHidden&quot;);\r\n\tthis.custIdHidden.Attributes.Add(&quot;name&quot;, &quot;custIdHidden&quot;);\r\n\tcontentPanel.Controls.Add(this.custIdHidden);\r\n\r\n\t//[...]\r\n\r\n\t// on cr&#xE9;ait notre button pour l&apos;envoie de notre formulaire.\r\n\tButton saveButton = new Button() { \r\n\t\tText = &quot;Envoyer&quot; \r\n\t};\r\n\tsaveButton.Click += new EventHandler(OnSaveButtonClick);\r\n\tcontentPanel.Controls.Add(saveButton);\r\n\r\n\t//[...]\r\n}\r\n\r\n// &#xE0; la soumission de la page.\r\nvoid OnSaveButtonClick(object sender, EventArgs e)\r\n{\r\n\t//[...]\r\n\r\n\t// on r&#xE9;cup&#xE8;re notre valeur de notre hidden via son id.\r\n\tstring hiddenValue = Context.Request.Form[&quot;custIdHidden&quot;];\r\n\r\n    if (!String.IsNullOrEmpty(agenceValue))\r\n    {\r\n\t\t// notre traitement\r\n\t}\r\n\r\n\t//[...]\r\n}\r\n\t\t\t</prism-component>\r\n\t\t</p>\r\n\t"},"en":{"title":"Sharepoint 2007 : &apos;Enable Validation&apos; error","summary":"\r\n\t\t\t<p>\r\n\t\t\t\tCaution when you create an &quot;DropDownList&quot; control (equi html : <code>&lt;select&gt;&lt;/select&gt;</code>), a &apos;binding&apos; is created between initial state (when page is loaded) &amp; the state when you submit the form. Consequently, if you use JavaScript for edit the content of the &quot;select&quot;, you can face at this problem.\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\tIf you have a html element that you may edit via JavaScript, use the HtmlGenericControl object.\r\n\t\t\t</p>\r\n\t\t","content":"\r\n\t\t\t<p>\r\n\t\t\t\tCaution when you create an &quot;DropDownList&quot; control (equi html : <code>&lt;select&gt;&lt;/select&gt;</code>), a &apos;binding&apos; is created between initial state (when page is loaded) &amp; the state when you submit the form. Consequently, if you use JavaScript for edit the content of the &quot;select&quot;, you can face at this problem.\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\tIf you have a html element that you may edit via JavaScript, use the HtmlGenericControl object.\r\n\t\t\t</p>\r\n\t\t\t<p>\r\n\t\t\t\tSample, i&apos;ve got a <code>&lt;select&gt;&lt;/select&gt;</code> that i want to edit with an ajax request :\r\n\t\t\t\t\t<prism-component class=\"language-csharp line-numbers\">\r\n\t// globals\r\n\tprivate HtmlGenericControl custDropDownList;\r\n\tprivate HtmlGenericControl custIdHidden;\r\n\r\n\t// at page load.\r\n\tprotected override void CreateChildControls()\r\n\t{\r\n\t\t//[...]\r\n\r\n\t\t// create controls.\r\n\t\tthis.custDropDownList = new HtmlGenericControl(&quot;select&quot;) { \r\n\t\t\tID = &quot;custDropDownList&quot; \r\n\t\t};\r\n\t\tthis.custDropDownList.Attributes.Add(&quot;class&quot;, &quot;col-xs-12 textbox-input&quot;);\r\n\t\tthis.custDropDownList.Attributes.Add(&quot;disabled&quot;, &quot;disabled&quot;);\r\n\t\tcontentPanel.Controls.Add(this.custDropDownList);\r\n\r\n\t\t// add input hidden.\r\n\t\tthis.custIdHidden = new HtmlGenericControl(&quot;input&quot;);\r\n\t\tthis.custIdHidden.Attributes.Add(&quot;type&quot;, &quot;hidden&quot;);\r\n\t\tthis.custIdHidden.Attributes.Add(&quot;id&quot;, &quot;custIdHidden&quot;);\r\n\t\tthis.custIdHidden.Attributes.Add(&quot;name&quot;, &quot;custIdHidden&quot;);\r\n\t\tcontentPanel.Controls.Add(this.custIdHidden);\r\n\r\n\t\t//[...]\r\n\r\n\t\t// the submit button.\r\n\t\tButton saveButton = new Button() { \r\n\t\t\tText = &quot;Envoyer&quot; \r\n\t\t};\r\n\t\tsaveButton.Click += new EventHandler(OnSaveButtonClick);\r\n\t\tcontentPanel.Controls.Add(saveButton);\r\n\r\n\t\t//[...]\r\n\t}\r\n\r\n\t// submit.\r\n\tvoid OnSaveButtonClick(object sender, EventArgs e)\r\n\t{\r\n\t\t//[...]\r\n\r\n\t\t// get the value thanks to ID.\r\n\t\tstring hiddenValue = Context.Request.Form[&quot;custIdHidden&quot;];\r\n\r\n\t\tif (!String.IsNullOrEmpty(agenceValue))\r\n\t\t{\r\n\t\t\t// ...\r\n\t\t}\r\n\r\n\t\t//[...]\r\n\t}\r\n\t\t\t</prism-component>\r\n\t\t</p>\r\n\t"}},{"id":2,"publication_date":1467763200000,"img":"/blog/files/img/show-me.jpg","img_alt":"http://s2.quickmeme.com/img/43/438131590659e6b65931a2c3c65df7fb16804809a9ef178950785b53a707b47d.jpg","fr":{"title":"Sharepoint 2007 : show errors","summary":"\r\n\t\t<p>\r\n\t\t\tVous voulez afficher autre chose que : &apos;Une erreur est survenue&apos;, alors faites ce qui suit dans le <i>web.config</i> de la webApp <b>SharePoint</b>.\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tVous voulez afficher autre chose que : &apos;Une erreur est survenue&apos;, alors faites ce qui suit dans le <i>web.config</i> de la webApp <b>SharePoint</b>.\r\n\t\t</p>\r\n\t\t<h3>Custom Error</h3>\r\n\t\t<p>\r\n\t\t\tActivez les &quot;custom errors&quot; en vous rendant dans le tag : \r\n\t\t\t<code>\r\n\t\t\t\t&lt;system.web&gt;\r\n\t\t\t\t\t...\r\n\t\t\t\t&lt;/system.web&gt;\r\n\t\t\t</code>\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tTrouvez le tag : <code>&lt;customerrors mode=&quot;On&quot;&gt;&lt;/customerrors&gt;</code> &#xE0; changer en <code>&lt;customerrors mode=&quot;Off&quot;&gt;&lt;/customerrors&gt;</code>\r\n\t\t</p>\r\n\t\t<h3>Stack Trace</h3>\r\n\t\t<p>\r\n\t\t\tActivez la &quot;stack trace&quot; en vous rendant dans le tag : \r\n\t\t\t<code>\r\n\t\t\t\t&lt;sharepoint&gt;\r\n\t\t\t\t\t...\r\n\t\t\t\t&lt;/sharepoint&gt;\r\n\t\t\t</code>\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tTrouvez le tag : <code>&lt;safemode callstack=&quot;false&quot; ...=&quot;&quot;&gt;&lt;/safemode&gt;</code> &#xE0; changer en <code>&lt;safemode callstack=&quot;true&quot; ...=&quot;&quot;&gt;&lt;/safemode&gt;</code>\r\n\t\t</p>\r\n\t\t<h3>Debug Mode</h3>\r\n\t\t<p>\r\n\t\t\tTrouvez le tag : <code>&lt;compilation batch=&quot;false&quot; debug=&quot;false&quot;&gt;&lt;/compilation&gt;</code> &#xE0; changer en <code>&lt;compilation batch=&quot;true&quot; debug=&quot;true&quot;&gt;&lt;/compilation&gt;</code>\r\n\t\t</p>\r\n\t\t<h3>Ajoutez une Stack Trace ASP.NET</h3>\r\n\t\t<p>\r\n\t\t\tIl faut vous rendre au niveau du tag : \r\n\t\t\t<code>\r\n\t\t\t\t&lt;system.web&gt;\r\n\t\t\t\t\t...\r\n\t\t\t\t&lt;/system.web&gt;\r\n\t\t\t</code>\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tEt ajoutez le tag : <code>&lt;trace enabled=&quot;true&quot; pageoutput=&quot;true&quot;&gt;&lt;/trace&gt;</code>\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<i><a href=\"http://blog-sharepoint.blogspot.fr/2009/12/sharepoint-webconfig-how-to-show-full.html\">sources</a></i>\r\n\t\t</p>\r\n\t"},"en":{"title":"Sharepoint 2007 : show errors","summary":"\r\n\t\t<p>\r\n\t\t\tYou want to show full error message : &apos;An error has occured&apos; ? Go to <b>SharePoint</b> webApp <i>web.config</i>.\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tYou want to show full error message : &apos;An error has occured&apos; ? Go to <b>SharePoint</b> webApp <i>web.config</i>.\r\n\t\t</p>\r\n\t\t<h3>Custom Error</h3>\r\n\t\t<p>\r\n\t\t\t&quot;custom errors&quot; activation : \r\n\t\t\t<code>\r\n\t\t\t\t&lt;system.web&gt;\r\n\t\t\t\t\t...\r\n\t\t\t\t&lt;/system.web&gt;\r\n\t\t\t</code>\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tFind tag : <code>&lt;customerrors mode=&quot;On&quot;&gt;&lt;/customerrors&gt;</code> and replace to <code>&lt;customerrors mode=&quot;Off&quot;&gt;&lt;/customerrors&gt;</code>\r\n\t\t</p>\r\n\t\t<h3>Stack Trace</h3>\r\n\t\t<p>\r\n\t\t\t&quot;stack trace&quot; activation : \r\n\t\t\t<code>\r\n\t\t\t\t&lt;sharepoint&gt;\r\n\t\t\t\t\t...\r\n\t\t\t\t&lt;/sharepoint&gt;\r\n\t\t\t</code>\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tFind tag : <code>&lt;safemode callstack=&quot;false&quot; ...=&quot;&quot;&gt;&lt;/safemode&gt;</code> replace to <code>&lt;safemode callstack=&quot;true&quot; ...=&quot;&quot;&gt;&lt;/safemode&gt;</code>\r\n\t\t</p>\r\n\t\t<h3>Debug Mode</h3>\r\n\t\t<p>\r\n\t\t\tFind tag : <code>&lt;compilation batch=&quot;false&quot; debug=&quot;false&quot;&gt;&lt;/compilation&gt;</code> replace to <code>&lt;compilation batch=&quot;true&quot; debug=&quot;true&quot;&gt;&lt;/compilation&gt;</code>\r\n\t\t</p>\r\n\t\t<h3>ASP.NET Stack trace</h3>\r\n\t\t<p>\r\n\t\t\tFrom this tag : \r\n\t\t\t<code>\r\n\t\t\t\t&lt;system.web&gt;\r\n\t\t\t\t\t...\r\n\t\t\t\t&lt;/system.web&gt;\r\n\t\t\t</code>\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tAdd this tag : <code>&lt;trace enabled=&quot;true&quot; pageoutput=&quot;true&quot;&gt;&lt;/trace&gt;</code>\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\t<i><a href=\"http://blog-sharepoint.blogspot.fr/2009/12/sharepoint-webconfig-how-to-show-full.html\">sources</a></i>\r\n\t\t</p>\r\n\t"}},{"id":0,"publication_date":1467763200000,"img":"/blog/files/img/total-recall.gif","img_alt":"https://media2.giphy.com/media/10Wao1zhMpBgaI/200_s.gif","fr":{"title":"Hyper-V : &quot;n&apos;a pas pu cr&#xE9;er ou ouvrir le fichier d&apos;&#xE9;tat de mise en m&#xE9;moire&quot;","summary":"\r\n\t\t<p>\r\n\t\t\tApr&#xE8;s une copie d&apos;une VM (pourtant bien arr&#xEA;t&#xE9;e), cette derni&#xE8;re sur mon poste &#xE9;tait impossible &#xE0; d&#xE9;marrer. La copie qui a &#xE9;t&#xE9; transmise au coll&#xE8;gue &#xE9;tait parfaitement fonctionnelle.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tUn simple export de la VM puis une r&#xE9;importation peut vous sauver. &#x263A;\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tApr&#xE8;s une copie d&apos;une VM (pourtant bien arr&#xEA;t&#xE9;e), cette derni&#xE8;re sur mon poste &#xE9;tait impossible &#xE0; d&#xE9;marrer. La copie qui a &#xE9;t&#xE9; transmise au coll&#xE8;gue &#xE9;tait parfaitement fonctionnelle.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tUn simple export de la VM puis une r&#xE9;importation peut vous sauver. &#x263A;\r\n\t\t</p>\r\n\t"},"en":{"title":"Hyper-V : &quot;Failed to create memory contents file&quot;","summary":"\r\n\t\t<p>\r\n\t\t\tFor sharing a Virtual Machine, even if it was stopped correctly, i was unable to start it. The shared version started correctly on the co-worker pc.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tExport, re-import it = Save my time. &#x263A;\r\n\t\t</p>\r\n\t","content":"\r\n\t\t<p>\r\n\t\t\tFor sharing a Virtual Machine, even if it was stopped correctly, i was unable to start it. The shared version started correctly on the co-worker pc.\r\n\t\t</p>\r\n\t\t<p>\r\n\t\t\tExport, re-import it = Save my time. &#x263A;\r\n\t\t</p>\r\n\t"}}]
!function(a){"use strict";var b=["ui.router","ngSanitize","ngCookies","pascalprecht.translate","ngDisqus"],c=a.module("app",b),d=function(a,b,c,d,e,f,g,h){c.state("root",{views:{header:{template:"<header-component></header-component>"},footer:{template:"<footer-component></footer-component>"}}}),c.state("root.about",{url:"/about",views:{"main@":{templateUrl:"/blog/content/pages/about.html"}}}),b.otherwise("/"),a.setType("sessionStorage"),d.useStaticFilesLoader({prefix:"/app/common/i18n/",suffix:".json"}),d.preferredLanguage("fr"),d.useSanitizeValueStrategy("escapeParameters"),e.setPostsEmplacement("/blog/content/posts/posts.json"),f.setFlickrApiKey("ae778d76cb4455923168dcab2bfd7135"),f.setFlickrUserId("78474683@N07"),f.setFlickrUsername("azerato"),f.setMaxPhotos(12),g.setShortname("azerato-github-io"),h.hashPrefix("!")};d.$inject=["dataStoreProvider","$urlRouterProvider","$stateProvider","$translateProvider","articlesServiceProvider","flickrServiceProvider","$disqusProvider","$locationProvider"],c.config(d);var e=function(a,b,c){var d=b.get("favLang");""!==d&&void 0!==d||(d="fr",b.put("favLang",d)),a.currentLang=d,c.use(d)};e.$inject=["$rootScope","$cookies","$translate"],c.run(e)}(window.angular),function(a){"use strict";var b=a.module("app"),c=function(){this.type="localStorage",this.$get=function(){var a=this.type;return{set:function(b,c){window[a].setItem(b,JSON.stringify(c))},get:function(b){return JSON.parse(window[a].getItem(b))}}},this.setType=function(a){this.type=a}};b.provider("dataStore",c)}(window.angular),function(a){"use strict";var b=a.module("app"),c=function(a,b,c,d,e){b.$state=e,b.changeLang=function(b){c.use(b),a.currentLang=b,d.put("favLang",b)}};c.$inject=["$rootScope","$scope","$translate","$cookies","$state"];var d={controller:c,templateUrl:"/app/common/header/header.html"};b.component("headerComponent",d)}(window.angular),function(a){"use strict";var b=a.module("app"),c=function(){},d={controller:c,templateUrl:"/app/common/footer/footer.html"};b.component("footerComponent",d)}(window.angular),function(a){"use strict";var b=a.module("app"),c=function(a){this.$state=a,this.changePage=function(b){a.go(this.ref,{pageNumber:b})}};c.$inject=["$state"];var d={bindings:{ref:"@",pagesArray:"="},controller:c,templateUrl:"/app/common/pagination/pagination.html"};b.component("paginationComponent",d)}(window.angular),function(a){"use strict";var b=a.module("app"),c=function(a,b){a.$evalAsync(function(){var a=b[0].getElementsByTagName("pre")[0].getElementsByTagName("code")[0];Prism.highlightElement(a)})};c.$inject=["$scope","$element"];var d={bindings:{"class":"@"},transclude:!0,controller:c,template:'<pre class="{{$ctrl.class}}"><code ng-transclude></code></pre>'};b.component("prismComponent",d)}(window.angular),function(a){"use strict";var b=a.module("app");b.directive("compile",["$compile",function(a){return function(b,c,d){b.$watch(function(a){return a.$eval(d.compile)},function(d){c.html(d),a(c.contents())(b)})}}])}(window.angular),function(a){"use strict";var b=a.module("app"),c=function(a,b,c,d,e,f,g,h,i,j){var k;b.articles=[],b.articlesLoaded=!1,b.pages=[],i.readPaginationConfig(e,f,g).then(function(a){k=a,l(void 0!==d.pageNumber?d.pageNumber:1),b.pages=k.pages});var l=function(a){b.articlesLoaded=!1;var c=0;a>1&&(c=a*k.number_per_page-k.number_per_page);var d=c+k.number_per_page;i.getFromTo(c,d,e,f,g).then(function(a){b.articles=a,b.articlesLoaded=!0})}};c.$inject=["$rootScope","$scope","$state","$stateParams","$http","$q","$sce","dataStore","articlesService","$translate"];var d={controller:c,templateUrl:"/app/articles/articles.list.html"};b.component("articlesComponent",d);var e=function(a,b,c,d,e,f,g,h,i,j){b.article={},b.articleLoaded=!1,h.getById(d.articleId,e,f,g).then(function(a){b.article=a,b.articleLoaded=!0})};e.$inject=["$rootScope","$scope","$state","$stateParams","$http","$q","$sce","articlesService","$translate","$compile"];var f={controller:e,templateUrl:"/app/articles/article.details.html"};b.component("articleDetailsComponent",f);var g=function(a){a.state("root.articles",{url:"/",views:{"intro@":{templateUrl:"/blog/content/pages/intro.html"},"main@":{template:"<articles-component></articles-component>"}}}),a.state("root.details",{url:"/article/:articleId",views:{"main@":{template:"<article-details-component></article-details-component>"}}}),a.state("root.articles.pages",{url:"pages/:pageNumber",views:{"intro@":{template:""},"main@":{template:"<articles-component></articles-component>"}}})};g.$inject=["$stateProvider"],b.config(g)}(window.angular),function(a){"use strict";var b=a.module("app"),c=function(){var a=this;a.postsEmplacement="/blog/content/posts/posts.json",a.setPostsEmplacement=function(b){a.postsEmplacement=b},a.paginationConfigEmplacement="/blog/content/posts/pagination.json",a.setPaginationConfigEmplacement=function(b){a.paginationConfigEmplacement=b},a.PaginationConfig={},a.$get=function(){return{getById:function(b,c,d,e){var f=d.defer();return c.get(a.postsEmplacement).then(function(a){for(var c={},d=a.data.length-1;d>=0;d--)a.data[d].id==b&&(e.trustAsHtml(a.data[d].fr.summary),e.trustAsHtml(a.data[d].fr.content),e.trustAsHtml(a.data[d].en.summary),e.trustAsHtml(a.data[d].en.content),c=a.data[d]);f.resolve(c)},function(a){console.log("articlesServiceProvider::$get::getById error("+a+")"),f.reject(a)}),f.promise},getAll:function(b,c,d){var e=c.defer();return b.get(a.postsEmplacement).then(function(a){for(var b=[],c=from;c<to;c++)d.trustAsHtml(a.data[c].fr.summary),d.trustAsHtml(a.data[c].fr.content),d.trustAsHtml(a.data[c].en.summary),d.trustAsHtml(a.data[c].en.content),b.push(a.data[c]);e.resolve(b)},function(a){console.log("articlesServiceProvider::$get::getAll error("+a+")"),e.reject(a)}),e.promise},readPaginationConfig:function(b,c,d){var e=c.defer();return b.get(a.paginationConfigEmplacement).then(function(a){e.resolve(a.data)},function(a){console.log("articlesServiceProvider::$get::readPaginationConfig error("+a+")"),e.reject(a)}),e.promise},getFromTo:function(b,c,d,e,f){var g=e.defer();return d.get(a.postsEmplacement).then(function(a){var d=[];c>a.data.length&&(c=a.data.length);for(var e=b;e<c;e++)f.trustAsHtml(a.data[e].fr.summary),f.trustAsHtml(a.data[e].fr.content),f.trustAsHtml(a.data[e].en.summary),f.trustAsHtml(a.data[e].en.content),d.push(a.data[e]);g.resolve(d)},function(a){console.log("articlesServiceProvider::$get::getFromTo error("+a+")"),g.reject(a)}),g.promise}}}};b.provider("articlesService",c)}(window.angular),function(a){"use strict";var b=a.module("app"),c=function(a,b,c,d,e,f){a.imgs=[],a.imgsLoaded=!1;try{var g=f.get("flickr-photos");if(""===g||void 0===g)e.get(b,c,d).then(function(b){a.username=b.username,a.imgs=b.photos,a.imgsLoaded=!0,g={lastUpdated:Date.now(),photos:b.photos,username:b.username},f.put("flickr-photos",JSON.stringify(g))});else{g=JSON.parse(g);var h=Date.now();g.lastUpdated+3e4>h?e.get(b,c,d).then(function(b){a.username=b.username,a.imgs=b.photos,a.imgsLoaded=!0,g.lastUpdated=h,g.photos=b.photos,g.username=b.username,f.put("flickr-photos",JSON.stringify(g))}):(a.username=g.username,a.imgs=g.photos,a.imgsLoaded=!0)}}catch(i){console.log("flickrComponent::flickrController::Error ("+i+")"),a.imgsLoaded=!1}};c.$inject=["$scope","$http","$q","$sce","flickrService","$cookies"];var d={controller:c,templateUrl:"/app/flickr/flickr.list.html"};b.component("flickrComponent",d)}(window.angular),function(a){"use strict";var b=a.module("app"),c=function(){var a=this;a.apiKey=null,a.userId=null,a.username=null,a.maxPhotos=5,a.setFlickrApiKey=function(b){a.apiKey=b},a.setFlickrUserId=function(b){a.userId=b},a.setFlickrUsername=function(b){a.username=b},a.setMaxPhotos=function(b){a.maxPhotos=b},a.$get=function(){return{get:function(b,c,d){var e=!1;if(null===a.apiKey&&(console.log("flickrServiceProvider::$get::get no api key specified"),e=!0),null===a.userId&&(console.log("flickrServiceProvider::$get::get no user id specified (use : http://idgettr.com/)"),e=!0),null===a.username&&(console.log("flickrServiceProvider::$get::get no username specified"),e=!0),!e){var f=c.defer();return b.get("https://api.flickr.com/services/rest/?api_key="+a.apiKey+"&nojsoncallback=1&format=json&user_id="+a.userId+"&method=flickr.people.getPublicPhotos&per_page="+a.maxPhotos).then(function(b){for(var c={username:a.username,photos:[]},d=b.data.photos.photo.length-1;d>=0;d--){var e=b.data.photos.photo[d],g="https://farm"+e.farm+".staticflickr.com/"+e.server+"/"+e.id+"_"+e.secret+"_q.jpg",h="https://www.flickr.com/photos/"+a.username+"/"+e.id+"/in/dateposted-public/";c.photos.push({title:e.title,url:g,publicUrl:h})}f.resolve(c)},function(a){console.log("flickrServiceProvider::$get::get error("+a+")"),f.reject(a)}),f.promise}}}}};b.provider("flickrService",c)}(window.angular);
!function(){"use strict";function e(e,t,o,n,r,a,i,c){o.state("root",{views:{header:{template:"<header-component></header-component>"},footer:{template:"<footer-component></footer-component>"}}}),o.state("root.about",{url:"/about",views:{"main@":{templateUrl:"/blog/content/pages/about.html"}}}),t.otherwise("/"),e.setType("sessionStorage"),n.useStaticFilesLoader({prefix:"/app/common/i18n/",suffix:".json"}),n.preferredLanguage("fr"),n.useSanitizeValueStrategy("escapeParameters"),r.setPostsEmplacement("/blog/content/posts/posts.json"),a.setFlickrApiKey("ae778d76cb4455923168dcab2bfd7135"),a.setFlickrUserId("78474683@N07"),a.setFlickrUsername("azerato"),a.setMaxPhotos(12),i.setShortname("azerato-github-io"),c.hashPrefix("!")}var t=window.angular.module("app",["ui.router","ngSanitize","ngCookies","pascalprecht.translate","ngDisqus","ngAnimate"]);e.$inject=["dataStoreProvider","$urlRouterProvider","$stateProvider","$translateProvider","articlesServiceProvider","flickrServiceProvider","$disqusProvider","$locationProvider"],t.config(e);function o(e,t,o){var n=t.get("acceptCookies");e.acceptCookies=!1,n&&(e.acceptCookies=!0);var r=t.get("favLang");""!==r&&void 0!==r||(r="fr",e.acceptCookies&&t.put("favLang",r)),e.currentLang=r,o.use(r)}o.$inject=["$rootScope","$cookies","$translate"],t.run(o)}(),function(){"use strict";window.angular.module("app").provider("dataStore",function(){this.type="localStorage",this.$get=function(){var o=this.type;return{set:function(e,t){window[o].setItem(e,JSON.stringify(t))},get:function(e){return JSON.parse(window[o].getItem(e))}}},this.setType=function(e){this.type=e}})}(),function(){"use strict";function e(t,o,n,e){var r=this;r.$onInit=function(){r.$state=e,r.$el=$(".cst-header"),r.scrollStart=0,r.$elLimit=$(".cst-container-articles"),r.limitOffset=r.$elLimit.offset(),r.$elLimit.length&&(r.$elLimit.offset(),$(document).scroll(function(){r.$state.is("root.articles")&&(r.scrollStart=$(this).scrollTop(),r.scrollStart>r.limitOffset.top?r.$el.addClass("header-color"):r.$el.removeClass("header-color"))}))},r.changeLang=function(e){o.use(e),t.currentLang=e,1==t.acceptCookies&&n.put("favLang",e)}}var t=window.angular.module("app");e.$inject=["$rootScope","$translate","$cookies","$state"];var o={controller:e,templateUrl:"/app/common/header/header.html"};t.component("headerComponent",o)}(),function(){"use strict";function e(e){this.$onInit=function(){this.acceptCookies=e.acceptCookies}}var t=window.angular.module("app");e.$inject=["$rootScope"];var o={controller:e,templateUrl:"/app/common/footer/footer.html"};t.component("footerComponent",o)}(),function(){"use strict";function e(e){var t=this;t.$onInit=function(){t.$state=e},t.changePage=function(e){t.$state.go(t.ref,{pageNumber:e})}}var t=window.angular.module("app");e.$inject=["$state"];var o={bindings:{ref:"@",pagesArray:"="},controller:e,templateUrl:"/app/common/pagination/pagination.html"};t.component("paginationComponent",o)}(),function(){"use strict";function e(t,e,o){var n=this;n.$onInit=function(){n.state=t.acceptCookies},n.validCookiesSub=function(){n.state=!0,t.acceptCookies=!0;var e=new Date;e.setMonth(e.getMonth()+5),o.put("acceptCookies",!0,{expires:e})}}var t=window.angular.module("app");e.$inject=["$rootScope","$translate","$cookies"];var o={controller:e,templateUrl:"/app/common/cookies/cookies.html"};t.component("cookiesComponent",o)}(),function(){"use strict";function e(e,t,o,n,r,a){var i=this;i.searchForm=!1,i.noResult=!1,i.$onInit=function(){i.$input=$(".cst-search-form-input")},i.research=function(){i.searchForm=!0,window.scrollTo(0,0),setInterval(function(){i.$input.focus()},500)},i.search=function(){i.articles=[],i.noResult=!1,i.searchRequirements=!1,null!=i.stringSearch&&""!=i.stringSearch.trim()&&2<i.stringSearch.length?a.search(i.stringSearch.toLowerCase(),e.currentLang,o,n,r).then(function(e){0<e.length?a.getAllBySearchObject(e,o,n,r).then(function(e){i.articles=e}):i.noResult=!0}):i.searchRequirements=!0},i.hideResearch=function(){i.searchForm=!1}}var t=window.angular.module("app");e.$inject=["$rootScope","$translate","$http","$q","$sce","articlesService"];var o={controller:e,templateUrl:"/app/common/search/search.html"};t.component("searchComponent",o)}(),function(){"use strict";function e(e,t){e.$evalAsync(function(){var e=t[0].getElementsByTagName("pre")[0].getElementsByTagName("code")[0];Prism.highlightElement(e)})}var t=window.angular.module("app");e.$inject=["$scope","$element"];var o={bindings:{class:"@"},transclude:!0,controller:e,template:'<pre class="{{$ctrl.class}}"><code ng-transclude></code></pre>'};t.component("prismComponent",o)}(),function(){"use strict";window.angular.module("app").directive("compile",["$compile",function(r){return function(t,o,n){t.$watch(function(e){return e.$eval(n.compile)},function(e){o.html(e),r(o.contents())(t)})}}])}(),function(){"use strict";function e(e,t,o,n,r,a,i,c,s){var l=this;l.$onInit=function(){l.pageConfig=void 0,l.articles=[],l.articlesLoaded=!1,l.pages=[],c.readPaginationConfig(n,r,a).then(function(e){l.pageConfig=e,void 0!==o.pageNumber?l.changePage(o.pageNumber):l.changePage(1),l.pages=l.pageConfig.pages})},l.changePage=function(e){l.articlesLoaded=!1;var t=0;1<e&&(t=e*l.pageConfig.number_per_page-l.pageConfig.number_per_page);var o=t+l.pageConfig.number_per_page;c.getFromTo(t,o,n,r,a).then(function(e){l.articles=e,l.articlesLoaded=!0})}}var t=window.angular.module("app");e.$inject=["$rootScope","$state","$stateParams","$http","$q","$sce","dataStore","articlesService","$translate"];var o={controller:e,templateUrl:"/app/articles/articles.list.html"};t.component("articlesComponent",o);function n(e,t,o,n,r,a,i,c,s){var l=this;l.$onInit=function(){l.article={},l.articleLoaded=!1,i.getById(o.articleId,n,r,a).then(function(e){l.article=e,l.articleLoaded=!0})}}n.$inject=["$rootScope","$state","$stateParams","$http","$q","$sce","articlesService","$translate","$compile"];var r={controller:n,templateUrl:"/app/articles/article.details.html"};t.component("articleDetailsComponent",r);function a(e){e.state("root.articles",{url:"/",views:{"intro@":{templateUrl:"/blog/content/pages/intro.html"},"main@":{template:'<articles-component class="cst-container-articles"></articles-component>'}}}),e.state("root.details",{url:"/article/:articleId",views:{"main@":{template:'<article-details-component class="cst-container-articles"></article-details-component>'}}}),e.state("root.articles.pages",{url:"pages/:pageNumber",views:{"intro@":{template:""},"main@":{template:"<articles-component></articles-component>"}}})}a.$inject=["$stateProvider"],t.config(a)}(),function(){"use strict";window.angular.module("app").provider("articlesService",function(){var c=this;c.postsEmplacement="/blog/content/posts/posts.json",c.setPostsEmplacement=function(e){c.postsEmplacement=e},c.paginationConfigEmplacement="/blog/content/posts/pagination.json",c.setPaginationConfigEmplacement=function(e){c.paginationConfigEmplacement=e},c.indexerFREmplacement="/blog/content/posts/indexer.fr.json",c.setIndexerFREmplacement=function(e){c.indexerFREmplacement=e},c.indexerENEmplacement="/blog/content/posts/indexer.en.json",c.setIndexerENEmplacement=function(e){c.indexerENEmplacement=e},c.PaginationConfig={},c.$get=function(){return{getById:function(n,e,t,r){var a=t.defer();return e.get(c.postsEmplacement,{cache:!0}).then(function(e){for(var t={},o=e.data.length-1;0<=o;o--)e.data[o].id==n&&(r.trustAsHtml(e.data[o].fr.summary),r.trustAsHtml(e.data[o].fr.content),r.trustAsHtml(e.data[o].en.summary),r.trustAsHtml(e.data[o].en.content),t=e.data[o]);a.resolve(t)},function(e){console.log("articlesServiceProvider::$get::getById error("+e+")"),a.reject(e)}),a.promise},getAll:function(e,t,n){var r=t.defer();return e.get(c.postsEmplacement,{cache:!0}).then(function(e){for(var t=[],o=from;o<to;o++)n.trustAsHtml(e.data[o].fr.summary),n.trustAsHtml(e.data[o].fr.content),n.trustAsHtml(e.data[o].en.summary),n.trustAsHtml(e.data[o].en.content),t.push(e.data[o]);r.resolve(t)},function(e){console.log("articlesServiceProvider::$get::getAll error("+e+")"),r.reject(e)}),r.promise},readPaginationConfig:function(e,t,o){var n=t.defer();return e.get(c.paginationConfigEmplacement,{cache:!0}).then(function(e){n.resolve(e.data)},function(e){console.log("articlesServiceProvider::$get::readPaginationConfig error("+e+")"),n.reject(e)}),n.promise},getFromTo:function(n,r,e,t,a){var i=t.defer();return e.get(c.postsEmplacement,{cache:!0}).then(function(e){var t=[];r>e.data.length&&(r=e.data.length);for(var o=n;o<r;o++)a.trustAsHtml(e.data[o].fr.summary),a.trustAsHtml(e.data[o].fr.content),a.trustAsHtml(e.data[o].en.summary),a.trustAsHtml(e.data[o].en.content),t.push(e.data[o]);i.resolve(t)},function(e){console.log("articlesServiceProvider::$get::getFromTo error("+e+")"),i.reject(e)}),i.promise},search:function(r,e,t,o,n){var a=o.defer(),i="";return"fr"==e&&(i=c.indexerFREmplacement),"en"==e&&(i=c.indexerENEmplacement),r=r.split(" "),t.get(i,{cache:!0}).then(function(e){for(var o=[],t=e.data.length-1;0<=t;t--)for(var n=r.length-1;0<=n;n--)if(null!=e.data[t].word&&-1!=e.data[t].word.indexOf(r[n])){if(0==o.length){o=e.data[t].posts;break}e.data[t].posts.map(function(t){var e=o.find(function(e){return e.id==t.id});null!=e?e.force+=t.force:o.push(t)})}a.resolve(o)},function(e){console.log("articlesServiceProvider::$get::search error("+e+")"),a.reject(e)}),a.promise},getAllBySearchObject:function(r,e,t,a){var i=t.defer();return e.get(c.postsEmplacement,{cache:!0}).then(function(e){for(var t=[],o=r.length-1;0<=o;o--)for(var n=e.data.length-1;0<=n;n--)e.data[n].id==r[o].id&&(a.trustAsHtml(e.data[n].fr.summary),a.trustAsHtml(e.data[n].en.summary),e.data[n].force=r[o].force,t.push(e.data[n]));t=t.sort(function(e,t){return t.force-e.force}),i.resolve(t)},function(e){console.log("articlesServiceProvider::$get::search error("+e+")"),i.reject(e)}),i.promise}}}})}(),function(){"use strict";function e(e,t,n,r,a){var i=this;i.$onInit=function(){i.imgs=[],i.imgsLoaded=!1;var o=a.get("flickr-photos");""===o||void 0===o?r.get(e,t,n).then(function(e){var t;i.username=e.username,i.imgs=e.photos,i.imgsLoaded=!0,o={photos:e.photos,username:e.username},i.useCookies&&((t=new Date).setMinutes(t.getMinutes()+5),a.put("flickr-photos",JSON.stringify(o),{expires:t}))}):(o=JSON.parse(o),i.username=o.username,i.imgs=o.photos,i.imgsLoaded=!0)}}var t=window.angular.module("app");e.$inject=["$http","$q","$sce","flickrService","$cookies"];var o={bindings:{useCookies:"="},controller:e,templateUrl:"/app/flickr/flickr.list.html"};t.component("flickrComponent",o)}(),function(){"use strict";window.angular.module("app").provider("flickrService",function(){var c=this;c.apiKey=null,c.userId=null,c.username=null,c.maxPhotos=5,c.setFlickrApiKey=function(e){c.apiKey=e},c.setFlickrUserId=function(e){c.userId=e},c.setFlickrUsername=function(e){c.username=e},c.setMaxPhotos=function(e){c.maxPhotos=e},c.$get=function(){return{get:function(e,t,o){var n=!1;if(null===c.apiKey&&(console.log("flickrServiceProvider::$get::get no api key specified"),n=!0),null===c.userId&&(console.log("flickrServiceProvider::$get::get no user id specified (use : http://idgettr.com/)"),n=!0),null===c.username&&(console.log("flickrServiceProvider::$get::get no username specified"),n=!0),!n){var i=t.defer();return e.get("https://api.flickr.com/services/rest/?api_key="+c.apiKey+"&nojsoncallback=1&format=json&user_id="+c.userId+"&method=flickr.people.getPublicPhotos&per_page="+c.maxPhotos).then(function(e){for(var t={username:c.username,photos:[]},o=0;o<e.data.photos.photo.length;o++){var n=e.data.photos.photo[o],r="https://farm"+n.farm+".staticflickr.com/"+n.server+"/"+n.id+"_"+n.secret+"_q.jpg",a="https://www.flickr.com/photos/"+c.username+"/"+n.id+"/in/dateposted-public/";t.photos.push({title:n.title,url:r,publicUrl:a})}i.resolve(t)},function(e){console.log("flickrServiceProvider::$get::get error("+e+")"),i.reject(e)}),i.promise}}}}})}();